var ou=n=>{throw TypeError(n)};var Ca=(n,e,t)=>e.has(n)||ou("Cannot "+t);var I=(n,e,t)=>(Ca(n,e,"read from private field"),t?t.call(n):e.get(n)),Ae=(n,e,t)=>e.has(n)?ou("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ge=(n,e,t,i)=>(Ca(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),nt=(n,e,t)=>(Ca(n,e,"access private method"),t);var Ws=(n,e,t,i)=>({set _(s){ge(n,e,s,t)},get _(){return I(n,e,i)}});import{r as b,a as hs,R as z,v as Dd,b as $d,u as Ht,g as ig,c as St,d as sg,e as og,B as ag,f as lg,h as ut}from"./vendor-D2krIvy0.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var Bd={exports:{}},Co={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg=b,ug=Symbol.for("react.element"),dg=Symbol.for("react.fragment"),hg=Object.prototype.hasOwnProperty,fg=cg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mg={key:!0,ref:!0,__self:!0,__source:!0};function zd(n,e,t){var i,s={},a=null,l=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)hg.call(e,i)&&!mg.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:ug,type:n,key:a,ref:l,props:s,_owner:fg.current}}Co.Fragment=dg;Co.jsx=zd;Co.jsxs=zd;Bd.exports=Co;var d=Bd.exports,Fd,au=hs;Fd=au.createRoot,au.hydrateRoot;const pg=1,gg=1e6;let ja=0;function vg(){return ja=(ja+1)%Number.MAX_SAFE_INTEGER,ja.toString()}const Aa=new Map,lu=n=>{if(Aa.has(n))return;const e=setTimeout(()=>{Aa.delete(n),Gi({type:"REMOVE_TOAST",toastId:n})},gg);Aa.set(n,e)},_g=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,pg)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?lu(t):n.toasts.forEach(i=>{lu(i.id)}),{...n,toasts:n.toasts.map(i=>i.id===t||t===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},ro=[];let io={toasts:[]};function Gi(n){io=_g(io,n),ro.forEach(e=>{e(io)})}function yg({...n}){const e=vg(),t=s=>Gi({type:"UPDATE_TOAST",toast:{...s,id:e}}),i=()=>Gi({type:"DISMISS_TOAST",toastId:e});return Gi({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||i()}}}),{id:e,dismiss:i,update:t}}function Rl(){const[n,e]=b.useState(io);return b.useEffect(()=>(ro.push(e),()=>{const t=ro.indexOf(e);t>-1&&ro.splice(t,1)}),[n]),{...n,toast:yg,dismiss:t=>Gi({type:"DISMISS_TOAST",toastId:t})}}function Ee(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function cu(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Ud(...n){return e=>{let t=!1;const i=n.map(s=>{const a=cu(s,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let s=0;s<i.length;s++){const a=i[s];typeof a=="function"?a():cu(n[s],null)}}}}function ot(...n){return b.useCallback(Ud(...n),n)}function wg(n,e){const t=b.createContext(e),i=a=>{const{children:l,...u}=a,f=b.useMemo(()=>u,Object.values(u));return d.jsx(t.Provider,{value:f,children:l})};i.displayName=n+"Provider";function s(a){const l=b.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[i,s]}function Cr(n,e=[]){let t=[];function i(a,l){const u=b.createContext(l),f=t.length;t=[...t,l];const m=v=>{var k;const{scope:S,children:_,...T}=v,y=((k=S==null?void 0:S[n])==null?void 0:k[f])||u,w=b.useMemo(()=>T,Object.values(T));return d.jsx(y.Provider,{value:w,children:_})};m.displayName=a+"Provider";function p(v,S){var y;const _=((y=S==null?void 0:S[n])==null?void 0:y[f])||u,T=b.useContext(_);if(T)return T;if(l!==void 0)return l;throw new Error(`\`${v}\` must be used within \`${a}\``)}return[m,p]}const s=()=>{const a=t.map(l=>b.createContext(l));return function(u){const f=(u==null?void 0:u[n])||a;return b.useMemo(()=>({[`__scope${n}`]:{...u,[n]:f}}),[u,f])}};return s.scopeName=n,[i,bg(s,...e)]}function bg(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const l=i.reduce((u,{useScope:f,scopeName:m})=>{const v=f(a)[`__scope${m}`];return{...u,...v}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function Xi(n){const e=Sg(n),t=b.forwardRef((i,s)=>{const{children:a,...l}=i,u=b.Children.toArray(a),f=u.find(Tg);if(f){const m=f.props.children,p=u.map(v=>v===f?b.Children.count(m)>1?b.Children.only(null):b.isValidElement(m)?m.props.children:null:v);return d.jsx(e,{...l,ref:s,children:b.isValidElement(m)?b.cloneElement(m,void 0,p):null})}return d.jsx(e,{...l,ref:s,children:a})});return t.displayName=`${n}.Slot`,t}var xg=Xi("Slot");function Sg(n){const e=b.forwardRef((t,i)=>{const{children:s,...a}=t;if(b.isValidElement(s)){const l=Eg(s),u=Pg(a,s.props);return s.type!==b.Fragment&&(u.ref=i?Ud(i,l):l),b.cloneElement(s,u)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Zd=Symbol("radix.slottable");function kg(n){const e=({children:t})=>d.jsx(d.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=Zd,e}function Tg(n){return b.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Zd}function Pg(n,e){const t={...e};for(const i in e){const s=n[i],a=e[i];/^on[A-Z]/.test(i)?s&&a?t[i]=(...u)=>{const f=a(...u);return s(...u),f}:s&&(t[i]=s):i==="style"?t[i]={...s,...a}:i==="className"&&(t[i]=[s,a].filter(Boolean).join(" "))}return{...n,...t}}function Eg(n){var i,s;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Wd(n){const e=n+"CollectionProvider",[t,i]=Cr(e),[s,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=y=>{const{scope:w,children:k}=y,C=z.useRef(null),P=z.useRef(new Map).current;return d.jsx(s,{scope:w,itemMap:P,collectionRef:C,children:k})};l.displayName=e;const u=n+"CollectionSlot",f=Xi(u),m=z.forwardRef((y,w)=>{const{scope:k,children:C}=y,P=a(u,k),j=ot(w,P.collectionRef);return d.jsx(f,{ref:j,children:C})});m.displayName=u;const p=n+"CollectionItemSlot",v="data-radix-collection-item",S=Xi(p),_=z.forwardRef((y,w)=>{const{scope:k,children:C,...P}=y,j=z.useRef(null),N=ot(w,j),R=a(p,k);return z.useEffect(()=>(R.itemMap.set(j,{ref:j,...P}),()=>void R.itemMap.delete(j))),d.jsx(S,{[v]:"",ref:N,children:C})});_.displayName=p;function T(y){const w=a(n+"CollectionConsumer",y);return z.useCallback(()=>{const C=w.collectionRef.current;if(!C)return[];const P=Array.from(C.querySelectorAll(`[${v}]`));return Array.from(w.itemMap.values()).sort((R,M)=>P.indexOf(R.ref.current)-P.indexOf(M.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:l,Slot:m,ItemSlot:_},T,i]}var Cg=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Re=Cg.reduce((n,e)=>{const t=Xi(`Primitive.${e}`),i=b.forwardRef((s,a)=>{const{asChild:l,...u}=s,f=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(f,{...u,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function qd(n,e){n&&hs.flushSync(()=>n.dispatchEvent(e))}function Zt(n){const e=b.useRef(n);return b.useEffect(()=>{e.current=n}),b.useMemo(()=>(...t)=>{var i;return(i=e.current)==null?void 0:i.call(e,...t)},[])}function jg(n,e=globalThis==null?void 0:globalThis.document){const t=Zt(n);b.useEffect(()=>{const i=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var Ag="DismissableLayer",el="dismissableLayer.update",Og="dismissableLayer.pointerDownOutside",Ng="dismissableLayer.focusOutside",uu,Hd=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jo=b.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:l,onDismiss:u,...f}=n,m=b.useContext(Hd),[p,v]=b.useState(null),S=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,_]=b.useState({}),T=ot(e,M=>v(M)),y=Array.from(m.layers),[w]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),k=y.indexOf(w),C=p?y.indexOf(p):-1,P=m.layersWithOutsidePointerEventsDisabled.size>0,j=C>=k,N=Lg(M=>{const U=M.target,q=[...m.branches].some(Y=>Y.contains(U));!j||q||(s==null||s(M),l==null||l(M),M.defaultPrevented||u==null||u())},S),R=Ig(M=>{const U=M.target;[...m.branches].some(Y=>Y.contains(U))||(a==null||a(M),l==null||l(M),M.defaultPrevented||u==null||u())},S);return jg(M=>{C===m.layers.size-1&&(i==null||i(M),!M.defaultPrevented&&u&&(M.preventDefault(),u()))},S),b.useEffect(()=>{if(p)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(uu=S.body.style.pointerEvents,S.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(p)),m.layers.add(p),du(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(S.body.style.pointerEvents=uu)}},[p,S,t,m]),b.useEffect(()=>()=>{p&&(m.layers.delete(p),m.layersWithOutsidePointerEventsDisabled.delete(p),du())},[p,m]),b.useEffect(()=>{const M=()=>_({});return document.addEventListener(el,M),()=>document.removeEventListener(el,M)},[]),d.jsx(Re.div,{...f,ref:T,style:{pointerEvents:P?j?"auto":"none":void 0,...n.style},onFocusCapture:Ee(n.onFocusCapture,R.onFocusCapture),onBlurCapture:Ee(n.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Ee(n.onPointerDownCapture,N.onPointerDownCapture)})});jo.displayName=Ag;var Rg="DismissableLayerBranch",Vd=b.forwardRef((n,e)=>{const t=b.useContext(Hd),i=b.useRef(null),s=ot(e,i);return b.useEffect(()=>{const a=i.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),d.jsx(Re.div,{...n,ref:s})});Vd.displayName=Rg;function Lg(n,e=globalThis==null?void 0:globalThis.document){const t=Zt(n),i=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const a=u=>{if(u.target&&!i.current){let f=function(){Gd(Og,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=f,e.addEventListener("click",s.current,{once:!0})):f()}else e.removeEventListener("click",s.current);i.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function Ig(n,e=globalThis==null?void 0:globalThis.document){const t=Zt(n),i=b.useRef(!1);return b.useEffect(()=>{const s=a=>{a.target&&!i.current&&Gd(Ng,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function du(){const n=new CustomEvent(el);document.dispatchEvent(n)}function Gd(n,e,t,{discrete:i}){const s=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),i?qd(s,a):s.dispatchEvent(a)}var Mg=jo,Dg=Vd,En=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},$g="Portal",Ll=b.forwardRef((n,e)=>{var u;const{container:t,...i}=n,[s,a]=b.useState(!1);En(()=>a(!0),[]);const l=t||s&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return l?Dd.createPortal(d.jsx(Re.div,{...i,ref:e}),l):null});Ll.displayName=$g;function Bg(n,e){return b.useReducer((t,i)=>e[t][i]??t,n)}var jr=n=>{const{present:e,children:t}=n,i=zg(e),s=typeof t=="function"?t({present:i.isPresent}):b.Children.only(t),a=ot(i.ref,Fg(s));return typeof t=="function"||i.isPresent?b.cloneElement(s,{ref:a}):null};jr.displayName="Presence";function zg(n){const[e,t]=b.useState(),i=b.useRef(null),s=b.useRef(n),a=b.useRef("none"),l=n?"mounted":"unmounted",[u,f]=Bg(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const m=qs(i.current);a.current=u==="mounted"?m:"none"},[u]),En(()=>{const m=i.current,p=s.current;if(p!==n){const S=a.current,_=qs(m);n?f("MOUNT"):_==="none"||(m==null?void 0:m.display)==="none"?f("UNMOUNT"):f(p&&S!==_?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,f]),En(()=>{if(e){let m;const p=e.ownerDocument.defaultView??window,v=_=>{const y=qs(i.current).includes(_.animationName);if(_.target===e&&y&&(f("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",m=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},S=_=>{_.target===e&&(a.current=qs(i.current))};return e.addEventListener("animationstart",S),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{p.clearTimeout(m),e.removeEventListener("animationstart",S),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:b.useCallback(m=>{i.current=m?getComputedStyle(m):null,t(m)},[])}}function qs(n){return(n==null?void 0:n.animationName)||"none"}function Fg(n){var i,s;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Ug=$d[" useInsertionEffect ".trim().toString()]||En;function Ao({prop:n,defaultProp:e,onChange:t=()=>{},caller:i}){const[s,a,l]=Zg({defaultProp:e,onChange:t}),u=n!==void 0,f=u?n:s;{const p=b.useRef(n!==void 0);b.useEffect(()=>{const v=p.current;v!==u&&console.warn(`${i} is changing from ${v?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=u},[u,i])}const m=b.useCallback(p=>{var v;if(u){const S=Wg(p)?p(n):p;S!==n&&((v=l.current)==null||v.call(l,S))}else a(p)},[u,n,a,l]);return[f,m]}function Zg({defaultProp:n,onChange:e}){const[t,i]=b.useState(n),s=b.useRef(t),a=b.useRef(e);return Ug(()=>{a.current=e},[e]),b.useEffect(()=>{var l;s.current!==t&&((l=a.current)==null||l.call(a,t),s.current=t)},[t,s]),[t,i,a]}function Wg(n){return typeof n=="function"}var qg=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Hg="VisuallyHidden",Oo=b.forwardRef((n,e)=>d.jsx(Re.span,{...n,ref:e,style:{...qg,...n.style}}));Oo.displayName=Hg;var Vg=Oo,Il="ToastProvider",[Ml,Gg,Kg]=Wd("Toast"),[Kd,BT]=Cr("Toast",[Kg]),[Jg,No]=Kd(Il),Jd=n=>{const{__scopeToast:e,label:t="Notification",duration:i=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:l}=n,[u,f]=b.useState(null),[m,p]=b.useState(0),v=b.useRef(!1),S=b.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Il}\`. Expected non-empty \`string\`.`),d.jsx(Ml.Provider,{scope:e,children:d.jsx(Jg,{scope:e,label:t,duration:i,swipeDirection:s,swipeThreshold:a,toastCount:m,viewport:u,onViewportChange:f,onToastAdd:b.useCallback(()=>p(_=>_+1),[]),onToastRemove:b.useCallback(()=>p(_=>_-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:S,children:l})})};Jd.displayName=Il;var Yd="ToastViewport",Yg=["F8"],tl="toast.viewportPause",nl="toast.viewportResume",Qd=b.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:i=Yg,label:s="Notifications ({hotkey})",...a}=n,l=No(Yd,t),u=Gg(t),f=b.useRef(null),m=b.useRef(null),p=b.useRef(null),v=b.useRef(null),S=ot(e,v,l.onViewportChange),_=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=l.toastCount>0;b.useEffect(()=>{const w=k=>{var P;i.length!==0&&i.every(j=>k[j]||k.code===j)&&((P=v.current)==null||P.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[i]),b.useEffect(()=>{const w=f.current,k=v.current;if(T&&w&&k){const C=()=>{if(!l.isClosePausedRef.current){const R=new CustomEvent(tl);k.dispatchEvent(R),l.isClosePausedRef.current=!0}},P=()=>{if(l.isClosePausedRef.current){const R=new CustomEvent(nl);k.dispatchEvent(R),l.isClosePausedRef.current=!1}},j=R=>{!w.contains(R.relatedTarget)&&P()},N=()=>{w.contains(document.activeElement)||P()};return w.addEventListener("focusin",C),w.addEventListener("focusout",j),w.addEventListener("pointermove",C),w.addEventListener("pointerleave",N),window.addEventListener("blur",C),window.addEventListener("focus",P),()=>{w.removeEventListener("focusin",C),w.removeEventListener("focusout",j),w.removeEventListener("pointermove",C),w.removeEventListener("pointerleave",N),window.removeEventListener("blur",C),window.removeEventListener("focus",P)}}},[T,l.isClosePausedRef]);const y=b.useCallback(({tabbingDirection:w})=>{const C=u().map(P=>{const j=P.ref.current,N=[j,...uv(j)];return w==="forwards"?N:N.reverse()});return(w==="forwards"?C.reverse():C).flat()},[u]);return b.useEffect(()=>{const w=v.current;if(w){const k=C=>{var N,R,M;const P=C.altKey||C.ctrlKey||C.metaKey;if(C.key==="Tab"&&!P){const U=document.activeElement,q=C.shiftKey;if(C.target===w&&q){(N=m.current)==null||N.focus();return}const Z=y({tabbingDirection:q?"backwards":"forwards"}),be=Z.findIndex(F=>F===U);Oa(Z.slice(be+1))?C.preventDefault():q?(R=m.current)==null||R.focus():(M=p.current)==null||M.focus()}};return w.addEventListener("keydown",k),()=>w.removeEventListener("keydown",k)}},[u,y]),d.jsxs(Dg,{ref:f,role:"region","aria-label":s.replace("{hotkey}",_),tabIndex:-1,style:{pointerEvents:T?void 0:"none"},children:[T&&d.jsx(rl,{ref:m,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"forwards"});Oa(w)}}),d.jsx(Ml.Slot,{scope:t,children:d.jsx(Re.ol,{tabIndex:-1,...a,ref:S})}),T&&d.jsx(rl,{ref:p,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"backwards"});Oa(w)}})]})});Qd.displayName=Yd;var Xd="ToastFocusProxy",rl=b.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:i,...s}=n,a=No(Xd,t);return d.jsx(Oo,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:l=>{var m;const u=l.relatedTarget;!((m=a.viewport)!=null&&m.contains(u))&&i()}})});rl.displayName=Xd;var fs="Toast",Qg="toast.swipeStart",Xg="toast.swipeMove",ev="toast.swipeCancel",tv="toast.swipeEnd",eh=b.forwardRef((n,e)=>{const{forceMount:t,open:i,defaultOpen:s,onOpenChange:a,...l}=n,[u,f]=Ao({prop:i,defaultProp:s??!0,onChange:a,caller:fs});return d.jsx(jr,{present:t||u,children:d.jsx(iv,{open:u,...l,ref:e,onClose:()=>f(!1),onPause:Zt(n.onPause),onResume:Zt(n.onResume),onSwipeStart:Ee(n.onSwipeStart,m=>{m.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ee(n.onSwipeMove,m=>{const{x:p,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","move"),m.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:Ee(n.onSwipeCancel,m=>{m.currentTarget.setAttribute("data-swipe","cancel"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ee(n.onSwipeEnd,m=>{const{x:p,y:v}=m.detail.delta;m.currentTarget.setAttribute("data-swipe","end"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),m.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),m.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),m.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),f(!1)})})})});eh.displayName=fs;var[nv,rv]=Kd(fs,{onClose(){}}),iv=b.forwardRef((n,e)=>{const{__scopeToast:t,type:i="foreground",duration:s,open:a,onClose:l,onEscapeKeyDown:u,onPause:f,onResume:m,onSwipeStart:p,onSwipeMove:v,onSwipeCancel:S,onSwipeEnd:_,...T}=n,y=No(fs,t),[w,k]=b.useState(null),C=ot(e,F=>k(F)),P=b.useRef(null),j=b.useRef(null),N=s||y.duration,R=b.useRef(0),M=b.useRef(N),U=b.useRef(0),{onToastAdd:q,onToastRemove:Y}=y,G=Zt(()=>{var ye;(w==null?void 0:w.contains(document.activeElement))&&((ye=y.viewport)==null||ye.focus()),l()}),Z=b.useCallback(F=>{!F||F===1/0||(window.clearTimeout(U.current),R.current=new Date().getTime(),U.current=window.setTimeout(G,F))},[G]);b.useEffect(()=>{const F=y.viewport;if(F){const ye=()=>{Z(M.current),m==null||m()},K=()=>{const te=new Date().getTime()-R.current;M.current=M.current-te,window.clearTimeout(U.current),f==null||f()};return F.addEventListener(tl,K),F.addEventListener(nl,ye),()=>{F.removeEventListener(tl,K),F.removeEventListener(nl,ye)}}},[y.viewport,N,f,m,Z]),b.useEffect(()=>{a&&!y.isClosePausedRef.current&&Z(N)},[a,N,y.isClosePausedRef,Z]),b.useEffect(()=>(q(),()=>Y()),[q,Y]);const be=b.useMemo(()=>w?ah(w):null,[w]);return y.viewport?d.jsxs(d.Fragment,{children:[be&&d.jsx(sv,{__scopeToast:t,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:be}),d.jsx(nv,{scope:t,onClose:G,children:hs.createPortal(d.jsx(Ml.ItemSlot,{scope:t,children:d.jsx(Mg,{asChild:!0,onEscapeKeyDown:Ee(u,()=>{y.isFocusedToastEscapeKeyDownRef.current||G(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:d.jsx(Re.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":y.swipeDirection,...T,ref:C,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Ee(n.onKeyDown,F=>{F.key==="Escape"&&(u==null||u(F.nativeEvent),F.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,G()))}),onPointerDown:Ee(n.onPointerDown,F=>{F.button===0&&(P.current={x:F.clientX,y:F.clientY})}),onPointerMove:Ee(n.onPointerMove,F=>{if(!P.current)return;const ye=F.clientX-P.current.x,K=F.clientY-P.current.y,te=!!j.current,$=["left","right"].includes(y.swipeDirection),J=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,W=$?J(0,ye):0,de=$?0:J(0,K),oe=F.pointerType==="touch"?10:2,ae={x:W,y:de},ie={originalEvent:F,delta:ae};te?(j.current=ae,Hs(Xg,v,ie,{discrete:!1})):hu(ae,y.swipeDirection,oe)?(j.current=ae,Hs(Qg,p,ie,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(ye)>oe||Math.abs(K)>oe)&&(P.current=null)}),onPointerUp:Ee(n.onPointerUp,F=>{const ye=j.current,K=F.target;if(K.hasPointerCapture(F.pointerId)&&K.releasePointerCapture(F.pointerId),j.current=null,P.current=null,ye){const te=F.currentTarget,$={originalEvent:F,delta:ye};hu(ye,y.swipeDirection,y.swipeThreshold)?Hs(tv,_,$,{discrete:!0}):Hs(ev,S,$,{discrete:!0}),te.addEventListener("click",J=>J.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),sv=n=>{const{__scopeToast:e,children:t,...i}=n,s=No(fs,e),[a,l]=b.useState(!1),[u,f]=b.useState(!1);return lv(()=>l(!0)),b.useEffect(()=>{const m=window.setTimeout(()=>f(!0),1e3);return()=>window.clearTimeout(m)},[]),u?null:d.jsx(Ll,{asChild:!0,children:d.jsx(Oo,{...i,children:a&&d.jsxs(d.Fragment,{children:[s.label," ",t]})})})},ov="ToastTitle",th=b.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n;return d.jsx(Re.div,{...i,ref:e})});th.displayName=ov;var av="ToastDescription",nh=b.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n;return d.jsx(Re.div,{...i,ref:e})});nh.displayName=av;var rh="ToastAction",ih=b.forwardRef((n,e)=>{const{altText:t,...i}=n;return t.trim()?d.jsx(oh,{altText:t,asChild:!0,children:d.jsx(Dl,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${rh}\`. Expected non-empty \`string\`.`),null)});ih.displayName=rh;var sh="ToastClose",Dl=b.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n,s=rv(sh,t);return d.jsx(oh,{asChild:!0,children:d.jsx(Re.button,{type:"button",...i,ref:e,onClick:Ee(n.onClick,s.onClose)})})});Dl.displayName=sh;var oh=b.forwardRef((n,e)=>{const{__scopeToast:t,altText:i,...s}=n;return d.jsx(Re.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...s,ref:e})});function ah(n){const e=[];return Array.from(n.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),cv(i)){const s=i.ariaHidden||i.hidden||i.style.display==="none",a=i.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const l=i.dataset.radixToastAnnounceAlt;l&&e.push(l)}else e.push(...ah(i))}}),e}function Hs(n,e,t,{discrete:i}){const s=t.originalEvent.currentTarget,a=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),i?qd(s,a):s.dispatchEvent(a)}var hu=(n,e,t=0)=>{const i=Math.abs(n.x),s=Math.abs(n.y),a=i>s;return e==="left"||e==="right"?a&&i>t:!a&&s>t};function lv(n=()=>{}){const e=Zt(n);En(()=>{let t=0,i=0;return t=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(i)}},[e])}function cv(n){return n.nodeType===n.ELEMENT_NODE}function uv(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Oa(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var dv=Jd,lh=Qd,ch=eh,uh=th,dh=nh,hh=ih,fh=Dl;function mh(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=mh(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function ph(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=mh(n))&&(i&&(i+=" "),i+=e);return i}const fu=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,mu=ph,Ro=(n,e)=>t=>{var i;if((e==null?void 0:e.variants)==null)return mu(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:a}=e,l=Object.keys(s).map(m=>{const p=t==null?void 0:t[m],v=a==null?void 0:a[m];if(p===null)return null;const S=fu(p)||fu(v);return s[m][S]}),u=t&&Object.entries(t).reduce((m,p)=>{let[v,S]=p;return S===void 0||(m[v]=S),m},{}),f=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((m,p)=>{let{class:v,className:S,..._}=p;return Object.entries(_).every(T=>{let[y,w]=T;return Array.isArray(w)?w.includes({...a,...u}[y]):{...a,...u}[y]===w})?[...m,v,S]:m},[]);return mu(n,l,f,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gh=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=b.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:l,...u},f)=>b.createElement("svg",{ref:f,...fv,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:gh("lucide",s),...u},[...l.map(([m,p])=>b.createElement(m,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(n,e)=>{const t=b.forwardRef(({className:i,...s},a)=>b.createElement(mv,{ref:a,iconNode:e,className:gh(`lucide-${hv(n)}`,i),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=Le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=Le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=Le("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=Le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=Le("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=Le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Le("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=Le("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=Le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=Le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=Le("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=Le("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=Le("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=Le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=Le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=Le("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=Le("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=Le("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=Le("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=Le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=Le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=Le("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=Le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=Le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=Le("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=Le("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=Le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zl="-",Av=n=>{const e=Nv(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:l=>{const u=l.split(zl);return u[0]===""&&u.length!==1&&u.shift(),bh(u,e)||Ov(l)},getConflictingClassGroupIds:(l,u)=>{const f=t[l]||[];return u&&i[l]?[...f,...i[l]]:f}}},bh=(n,e)=>{var l;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),s=i?bh(n.slice(1),i):void 0;if(s)return s;if(e.validators.length===0)return;const a=n.join(zl);return(l=e.validators.find(({validator:u})=>u(a)))==null?void 0:l.classGroupId},pu=/^\[(.+)\]$/,Ov=n=>{if(pu.test(n)){const e=pu.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Nv=n=>{const{theme:e,prefix:t}=n,i={nextPart:new Map,validators:[]};return Lv(Object.entries(n.classGroups),t).forEach(([a,l])=>{sl(l,i,a,e)}),i},sl=(n,e,t,i)=>{n.forEach(s=>{if(typeof s=="string"){const a=s===""?e:gu(e,s);a.classGroupId=t;return}if(typeof s=="function"){if(Rv(s)){sl(s(i),e,t,i);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([a,l])=>{sl(l,gu(e,a),t,i)})})},gu=(n,e)=>{let t=n;return e.split(zl).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},Rv=n=>n.isThemeGetter,Lv=(n,e)=>e?n.map(([t,i])=>{const s=i.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([l,u])=>[e+l,u])):a);return[t,s]}):n,Iv=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const s=(a,l)=>{t.set(a,l),e++,e>n&&(e=0,i=t,t=new Map)};return{get(a){let l=t.get(a);if(l!==void 0)return l;if((l=i.get(a))!==void 0)return s(a,l),l},set(a,l){t.has(a)?t.set(a,l):s(a,l)}}},xh="!",Mv=n=>{const{separator:e,experimentalParseClassName:t}=n,i=e.length===1,s=e[0],a=e.length,l=u=>{const f=[];let m=0,p=0,v;for(let w=0;w<u.length;w++){let k=u[w];if(m===0){if(k===s&&(i||u.slice(w,w+a)===e)){f.push(u.slice(p,w)),p=w+a;continue}if(k==="/"){v=w;continue}}k==="["?m++:k==="]"&&m--}const S=f.length===0?u:u.substring(p),_=S.startsWith(xh),T=_?S.substring(1):S,y=v&&v>p?v-p:void 0;return{modifiers:f,hasImportantModifier:_,baseClassName:T,maybePostfixModifierPosition:y}};return t?u=>t({className:u,parseClassName:l}):l},Dv=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(i=>{i[0]==="["?(e.push(...t.sort(),i),t=[]):t.push(i)}),e.push(...t.sort()),e},$v=n=>({cache:Iv(n.cacheSize),parseClassName:Mv(n),...Av(n)}),Bv=/\s+/,zv=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:s}=e,a=[],l=n.trim().split(Bv);let u="";for(let f=l.length-1;f>=0;f-=1){const m=l[f],{modifiers:p,hasImportantModifier:v,baseClassName:S,maybePostfixModifierPosition:_}=t(m);let T=!!_,y=i(T?S.substring(0,_):S);if(!y){if(!T){u=m+(u.length>0?" "+u:u);continue}if(y=i(S),!y){u=m+(u.length>0?" "+u:u);continue}T=!1}const w=Dv(p).join(":"),k=v?w+xh:w,C=k+y;if(a.includes(C))continue;a.push(C);const P=s(y,T);for(let j=0;j<P.length;++j){const N=P[j];a.push(k+N)}u=m+(u.length>0?" "+u:u)}return u};function Fv(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Sh(e))&&(i&&(i+=" "),i+=t);return i}const Sh=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=Sh(n[i]))&&(t&&(t+=" "),t+=e);return t};function Uv(n,...e){let t,i,s,a=l;function l(f){const m=e.reduce((p,v)=>v(p),n());return t=$v(m),i=t.cache.get,s=t.cache.set,a=u,u(f)}function u(f){const m=i(f);if(m)return m;const p=zv(f,t);return s(f,p),p}return function(){return a(Fv.apply(null,arguments))}}const $e=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},kh=/^\[(?:([a-z-]+):)?(.+)\]$/i,Zv=/^\d+\/\d+$/,Wv=new Set(["px","full","screen"]),qv=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Hv=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Vv=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Gv=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Kv=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Sn=n=>ni(n)||Wv.has(n)||Zv.test(n),Dn=n=>xi(n,"length",r_),ni=n=>!!n&&!Number.isNaN(Number(n)),Na=n=>xi(n,"number",ni),Zi=n=>!!n&&Number.isInteger(Number(n)),Jv=n=>n.endsWith("%")&&ni(n.slice(0,-1)),_e=n=>kh.test(n),$n=n=>qv.test(n),Yv=new Set(["length","size","percentage"]),Qv=n=>xi(n,Yv,Th),Xv=n=>xi(n,"position",Th),e_=new Set(["image","url"]),t_=n=>xi(n,e_,s_),n_=n=>xi(n,"",i_),Wi=()=>!0,xi=(n,e,t)=>{const i=kh.exec(n);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):t(i[2]):!1},r_=n=>Hv.test(n)&&!Vv.test(n),Th=()=>!1,i_=n=>Gv.test(n),s_=n=>Kv.test(n),o_=()=>{const n=$e("colors"),e=$e("spacing"),t=$e("blur"),i=$e("brightness"),s=$e("borderColor"),a=$e("borderRadius"),l=$e("borderSpacing"),u=$e("borderWidth"),f=$e("contrast"),m=$e("grayscale"),p=$e("hueRotate"),v=$e("invert"),S=$e("gap"),_=$e("gradientColorStops"),T=$e("gradientColorStopPositions"),y=$e("inset"),w=$e("margin"),k=$e("opacity"),C=$e("padding"),P=$e("saturate"),j=$e("scale"),N=$e("sepia"),R=$e("skew"),M=$e("space"),U=$e("translate"),q=()=>["auto","contain","none"],Y=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto",_e,e],Z=()=>[_e,e],be=()=>["",Sn,Dn],F=()=>["auto",ni,_e],ye=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",_e],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],de=()=>[ni,_e];return{cacheSize:500,separator:":",theme:{colors:[Wi],spacing:[Sn,Dn],blur:["none","",$n,_e],brightness:de(),borderColor:[n],borderRadius:["none","","full",$n,_e],borderSpacing:Z(),borderWidth:be(),contrast:de(),grayscale:J(),hueRotate:de(),invert:J(),gap:Z(),gradientColorStops:[n],gradientColorStopPositions:[Jv,Dn],inset:G(),margin:G(),opacity:de(),padding:Z(),saturate:de(),scale:de(),sepia:J(),skew:de(),space:Z(),translate:Z()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[$n]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ye(),_e]}],overflow:[{overflow:Y()}],"overflow-x":[{"overflow-x":Y()}],"overflow-y":[{"overflow-y":Y()}],overscroll:[{overscroll:q()}],"overscroll-x":[{"overscroll-x":q()}],"overscroll-y":[{"overscroll-y":q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Zi,_e]}],basis:[{basis:G()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",Zi,_e]}],"grid-cols":[{"grid-cols":[Wi]}],"col-start-end":[{col:["auto",{span:["full",Zi,_e]},_e]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Wi]}],"row-start-end":[{row:["auto",{span:[Zi,_e]},_e]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[S]}],"gap-x":[{"gap-x":[S]}],"gap-y":[{"gap-y":[S]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_e,e]}],"min-w":[{"min-w":[_e,e,"min","max","fit"]}],"max-w":[{"max-w":[_e,e,"none","full","min","max","fit","prose",{screen:[$n]},$n]}],h:[{h:[_e,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_e,e,"auto","min","max","fit"]}],"font-size":[{text:["base",$n,Dn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Na]}],"font-family":[{font:[Wi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",ni,Na]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Sn,_e]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Sn,Dn]}],"underline-offset":[{"underline-offset":["auto",Sn,_e]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ye(),Xv]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Qv]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},t_]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:K()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Sn,_e]}],"outline-w":[{outline:[Sn,Dn]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[Sn,Dn]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",$n,n_]}],"shadow-color":[{shadow:[Wi]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[f]}],"drop-shadow":[{"drop-shadow":["","none",$n,_e]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[v]}],saturate:[{saturate:[P]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[f]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[P]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:de()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:de()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Zi,_e]}],"translate-x":[{"translate-x":[U]}],"translate-y":[{"translate-y":[U]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Z()}],"scroll-mx":[{"scroll-mx":Z()}],"scroll-my":[{"scroll-my":Z()}],"scroll-ms":[{"scroll-ms":Z()}],"scroll-me":[{"scroll-me":Z()}],"scroll-mt":[{"scroll-mt":Z()}],"scroll-mr":[{"scroll-mr":Z()}],"scroll-mb":[{"scroll-mb":Z()}],"scroll-ml":[{"scroll-ml":Z()}],"scroll-p":[{"scroll-p":Z()}],"scroll-px":[{"scroll-px":Z()}],"scroll-py":[{"scroll-py":Z()}],"scroll-ps":[{"scroll-ps":Z()}],"scroll-pe":[{"scroll-pe":Z()}],"scroll-pt":[{"scroll-pt":Z()}],"scroll-pr":[{"scroll-pr":Z()}],"scroll-pb":[{"scroll-pb":Z()}],"scroll-pl":[{"scroll-pl":Z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Sn,Dn,Na]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},a_=Uv(o_);function Fe(...n){return a_(ph(n))}const l_=dv,Ph=b.forwardRef(({className:n,...e},t)=>d.jsx(lh,{ref:t,className:Fe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));Ph.displayName=lh.displayName;const c_=Ro("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Eh=b.forwardRef(({className:n,variant:e,...t},i)=>d.jsx(ch,{ref:i,className:Fe(c_({variant:e}),n),...t}));Eh.displayName=ch.displayName;const u_=b.forwardRef(({className:n,...e},t)=>d.jsx(hh,{ref:t,className:Fe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",n),...e}));u_.displayName=hh.displayName;const Ch=b.forwardRef(({className:n,...e},t)=>d.jsx(fh,{ref:t,className:Fe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:d.jsx(wh,{className:"h-4 w-4"})}));Ch.displayName=fh.displayName;const jh=b.forwardRef(({className:n,...e},t)=>d.jsx(uh,{ref:t,className:Fe("text-sm font-semibold",n),...e}));jh.displayName=uh.displayName;const Ah=b.forwardRef(({className:n,...e},t)=>d.jsx(dh,{ref:t,className:Fe("text-sm opacity-90",n),...e}));Ah.displayName=dh.displayName;function d_(){const{toasts:n}=Rl();return d.jsxs(l_,{children:[n.map(function({id:e,title:t,description:i,action:s,...a}){return d.jsxs(Eh,{...a,children:[d.jsxs("div",{className:"grid gap-1",children:[t&&d.jsx(jh,{children:t}),i&&d.jsx(Ah,{children:i})]}),s,d.jsx(Ch,{})]},e)}),d.jsx(Ph,{})]})}var vu=["light","dark"],h_="(prefers-color-scheme: dark)",f_=b.createContext(void 0),m_={setTheme:n=>{},themes:[]},p_=()=>{var n;return(n=b.useContext(f_))!=null?n:m_};b.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:i,enableColorScheme:s,defaultTheme:a,value:l,attrs:u,nonce:f})=>{let m=a==="system",p=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${u.map(T=>`'${T}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,v=s?vu.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",S=(T,y=!1,w=!0)=>{let k=l?l[T]:T,C=y?T+"|| ''":`'${k}'`,P="";return s&&w&&!y&&vu.includes(T)&&(P+=`d.style.colorScheme = '${T}';`),t==="class"?y||k?P+=`c.add(${C})`:P+="null":k&&(P+=`d[s](n,${C})`),P},_=n?`!function(){${p}${S(n)}}()`:i?`!function(){try{${p}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${m})){var t='${h_}',m=window.matchMedia(t);if(m.media!==t||m.matches){${S("dark")}}else{${S("light")}}}else if(e){${l?`var x=${JSON.stringify(l)};`:""}${S(l?"x[e]":"e",!0)}}${m?"":"else{"+S(a,!1,!1)+"}"}${v}}catch(e){}}()`:`!function(){try{${p}var e=localStorage.getItem('${e}');if(e){${l?`var x=${JSON.stringify(l)};`:""}${S(l?"x[e]":"e",!0)}}else{${S(a,!1,!1)};}${v}}catch(t){}}();`;return b.createElement("script",{nonce:f,dangerouslySetInnerHTML:{__html:_}})});var g_=n=>{switch(n){case"success":return y_;case"info":return b_;case"warning":return w_;case"error":return x_;default:return null}},v_=Array(12).fill(0),__=({visible:n,className:e})=>z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},z.createElement("div",{className:"sonner-spinner"},v_.map((t,i)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),y_=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),w_=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),b_=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),x_=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),S_=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),k_=()=>{let[n,e]=z.useState(document.hidden);return z.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},ol=1,T_=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...i}=n,s=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:ol++,a=this.toasts.find(u=>u.id===s),l=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(u=>u.id===s?(this.publish({...u,...n,id:s,title:t}),{...u,...n,id:s,dismissible:l,title:t}):u):this.addToast({title:t,...i,dismissible:l,id:s}),s},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let i=n instanceof Promise?n:n(),s=t!==void 0,a,l=i.then(async f=>{if(a=["resolve",f],z.isValidElement(f))s=!1,this.create({id:t,type:"default",message:f});else if(E_(f)&&!f.ok){s=!1;let m=typeof e.error=="function"?await e.error(`HTTP error! status: ${f.status}`):e.error,p=typeof e.description=="function"?await e.description(`HTTP error! status: ${f.status}`):e.description;this.create({id:t,type:"error",message:m,description:p})}else if(e.success!==void 0){s=!1;let m=typeof e.success=="function"?await e.success(f):e.success,p=typeof e.description=="function"?await e.description(f):e.description;this.create({id:t,type:"success",message:m,description:p})}}).catch(async f=>{if(a=["reject",f],e.error!==void 0){s=!1;let m=typeof e.error=="function"?await e.error(f):e.error,p=typeof e.description=="function"?await e.description(f):e.description;this.create({id:t,type:"error",message:m,description:p})}}).finally(()=>{var f;s&&(this.dismiss(t),t=void 0),(f=e.finally)==null||f.call(e)}),u=()=>new Promise((f,m)=>l.then(()=>a[0]==="reject"?m(a[1]):f(a[1])).catch(m));return typeof t!="string"&&typeof t!="number"?{unwrap:u}:Object.assign(t,{unwrap:u})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||ol++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},pt=new T_,P_=(n,e)=>{let t=(e==null?void 0:e.id)||ol++;return pt.addToast({title:n,...e,id:t}),t},E_=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",C_=P_,j_=()=>pt.toasts,A_=()=>pt.getActiveToasts(),ze=Object.assign(C_,{success:pt.success,info:pt.info,warning:pt.warning,error:pt.error,custom:pt.custom,message:pt.message,promise:pt.promise,dismiss:pt.dismiss,loading:pt.loading},{getHistory:j_,getToasts:A_});function O_(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}O_(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Vs(n){return n.label!==void 0}var N_=3,R_="32px",L_="16px",_u=4e3,I_=356,M_=14,D_=20,$_=200;function Dt(...n){return n.filter(Boolean).join(" ")}function B_(n){let[e,t]=n.split("-"),i=[];return e&&i.push(e),t&&i.push(t),i}var z_=n=>{var e,t,i,s,a,l,u,f,m,p,v;let{invert:S,toast:_,unstyled:T,interacting:y,setHeights:w,visibleToasts:k,heights:C,index:P,toasts:j,expanded:N,removeToast:R,defaultRichColors:M,closeButton:U,style:q,cancelButtonStyle:Y,actionButtonStyle:G,className:Z="",descriptionClassName:be="",duration:F,position:ye,gap:K,loadingIcon:te,expandByDefault:$,classNames:J,icons:W,closeButtonAriaLabel:de="Close toast",pauseWhenPageIsHidden:oe}=n,[ae,ie]=z.useState(null),[le,pe]=z.useState(null),[Te,at]=z.useState(!1),[Rt,Lt]=z.useState(!1),[Tt,Pt]=z.useState(!1),[Et,Or]=z.useState(!1),[Nr,rr]=z.useState(!1),[ir,Gt]=z.useState(0),[Rn,Ei]=z.useState(0),gn=z.useRef(_.duration||F||_u),Ci=z.useRef(null),Kt=z.useRef(null),Yo=P===0,Qo=P+1<=k,tt=_.type,vn=_.dismissible!==!1,bs=_.className||"",Xo=_.descriptionClassName||"",sr=z.useMemo(()=>C.findIndex(ce=>ce.toastId===_.id)||0,[C,_.id]),xs=z.useMemo(()=>{var ce;return(ce=_.closeButton)!=null?ce:U},[_.closeButton,U]),Ss=z.useMemo(()=>_.duration||F||_u,[_.duration,F]),Rr=z.useRef(0),Jt=z.useRef(0),ji=z.useRef(0),Ln=z.useRef(null),[or,ea]=ye.split("-"),ks=z.useMemo(()=>C.reduce((ce,Ne,Ie)=>Ie>=sr?ce:ce+Ne.height,0),[C,sr]),Ai=k_(),Ts=_.invert||S,Lr=tt==="loading";Jt.current=z.useMemo(()=>sr*K+ks,[sr,ks]),z.useEffect(()=>{gn.current=Ss},[Ss]),z.useEffect(()=>{at(!0)},[]),z.useEffect(()=>{let ce=Kt.current;if(ce){let Ne=ce.getBoundingClientRect().height;return Ei(Ne),w(Ie=>[{toastId:_.id,height:Ne,position:_.position},...Ie]),()=>w(Ie=>Ie.filter(_t=>_t.toastId!==_.id))}},[w,_.id]),z.useLayoutEffect(()=>{if(!Te)return;let ce=Kt.current,Ne=ce.style.height;ce.style.height="auto";let Ie=ce.getBoundingClientRect().height;ce.style.height=Ne,Ei(Ie),w(_t=>_t.find(lt=>lt.toastId===_.id)?_t.map(lt=>lt.toastId===_.id?{...lt,height:Ie}:lt):[{toastId:_.id,height:Ie,position:_.position},..._t])},[Te,_.title,_.description,w,_.id]);let Yt=z.useCallback(()=>{Lt(!0),Gt(Jt.current),w(ce=>ce.filter(Ne=>Ne.toastId!==_.id)),setTimeout(()=>{R(_)},$_)},[_,R,w,Jt]);z.useEffect(()=>{if(_.promise&&tt==="loading"||_.duration===1/0||_.type==="loading")return;let ce;return N||y||oe&&Ai?(()=>{if(ji.current<Rr.current){let Ne=new Date().getTime()-Rr.current;gn.current=gn.current-Ne}ji.current=new Date().getTime()})():gn.current!==1/0&&(Rr.current=new Date().getTime(),ce=setTimeout(()=>{var Ne;(Ne=_.onAutoClose)==null||Ne.call(_,_),Yt()},gn.current)),()=>clearTimeout(ce)},[N,y,_,tt,oe,Ai,Yt]),z.useEffect(()=>{_.delete&&Yt()},[Yt,_.delete]);function ta(){var ce,Ne,Ie;return W!=null&&W.loading?z.createElement("div",{className:Dt(J==null?void 0:J.loader,(ce=_==null?void 0:_.classNames)==null?void 0:ce.loader,"sonner-loader"),"data-visible":tt==="loading"},W.loading):te?z.createElement("div",{className:Dt(J==null?void 0:J.loader,(Ne=_==null?void 0:_.classNames)==null?void 0:Ne.loader,"sonner-loader"),"data-visible":tt==="loading"},te):z.createElement(__,{className:Dt(J==null?void 0:J.loader,(Ie=_==null?void 0:_.classNames)==null?void 0:Ie.loader),visible:tt==="loading"})}return z.createElement("li",{tabIndex:0,ref:Kt,className:Dt(Z,bs,J==null?void 0:J.toast,(e=_==null?void 0:_.classNames)==null?void 0:e.toast,J==null?void 0:J.default,J==null?void 0:J[tt],(t=_==null?void 0:_.classNames)==null?void 0:t[tt]),"data-sonner-toast":"","data-rich-colors":(i=_.richColors)!=null?i:M,"data-styled":!(_.jsx||_.unstyled||T),"data-mounted":Te,"data-promise":!!_.promise,"data-swiped":Nr,"data-removed":Rt,"data-visible":Qo,"data-y-position":or,"data-x-position":ea,"data-index":P,"data-front":Yo,"data-swiping":Tt,"data-dismissible":vn,"data-type":tt,"data-invert":Ts,"data-swipe-out":Et,"data-swipe-direction":le,"data-expanded":!!(N||$&&Te),style:{"--index":P,"--toasts-before":P,"--z-index":j.length-P,"--offset":`${Rt?ir:Jt.current}px`,"--initial-height":$?"auto":`${Rn}px`,...q,..._.style},onDragEnd:()=>{Pt(!1),ie(null),Ln.current=null},onPointerDown:ce=>{Lr||!vn||(Ci.current=new Date,Gt(Jt.current),ce.target.setPointerCapture(ce.pointerId),ce.target.tagName!=="BUTTON"&&(Pt(!0),Ln.current={x:ce.clientX,y:ce.clientY}))},onPointerUp:()=>{var ce,Ne,Ie,_t;if(Et||!vn)return;Ln.current=null;let lt=Number(((ce=Kt.current)==null?void 0:ce.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Qt=Number(((Ne=Kt.current)==null?void 0:Ne.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),_n=new Date().getTime()-((Ie=Ci.current)==null?void 0:Ie.getTime()),yt=ae==="x"?lt:Qt,Xt=Math.abs(yt)/_n;if(Math.abs(yt)>=D_||Xt>.11){Gt(Jt.current),(_t=_.onDismiss)==null||_t.call(_,_),pe(ae==="x"?lt>0?"right":"left":Qt>0?"down":"up"),Yt(),Or(!0),rr(!1);return}Pt(!1),ie(null)},onPointerMove:ce=>{var Ne,Ie,_t,lt;if(!Ln.current||!vn||((Ne=window.getSelection())==null?void 0:Ne.toString().length)>0)return;let Qt=ce.clientY-Ln.current.y,_n=ce.clientX-Ln.current.x,yt=(Ie=n.swipeDirections)!=null?Ie:B_(ye);!ae&&(Math.abs(_n)>1||Math.abs(Qt)>1)&&ie(Math.abs(_n)>Math.abs(Qt)?"x":"y");let Xt={x:0,y:0};ae==="y"?(yt.includes("top")||yt.includes("bottom"))&&(yt.includes("top")&&Qt<0||yt.includes("bottom")&&Qt>0)&&(Xt.y=Qt):ae==="x"&&(yt.includes("left")||yt.includes("right"))&&(yt.includes("left")&&_n<0||yt.includes("right")&&_n>0)&&(Xt.x=_n),(Math.abs(Xt.x)>0||Math.abs(Xt.y)>0)&&rr(!0),(_t=Kt.current)==null||_t.style.setProperty("--swipe-amount-x",`${Xt.x}px`),(lt=Kt.current)==null||lt.style.setProperty("--swipe-amount-y",`${Xt.y}px`)}},xs&&!_.jsx?z.createElement("button",{"aria-label":de,"data-disabled":Lr,"data-close-button":!0,onClick:Lr||!vn?()=>{}:()=>{var ce;Yt(),(ce=_.onDismiss)==null||ce.call(_,_)},className:Dt(J==null?void 0:J.closeButton,(s=_==null?void 0:_.classNames)==null?void 0:s.closeButton)},(a=W==null?void 0:W.close)!=null?a:S_):null,_.jsx||b.isValidElement(_.title)?_.jsx?_.jsx:typeof _.title=="function"?_.title():_.title:z.createElement(z.Fragment,null,tt||_.icon||_.promise?z.createElement("div",{"data-icon":"",className:Dt(J==null?void 0:J.icon,(l=_==null?void 0:_.classNames)==null?void 0:l.icon)},_.promise||_.type==="loading"&&!_.icon?_.icon||ta():null,_.type!=="loading"?_.icon||(W==null?void 0:W[tt])||g_(tt):null):null,z.createElement("div",{"data-content":"",className:Dt(J==null?void 0:J.content,(u=_==null?void 0:_.classNames)==null?void 0:u.content)},z.createElement("div",{"data-title":"",className:Dt(J==null?void 0:J.title,(f=_==null?void 0:_.classNames)==null?void 0:f.title)},typeof _.title=="function"?_.title():_.title),_.description?z.createElement("div",{"data-description":"",className:Dt(be,Xo,J==null?void 0:J.description,(m=_==null?void 0:_.classNames)==null?void 0:m.description)},typeof _.description=="function"?_.description():_.description):null),b.isValidElement(_.cancel)?_.cancel:_.cancel&&Vs(_.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:_.cancelButtonStyle||Y,onClick:ce=>{var Ne,Ie;Vs(_.cancel)&&vn&&((Ie=(Ne=_.cancel).onClick)==null||Ie.call(Ne,ce),Yt())},className:Dt(J==null?void 0:J.cancelButton,(p=_==null?void 0:_.classNames)==null?void 0:p.cancelButton)},_.cancel.label):null,b.isValidElement(_.action)?_.action:_.action&&Vs(_.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:_.actionButtonStyle||G,onClick:ce=>{var Ne,Ie;Vs(_.action)&&((Ie=(Ne=_.action).onClick)==null||Ie.call(Ne,ce),!ce.defaultPrevented&&Yt())},className:Dt(J==null?void 0:J.actionButton,(v=_==null?void 0:_.classNames)==null?void 0:v.actionButton)},_.action.label):null))};function yu(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function F_(n,e){let t={};return[n,e].forEach((i,s)=>{let a=s===1,l=a?"--mobile-offset":"--offset",u=a?L_:R_;function f(m){["top","right","bottom","left"].forEach(p=>{t[`${l}-${p}`]=typeof m=="number"?`${m}px`:m})}typeof i=="number"||typeof i=="string"?f(i):typeof i=="object"?["top","right","bottom","left"].forEach(m=>{i[m]===void 0?t[`${l}-${m}`]=u:t[`${l}-${m}`]=typeof i[m]=="number"?`${i[m]}px`:i[m]}):f(u)}),t}var U_=b.forwardRef(function(n,e){let{invert:t,position:i="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:l,className:u,offset:f,mobileOffset:m,theme:p="light",richColors:v,duration:S,style:_,visibleToasts:T=N_,toastOptions:y,dir:w=yu(),gap:k=M_,loadingIcon:C,icons:P,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:N}=n,[R,M]=z.useState([]),U=z.useMemo(()=>Array.from(new Set([i].concat(R.filter(oe=>oe.position).map(oe=>oe.position)))),[R,i]),[q,Y]=z.useState([]),[G,Z]=z.useState(!1),[be,F]=z.useState(!1),[ye,K]=z.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),te=z.useRef(null),$=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),J=z.useRef(null),W=z.useRef(!1),de=z.useCallback(oe=>{M(ae=>{var ie;return(ie=ae.find(le=>le.id===oe.id))!=null&&ie.delete||pt.dismiss(oe.id),ae.filter(({id:le})=>le!==oe.id)})},[]);return z.useEffect(()=>pt.subscribe(oe=>{if(oe.dismiss){M(ae=>ae.map(ie=>ie.id===oe.id?{...ie,delete:!0}:ie));return}setTimeout(()=>{Dd.flushSync(()=>{M(ae=>{let ie=ae.findIndex(le=>le.id===oe.id);return ie!==-1?[...ae.slice(0,ie),{...ae[ie],...oe},...ae.slice(ie+1)]:[oe,...ae]})})})}),[]),z.useEffect(()=>{if(p!=="system"){K(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?K("dark"):K("light")),typeof window>"u")return;let oe=window.matchMedia("(prefers-color-scheme: dark)");try{oe.addEventListener("change",({matches:ae})=>{K(ae?"dark":"light")})}catch{oe.addListener(({matches:ie})=>{try{K(ie?"dark":"light")}catch(le){console.error(le)}})}},[p]),z.useEffect(()=>{R.length<=1&&Z(!1)},[R]),z.useEffect(()=>{let oe=ae=>{var ie,le;s.every(pe=>ae[pe]||ae.code===pe)&&(Z(!0),(ie=te.current)==null||ie.focus()),ae.code==="Escape"&&(document.activeElement===te.current||(le=te.current)!=null&&le.contains(document.activeElement))&&Z(!1)};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[s]),z.useEffect(()=>{if(te.current)return()=>{J.current&&(J.current.focus({preventScroll:!0}),J.current=null,W.current=!1)}},[te.current]),z.createElement("section",{ref:e,"aria-label":`${j} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},U.map((oe,ae)=>{var ie;let[le,pe]=oe.split("-");return R.length?z.createElement("ol",{key:oe,dir:w==="auto"?yu():w,tabIndex:-1,ref:te,className:u,"data-sonner-toaster":!0,"data-theme":ye,"data-y-position":le,"data-lifted":G&&R.length>1&&!a,"data-x-position":pe,style:{"--front-toast-height":`${((ie=q[0])==null?void 0:ie.height)||0}px`,"--width":`${I_}px`,"--gap":`${k}px`,..._,...F_(f,m)},onBlur:Te=>{W.current&&!Te.currentTarget.contains(Te.relatedTarget)&&(W.current=!1,J.current&&(J.current.focus({preventScroll:!0}),J.current=null))},onFocus:Te=>{Te.target instanceof HTMLElement&&Te.target.dataset.dismissible==="false"||W.current||(W.current=!0,J.current=Te.relatedTarget)},onMouseEnter:()=>Z(!0),onMouseMove:()=>Z(!0),onMouseLeave:()=>{be||Z(!1)},onDragEnd:()=>Z(!1),onPointerDown:Te=>{Te.target instanceof HTMLElement&&Te.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},R.filter(Te=>!Te.position&&ae===0||Te.position===oe).map((Te,at)=>{var Rt,Lt;return z.createElement(z_,{key:Te.id,icons:P,index:at,toast:Te,defaultRichColors:v,duration:(Rt=y==null?void 0:y.duration)!=null?Rt:S,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:t,visibleToasts:T,closeButton:(Lt=y==null?void 0:y.closeButton)!=null?Lt:l,interacting:be,position:oe,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:de,toasts:R.filter(Tt=>Tt.position==Te.position),heights:q.filter(Tt=>Tt.position==Te.position),setHeights:Y,expandByDefault:a,gap:k,loadingIcon:C,expanded:G,pauseWhenPageIsHidden:N,swipeDirections:n.swipeDirections})})):null}))});const Z_=({...n})=>{const{theme:e="system"}=p_();return d.jsx(U_,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var W_=$d[" useId ".trim().toString()]||(()=>{}),q_=0;function Ki(n){const[e,t]=b.useState(W_());return En(()=>{n||t(i=>i??String(q_++))},[n]),n||(e?`radix-${e}`:"")}const H_=["top","right","bottom","left"],Qn=Math.min,bt=Math.max,ho=Math.round,Gs=Math.floor,dn=n=>({x:n,y:n}),V_={left:"right",right:"left",bottom:"top",top:"bottom"},G_={start:"end",end:"start"};function al(n,e,t){return bt(n,Qn(e,t))}function jn(n,e){return typeof n=="function"?n(e):n}function An(n){return n.split("-")[0]}function Si(n){return n.split("-")[1]}function Fl(n){return n==="x"?"y":"x"}function Ul(n){return n==="y"?"height":"width"}const K_=new Set(["top","bottom"]);function un(n){return K_.has(An(n))?"y":"x"}function Zl(n){return Fl(un(n))}function J_(n,e,t){t===void 0&&(t=!1);const i=Si(n),s=Zl(n),a=Ul(s);let l=s==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=fo(l)),[l,fo(l)]}function Y_(n){const e=fo(n);return[ll(n),e,ll(e)]}function ll(n){return n.replace(/start|end/g,e=>G_[e])}const wu=["left","right"],bu=["right","left"],Q_=["top","bottom"],X_=["bottom","top"];function ey(n,e,t){switch(n){case"top":case"bottom":return t?e?bu:wu:e?wu:bu;case"left":case"right":return e?Q_:X_;default:return[]}}function ty(n,e,t,i){const s=Si(n);let a=ey(An(n),t==="start",i);return s&&(a=a.map(l=>l+"-"+s),e&&(a=a.concat(a.map(ll)))),a}function fo(n){return n.replace(/left|right|bottom|top/g,e=>V_[e])}function ny(n){return{top:0,right:0,bottom:0,left:0,...n}}function Oh(n){return typeof n!="number"?ny(n):{top:n,right:n,bottom:n,left:n}}function mo(n){const{x:e,y:t,width:i,height:s}=n;return{width:i,height:s,top:t,left:e,right:e+i,bottom:t+s,x:e,y:t}}function xu(n,e,t){let{reference:i,floating:s}=n;const a=un(e),l=Zl(e),u=Ul(l),f=An(e),m=a==="y",p=i.x+i.width/2-s.width/2,v=i.y+i.height/2-s.height/2,S=i[u]/2-s[u]/2;let _;switch(f){case"top":_={x:p,y:i.y-s.height};break;case"bottom":_={x:p,y:i.y+i.height};break;case"right":_={x:i.x+i.width,y:v};break;case"left":_={x:i.x-s.width,y:v};break;default:_={x:i.x,y:i.y}}switch(Si(e)){case"start":_[l]-=S*(t&&m?-1:1);break;case"end":_[l]+=S*(t&&m?-1:1);break}return _}const ry=async(n,e,t)=>{const{placement:i="bottom",strategy:s="absolute",middleware:a=[],platform:l}=t,u=a.filter(Boolean),f=await(l.isRTL==null?void 0:l.isRTL(e));let m=await l.getElementRects({reference:n,floating:e,strategy:s}),{x:p,y:v}=xu(m,i,f),S=i,_={},T=0;for(let y=0;y<u.length;y++){const{name:w,fn:k}=u[y],{x:C,y:P,data:j,reset:N}=await k({x:p,y:v,initialPlacement:i,placement:S,strategy:s,middlewareData:_,rects:m,platform:l,elements:{reference:n,floating:e}});p=C??p,v=P??v,_={..._,[w]:{..._[w],...j}},N&&T<=50&&(T++,typeof N=="object"&&(N.placement&&(S=N.placement),N.rects&&(m=N.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:s}):N.rects),{x:p,y:v}=xu(m,S,f)),y=-1)}return{x:p,y:v,placement:S,strategy:s,middlewareData:_}};async function es(n,e){var t;e===void 0&&(e={});const{x:i,y:s,platform:a,rects:l,elements:u,strategy:f}=n,{boundary:m="clippingAncestors",rootBoundary:p="viewport",elementContext:v="floating",altBoundary:S=!1,padding:_=0}=jn(e,n),T=Oh(_),w=u[S?v==="floating"?"reference":"floating":v],k=mo(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(w)))==null||t?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:m,rootBoundary:p,strategy:f})),C=v==="floating"?{x:i,y:s,width:l.floating.width,height:l.floating.height}:l.reference,P=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),j=await(a.isElement==null?void 0:a.isElement(P))?await(a.getScale==null?void 0:a.getScale(P))||{x:1,y:1}:{x:1,y:1},N=mo(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:C,offsetParent:P,strategy:f}):C);return{top:(k.top-N.top+T.top)/j.y,bottom:(N.bottom-k.bottom+T.bottom)/j.y,left:(k.left-N.left+T.left)/j.x,right:(N.right-k.right+T.right)/j.x}}const iy=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:s,rects:a,platform:l,elements:u,middlewareData:f}=e,{element:m,padding:p=0}=jn(n,e)||{};if(m==null)return{};const v=Oh(p),S={x:t,y:i},_=Zl(s),T=Ul(_),y=await l.getDimensions(m),w=_==="y",k=w?"top":"left",C=w?"bottom":"right",P=w?"clientHeight":"clientWidth",j=a.reference[T]+a.reference[_]-S[_]-a.floating[T],N=S[_]-a.reference[_],R=await(l.getOffsetParent==null?void 0:l.getOffsetParent(m));let M=R?R[P]:0;(!M||!await(l.isElement==null?void 0:l.isElement(R)))&&(M=u.floating[P]||a.floating[T]);const U=j/2-N/2,q=M/2-y[T]/2-1,Y=Qn(v[k],q),G=Qn(v[C],q),Z=Y,be=M-y[T]-G,F=M/2-y[T]/2+U,ye=al(Z,F,be),K=!f.arrow&&Si(s)!=null&&F!==ye&&a.reference[T]/2-(F<Z?Y:G)-y[T]/2<0,te=K?F<Z?F-Z:F-be:0;return{[_]:S[_]+te,data:{[_]:ye,centerOffset:F-ye-te,...K&&{alignmentOffset:te}},reset:K}}}),sy=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:s,middlewareData:a,rects:l,initialPlacement:u,platform:f,elements:m}=e,{mainAxis:p=!0,crossAxis:v=!0,fallbackPlacements:S,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:y=!0,...w}=jn(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const k=An(s),C=un(u),P=An(u)===u,j=await(f.isRTL==null?void 0:f.isRTL(m.floating)),N=S||(P||!y?[fo(u)]:Y_(u)),R=T!=="none";!S&&R&&N.push(...ty(u,y,T,j));const M=[u,...N],U=await es(e,w),q=[];let Y=((i=a.flip)==null?void 0:i.overflows)||[];if(p&&q.push(U[k]),v){const F=J_(s,l,j);q.push(U[F[0]],U[F[1]])}if(Y=[...Y,{placement:s,overflows:q}],!q.every(F=>F<=0)){var G,Z;const F=(((G=a.flip)==null?void 0:G.index)||0)+1,ye=M[F];if(ye&&(!(v==="alignment"?C!==un(ye):!1)||Y.every($=>$.overflows[0]>0&&un($.placement)===C)))return{data:{index:F,overflows:Y},reset:{placement:ye}};let K=(Z=Y.filter(te=>te.overflows[0]<=0).sort((te,$)=>te.overflows[1]-$.overflows[1])[0])==null?void 0:Z.placement;if(!K)switch(_){case"bestFit":{var be;const te=(be=Y.filter($=>{if(R){const J=un($.placement);return J===C||J==="y"}return!0}).map($=>[$.placement,$.overflows.filter(J=>J>0).reduce((J,W)=>J+W,0)]).sort(($,J)=>$[1]-J[1])[0])==null?void 0:be[0];te&&(K=te);break}case"initialPlacement":K=u;break}if(s!==K)return{reset:{placement:K}}}return{}}}};function Su(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function ku(n){return H_.some(e=>n[e]>=0)}const oy=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...s}=jn(n,e);switch(i){case"referenceHidden":{const a=await es(e,{...s,elementContext:"reference"}),l=Su(a,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:ku(l)}}}case"escaped":{const a=await es(e,{...s,altBoundary:!0}),l=Su(a,t.floating);return{data:{escapedOffsets:l,escaped:ku(l)}}}default:return{}}}}},Nh=new Set(["left","top"]);async function ay(n,e){const{placement:t,platform:i,elements:s}=n,a=await(i.isRTL==null?void 0:i.isRTL(s.floating)),l=An(t),u=Si(t),f=un(t)==="y",m=Nh.has(l)?-1:1,p=a&&f?-1:1,v=jn(e,n);let{mainAxis:S,crossAxis:_,alignmentAxis:T}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return u&&typeof T=="number"&&(_=u==="end"?T*-1:T),f?{x:_*p,y:S*m}:{x:S*m,y:_*p}}const ly=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:s,y:a,placement:l,middlewareData:u}=e,f=await ay(e,n);return l===((t=u.offset)==null?void 0:t.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:s+f.x,y:a+f.y,data:{...f,placement:l}}}}},cy=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:s}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:u={fn:w=>{let{x:k,y:C}=w;return{x:k,y:C}}},...f}=jn(n,e),m={x:t,y:i},p=await es(e,f),v=un(An(s)),S=Fl(v);let _=m[S],T=m[v];if(a){const w=S==="y"?"top":"left",k=S==="y"?"bottom":"right",C=_+p[w],P=_-p[k];_=al(C,_,P)}if(l){const w=v==="y"?"top":"left",k=v==="y"?"bottom":"right",C=T+p[w],P=T-p[k];T=al(C,T,P)}const y=u.fn({...e,[S]:_,[v]:T});return{...y,data:{x:y.x-t,y:y.y-i,enabled:{[S]:a,[v]:l}}}}}},uy=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:s,rects:a,middlewareData:l}=e,{offset:u=0,mainAxis:f=!0,crossAxis:m=!0}=jn(n,e),p={x:t,y:i},v=un(s),S=Fl(v);let _=p[S],T=p[v];const y=jn(u,e),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(f){const P=S==="y"?"height":"width",j=a.reference[S]-a.floating[P]+w.mainAxis,N=a.reference[S]+a.reference[P]-w.mainAxis;_<j?_=j:_>N&&(_=N)}if(m){var k,C;const P=S==="y"?"width":"height",j=Nh.has(An(s)),N=a.reference[v]-a.floating[P]+(j&&((k=l.offset)==null?void 0:k[v])||0)+(j?0:w.crossAxis),R=a.reference[v]+a.reference[P]+(j?0:((C=l.offset)==null?void 0:C[v])||0)-(j?w.crossAxis:0);T<N?T=N:T>R&&(T=R)}return{[S]:_,[v]:T}}}},dy=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:s,rects:a,platform:l,elements:u}=e,{apply:f=()=>{},...m}=jn(n,e),p=await es(e,m),v=An(s),S=Si(s),_=un(s)==="y",{width:T,height:y}=a.floating;let w,k;v==="top"||v==="bottom"?(w=v,k=S===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(k=v,w=S==="end"?"top":"bottom");const C=y-p.top-p.bottom,P=T-p.left-p.right,j=Qn(y-p[w],C),N=Qn(T-p[k],P),R=!e.middlewareData.shift;let M=j,U=N;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(U=P),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(M=C),R&&!S){const Y=bt(p.left,0),G=bt(p.right,0),Z=bt(p.top,0),be=bt(p.bottom,0);_?U=T-2*(Y!==0||G!==0?Y+G:bt(p.left,p.right)):M=y-2*(Z!==0||be!==0?Z+be:bt(p.top,p.bottom))}await f({...e,availableWidth:U,availableHeight:M});const q=await l.getDimensions(u.floating);return T!==q.width||y!==q.height?{reset:{rects:!0}}:{}}}};function Io(){return typeof window<"u"}function ki(n){return Rh(n)?(n.nodeName||"").toLowerCase():"#document"}function xt(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function pn(n){var e;return(e=(Rh(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Rh(n){return Io()?n instanceof Node||n instanceof xt(n).Node:!1}function Wt(n){return Io()?n instanceof Element||n instanceof xt(n).Element:!1}function fn(n){return Io()?n instanceof HTMLElement||n instanceof xt(n).HTMLElement:!1}function Tu(n){return!Io()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof xt(n).ShadowRoot}const hy=new Set(["inline","contents"]);function ms(n){const{overflow:e,overflowX:t,overflowY:i,display:s}=qt(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!hy.has(s)}const fy=new Set(["table","td","th"]);function my(n){return fy.has(ki(n))}const py=[":popover-open",":modal"];function Mo(n){return py.some(e=>{try{return n.matches(e)}catch{return!1}})}const gy=["transform","translate","scale","rotate","perspective"],vy=["transform","translate","scale","rotate","perspective","filter"],_y=["paint","layout","strict","content"];function Wl(n){const e=ql(),t=Wt(n)?qt(n):n;return gy.some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||vy.some(i=>(t.willChange||"").includes(i))||_y.some(i=>(t.contain||"").includes(i))}function yy(n){let e=Xn(n);for(;fn(e)&&!mi(e);){if(Wl(e))return e;if(Mo(e))return null;e=Xn(e)}return null}function ql(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const wy=new Set(["html","body","#document"]);function mi(n){return wy.has(ki(n))}function qt(n){return xt(n).getComputedStyle(n)}function Do(n){return Wt(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Xn(n){if(ki(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Tu(n)&&n.host||pn(n);return Tu(e)?e.host:e}function Lh(n){const e=Xn(n);return mi(e)?n.ownerDocument?n.ownerDocument.body:n.body:fn(e)&&ms(e)?e:Lh(e)}function ts(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=Lh(n),a=s===((i=n.ownerDocument)==null?void 0:i.body),l=xt(s);if(a){const u=cl(l);return e.concat(l,l.visualViewport||[],ms(s)?s:[],u&&t?ts(u):[])}return e.concat(s,ts(s,[],t))}function cl(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Ih(n){const e=qt(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const s=fn(n),a=s?n.offsetWidth:t,l=s?n.offsetHeight:i,u=ho(t)!==a||ho(i)!==l;return u&&(t=a,i=l),{width:t,height:i,$:u}}function Hl(n){return Wt(n)?n:n.contextElement}function ri(n){const e=Hl(n);if(!fn(e))return dn(1);const t=e.getBoundingClientRect(),{width:i,height:s,$:a}=Ih(e);let l=(a?ho(t.width):t.width)/i,u=(a?ho(t.height):t.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const by=dn(0);function Mh(n){const e=xt(n);return!ql()||!e.visualViewport?by:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function xy(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==xt(n)?!1:e}function Tr(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),a=Hl(n);let l=dn(1);e&&(i?Wt(i)&&(l=ri(i)):l=ri(n));const u=xy(a,t,i)?Mh(a):dn(0);let f=(s.left+u.x)/l.x,m=(s.top+u.y)/l.y,p=s.width/l.x,v=s.height/l.y;if(a){const S=xt(a),_=i&&Wt(i)?xt(i):i;let T=S,y=cl(T);for(;y&&i&&_!==T;){const w=ri(y),k=y.getBoundingClientRect(),C=qt(y),P=k.left+(y.clientLeft+parseFloat(C.paddingLeft))*w.x,j=k.top+(y.clientTop+parseFloat(C.paddingTop))*w.y;f*=w.x,m*=w.y,p*=w.x,v*=w.y,f+=P,m+=j,T=xt(y),y=cl(T)}}return mo({width:p,height:v,x:f,y:m})}function Vl(n,e){const t=Do(n).scrollLeft;return e?e.left+t:Tr(pn(n)).left+t}function Dh(n,e,t){t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=i.left+e.scrollLeft-(t?0:Vl(n,i)),a=i.top+e.scrollTop;return{x:s,y:a}}function Sy(n){let{elements:e,rect:t,offsetParent:i,strategy:s}=n;const a=s==="fixed",l=pn(i),u=e?Mo(e.floating):!1;if(i===l||u&&a)return t;let f={scrollLeft:0,scrollTop:0},m=dn(1);const p=dn(0),v=fn(i);if((v||!v&&!a)&&((ki(i)!=="body"||ms(l))&&(f=Do(i)),fn(i))){const _=Tr(i);m=ri(i),p.x=_.x+i.clientLeft,p.y=_.y+i.clientTop}const S=l&&!v&&!a?Dh(l,f,!0):dn(0);return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-f.scrollLeft*m.x+p.x+S.x,y:t.y*m.y-f.scrollTop*m.y+p.y+S.y}}function ky(n){return Array.from(n.getClientRects())}function Ty(n){const e=pn(n),t=Do(n),i=n.ownerDocument.body,s=bt(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=bt(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let l=-t.scrollLeft+Vl(n);const u=-t.scrollTop;return qt(i).direction==="rtl"&&(l+=bt(e.clientWidth,i.clientWidth)-s),{width:s,height:a,x:l,y:u}}function Py(n,e){const t=xt(n),i=pn(n),s=t.visualViewport;let a=i.clientWidth,l=i.clientHeight,u=0,f=0;if(s){a=s.width,l=s.height;const m=ql();(!m||m&&e==="fixed")&&(u=s.offsetLeft,f=s.offsetTop)}return{width:a,height:l,x:u,y:f}}const Ey=new Set(["absolute","fixed"]);function Cy(n,e){const t=Tr(n,!0,e==="fixed"),i=t.top+n.clientTop,s=t.left+n.clientLeft,a=fn(n)?ri(n):dn(1),l=n.clientWidth*a.x,u=n.clientHeight*a.y,f=s*a.x,m=i*a.y;return{width:l,height:u,x:f,y:m}}function Pu(n,e,t){let i;if(e==="viewport")i=Py(n,t);else if(e==="document")i=Ty(pn(n));else if(Wt(e))i=Cy(e,t);else{const s=Mh(n);i={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return mo(i)}function $h(n,e){const t=Xn(n);return t===e||!Wt(t)||mi(t)?!1:qt(t).position==="fixed"||$h(t,e)}function jy(n,e){const t=e.get(n);if(t)return t;let i=ts(n,[],!1).filter(u=>Wt(u)&&ki(u)!=="body"),s=null;const a=qt(n).position==="fixed";let l=a?Xn(n):n;for(;Wt(l)&&!mi(l);){const u=qt(l),f=Wl(l);!f&&u.position==="fixed"&&(s=null),(a?!f&&!s:!f&&u.position==="static"&&!!s&&Ey.has(s.position)||ms(l)&&!f&&$h(n,l))?i=i.filter(p=>p!==l):s=u,l=Xn(l)}return e.set(n,i),i}function Ay(n){let{element:e,boundary:t,rootBoundary:i,strategy:s}=n;const l=[...t==="clippingAncestors"?Mo(e)?[]:jy(e,this._c):[].concat(t),i],u=l[0],f=l.reduce((m,p)=>{const v=Pu(e,p,s);return m.top=bt(v.top,m.top),m.right=Qn(v.right,m.right),m.bottom=Qn(v.bottom,m.bottom),m.left=bt(v.left,m.left),m},Pu(e,u,s));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function Oy(n){const{width:e,height:t}=Ih(n);return{width:e,height:t}}function Ny(n,e,t){const i=fn(e),s=pn(e),a=t==="fixed",l=Tr(n,!0,a,e);let u={scrollLeft:0,scrollTop:0};const f=dn(0);function m(){f.x=Vl(s)}if(i||!i&&!a)if((ki(e)!=="body"||ms(s))&&(u=Do(e)),i){const _=Tr(e,!0,a,e);f.x=_.x+e.clientLeft,f.y=_.y+e.clientTop}else s&&m();a&&!i&&s&&m();const p=s&&!i&&!a?Dh(s,u):dn(0),v=l.left+u.scrollLeft-f.x-p.x,S=l.top+u.scrollTop-f.y-p.y;return{x:v,y:S,width:l.width,height:l.height}}function Ra(n){return qt(n).position==="static"}function Eu(n,e){if(!fn(n)||qt(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return pn(n)===t&&(t=t.ownerDocument.body),t}function Bh(n,e){const t=xt(n);if(Mo(n))return t;if(!fn(n)){let s=Xn(n);for(;s&&!mi(s);){if(Wt(s)&&!Ra(s))return s;s=Xn(s)}return t}let i=Eu(n,e);for(;i&&my(i)&&Ra(i);)i=Eu(i,e);return i&&mi(i)&&Ra(i)&&!Wl(i)?t:i||yy(n)||t}const Ry=async function(n){const e=this.getOffsetParent||Bh,t=this.getDimensions,i=await t(n.floating);return{reference:Ny(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Ly(n){return qt(n).direction==="rtl"}const Iy={convertOffsetParentRelativeRectToViewportRelativeRect:Sy,getDocumentElement:pn,getClippingRect:Ay,getOffsetParent:Bh,getElementRects:Ry,getClientRects:ky,getDimensions:Oy,getScale:ri,isElement:Wt,isRTL:Ly};function zh(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function My(n,e){let t=null,i;const s=pn(n);function a(){var u;clearTimeout(i),(u=t)==null||u.disconnect(),t=null}function l(u,f){u===void 0&&(u=!1),f===void 0&&(f=1),a();const m=n.getBoundingClientRect(),{left:p,top:v,width:S,height:_}=m;if(u||e(),!S||!_)return;const T=Gs(v),y=Gs(s.clientWidth-(p+S)),w=Gs(s.clientHeight-(v+_)),k=Gs(p),P={rootMargin:-T+"px "+-y+"px "+-w+"px "+-k+"px",threshold:bt(0,Qn(1,f))||1};let j=!0;function N(R){const M=R[0].intersectionRatio;if(M!==f){if(!j)return l();M?l(!1,M):i=setTimeout(()=>{l(!1,1e-7)},1e3)}M===1&&!zh(m,n.getBoundingClientRect())&&l(),j=!1}try{t=new IntersectionObserver(N,{...P,root:s.ownerDocument})}catch{t=new IntersectionObserver(N,P)}t.observe(n)}return l(!0),a}function Dy(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:f=!1}=i,m=Hl(n),p=s||a?[...m?ts(m):[],...ts(e)]:[];p.forEach(k=>{s&&k.addEventListener("scroll",t,{passive:!0}),a&&k.addEventListener("resize",t)});const v=m&&u?My(m,t):null;let S=-1,_=null;l&&(_=new ResizeObserver(k=>{let[C]=k;C&&C.target===m&&_&&(_.unobserve(e),cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var P;(P=_)==null||P.observe(e)})),t()}),m&&!f&&_.observe(m),_.observe(e));let T,y=f?Tr(n):null;f&&w();function w(){const k=Tr(n);y&&!zh(y,k)&&t(),y=k,T=requestAnimationFrame(w)}return t(),()=>{var k;p.forEach(C=>{s&&C.removeEventListener("scroll",t),a&&C.removeEventListener("resize",t)}),v==null||v(),(k=_)==null||k.disconnect(),_=null,f&&cancelAnimationFrame(T)}}const $y=ly,By=cy,zy=sy,Fy=dy,Uy=oy,Cu=iy,Zy=uy,Wy=(n,e,t)=>{const i=new Map,s={platform:Iy,...t},a={...s.platform,_c:i};return ry(n,e,{...s,platform:a})};var qy=typeof document<"u",Hy=function(){},oo=qy?b.useLayoutEffect:Hy;function po(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!po(n[i],e[i]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,s[i]))return!1;for(i=t;i--!==0;){const a=s[i];if(!(a==="_owner"&&n.$$typeof)&&!po(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function Fh(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function ju(n,e){const t=Fh(n);return Math.round(e*t)/t}function La(n){const e=b.useRef(n);return oo(()=>{e.current=n}),e}function Vy(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:s,elements:{reference:a,floating:l}={},transform:u=!0,whileElementsMounted:f,open:m}=n,[p,v]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[S,_]=b.useState(i);po(S,i)||_(i);const[T,y]=b.useState(null),[w,k]=b.useState(null),C=b.useCallback($=>{$!==R.current&&(R.current=$,y($))},[]),P=b.useCallback($=>{$!==M.current&&(M.current=$,k($))},[]),j=a||T,N=l||w,R=b.useRef(null),M=b.useRef(null),U=b.useRef(p),q=f!=null,Y=La(f),G=La(s),Z=La(m),be=b.useCallback(()=>{if(!R.current||!M.current)return;const $={placement:e,strategy:t,middleware:S};G.current&&($.platform=G.current),Wy(R.current,M.current,$).then(J=>{const W={...J,isPositioned:Z.current!==!1};F.current&&!po(U.current,W)&&(U.current=W,hs.flushSync(()=>{v(W)}))})},[S,e,t,G,Z]);oo(()=>{m===!1&&U.current.isPositioned&&(U.current.isPositioned=!1,v($=>({...$,isPositioned:!1})))},[m]);const F=b.useRef(!1);oo(()=>(F.current=!0,()=>{F.current=!1}),[]),oo(()=>{if(j&&(R.current=j),N&&(M.current=N),j&&N){if(Y.current)return Y.current(j,N,be);be()}},[j,N,be,Y,q]);const ye=b.useMemo(()=>({reference:R,floating:M,setReference:C,setFloating:P}),[C,P]),K=b.useMemo(()=>({reference:j,floating:N}),[j,N]),te=b.useMemo(()=>{const $={position:t,left:0,top:0};if(!K.floating)return $;const J=ju(K.floating,p.x),W=ju(K.floating,p.y);return u?{...$,transform:"translate("+J+"px, "+W+"px)",...Fh(K.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:J,top:W}},[t,u,K.floating,p.x,p.y]);return b.useMemo(()=>({...p,update:be,refs:ye,elements:K,floatingStyles:te}),[p,be,ye,K,te])}const Gy=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:s}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?Cu({element:i.current,padding:s}).fn(t):{}:i?Cu({element:i,padding:s}).fn(t):{}}}},Ky=(n,e)=>({...$y(n),options:[n,e]}),Jy=(n,e)=>({...By(n),options:[n,e]}),Yy=(n,e)=>({...Zy(n),options:[n,e]}),Qy=(n,e)=>({...zy(n),options:[n,e]}),Xy=(n,e)=>({...Fy(n),options:[n,e]}),ew=(n,e)=>({...Uy(n),options:[n,e]}),tw=(n,e)=>({...Gy(n),options:[n,e]});var nw="Arrow",Uh=b.forwardRef((n,e)=>{const{children:t,width:i=10,height:s=5,...a}=n;return d.jsx(Re.svg,{...a,ref:e,width:i,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});Uh.displayName=nw;var rw=Uh;function iw(n){const[e,t]=b.useState(void 0);return En(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let l,u;if("borderBoxSize"in a){const f=a.borderBoxSize,m=Array.isArray(f)?f[0]:f;l=m.inlineSize,u=m.blockSize}else l=n.offsetWidth,u=n.offsetHeight;t({width:l,height:u})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}var Zh="Popper",[Wh,qh]=Cr(Zh),[zT,Hh]=Wh(Zh),Vh="PopperAnchor",Gh=b.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...s}=n,a=Hh(Vh,t),l=b.useRef(null),u=ot(e,l);return b.useEffect(()=>{a.onAnchorChange((i==null?void 0:i.current)||l.current)}),i?null:d.jsx(Re.div,{...s,ref:u})});Gh.displayName=Vh;var Gl="PopperContent",[sw,ow]=Wh(Gl),Kh=b.forwardRef((n,e)=>{var Te,at,Rt,Lt,Tt,Pt;const{__scopePopper:t,side:i="bottom",sideOffset:s=0,align:a="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:f=!0,collisionBoundary:m=[],collisionPadding:p=0,sticky:v="partial",hideWhenDetached:S=!1,updatePositionStrategy:_="optimized",onPlaced:T,...y}=n,w=Hh(Gl,t),[k,C]=b.useState(null),P=ot(e,Et=>C(Et)),[j,N]=b.useState(null),R=iw(j),M=(R==null?void 0:R.width)??0,U=(R==null?void 0:R.height)??0,q=i+(a!=="center"?"-"+a:""),Y=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},G=Array.isArray(m)?m:[m],Z=G.length>0,be={padding:Y,boundary:G.filter(lw),altBoundary:Z},{refs:F,floatingStyles:ye,placement:K,isPositioned:te,middlewareData:$}=Vy({strategy:"fixed",placement:q,whileElementsMounted:(...Et)=>Dy(...Et,{animationFrame:_==="always"}),elements:{reference:w.anchor},middleware:[Ky({mainAxis:s+U,alignmentAxis:l}),f&&Jy({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?Yy():void 0,...be}),f&&Qy({...be}),Xy({...be,apply:({elements:Et,rects:Or,availableWidth:Nr,availableHeight:rr})=>{const{width:ir,height:Gt}=Or.reference,Rn=Et.floating.style;Rn.setProperty("--radix-popper-available-width",`${Nr}px`),Rn.setProperty("--radix-popper-available-height",`${rr}px`),Rn.setProperty("--radix-popper-anchor-width",`${ir}px`),Rn.setProperty("--radix-popper-anchor-height",`${Gt}px`)}}),j&&tw({element:j,padding:u}),cw({arrowWidth:M,arrowHeight:U}),S&&ew({strategy:"referenceHidden",...be})]}),[J,W]=Qh(K),de=Zt(T);En(()=>{te&&(de==null||de())},[te,de]);const oe=(Te=$.arrow)==null?void 0:Te.x,ae=(at=$.arrow)==null?void 0:at.y,ie=((Rt=$.arrow)==null?void 0:Rt.centerOffset)!==0,[le,pe]=b.useState();return En(()=>{k&&pe(window.getComputedStyle(k).zIndex)},[k]),d.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...ye,transform:te?ye.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[(Lt=$.transformOrigin)==null?void 0:Lt.x,(Tt=$.transformOrigin)==null?void 0:Tt.y].join(" "),...((Pt=$.hide)==null?void 0:Pt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:d.jsx(sw,{scope:t,placedSide:J,onArrowChange:N,arrowX:oe,arrowY:ae,shouldHideArrow:ie,children:d.jsx(Re.div,{"data-side":J,"data-align":W,...y,ref:P,style:{...y.style,animation:te?void 0:"none"}})})})});Kh.displayName=Gl;var Jh="PopperArrow",aw={top:"bottom",right:"left",bottom:"top",left:"right"},Yh=b.forwardRef(function(e,t){const{__scopePopper:i,...s}=e,a=ow(Jh,i),l=aw[a.placedSide];return d.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:d.jsx(rw,{...s,ref:t,style:{...s.style,display:"block"}})})});Yh.displayName=Jh;function lw(n){return n!==null}var cw=n=>({name:"transformOrigin",options:n,fn(e){var w,k,C;const{placement:t,rects:i,middlewareData:s}=e,l=((w=s.arrow)==null?void 0:w.centerOffset)!==0,u=l?0:n.arrowWidth,f=l?0:n.arrowHeight,[m,p]=Qh(t),v={start:"0%",center:"50%",end:"100%"}[p],S=(((k=s.arrow)==null?void 0:k.x)??0)+u/2,_=(((C=s.arrow)==null?void 0:C.y)??0)+f/2;let T="",y="";return m==="bottom"?(T=l?v:`${S}px`,y=`${-f}px`):m==="top"?(T=l?v:`${S}px`,y=`${i.floating.height+f}px`):m==="right"?(T=`${-f}px`,y=l?v:`${_}px`):m==="left"&&(T=`${i.floating.width+f}px`,y=l?v:`${_}px`),{data:{x:T,y}}}});function Qh(n){const[e,t="center"]=n.split("-");return[e,t]}var uw=Gh,dw=Kh,hw=Yh,[$o,FT]=Cr("Tooltip",[qh]),Kl=qh(),Xh="TooltipProvider",fw=700,Au="tooltip.open",[mw,ef]=$o(Xh),tf=n=>{const{__scopeTooltip:e,delayDuration:t=fw,skipDelayDuration:i=300,disableHoverableContent:s=!1,children:a}=n,l=b.useRef(!0),u=b.useRef(!1),f=b.useRef(0);return b.useEffect(()=>{const m=f.current;return()=>window.clearTimeout(m)},[]),d.jsx(mw,{scope:e,isOpenDelayedRef:l,delayDuration:t,onOpen:b.useCallback(()=>{window.clearTimeout(f.current),l.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>l.current=!0,i)},[i]),isPointerInTransitRef:u,onPointerInTransitChange:b.useCallback(m=>{u.current=m},[]),disableHoverableContent:s,children:a})};tf.displayName=Xh;var nf="Tooltip",[UT,Bo]=$o(nf),ul="TooltipTrigger",pw=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,s=Bo(ul,t),a=ef(ul,t),l=Kl(t),u=b.useRef(null),f=ot(e,u,s.onTriggerChange),m=b.useRef(!1),p=b.useRef(!1),v=b.useCallback(()=>m.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),d.jsx(uw,{asChild:!0,...l,children:d.jsx(Re.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...i,ref:f,onPointerMove:Ee(n.onPointerMove,S=>{S.pointerType!=="touch"&&!p.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),p.current=!0)}),onPointerLeave:Ee(n.onPointerLeave,()=>{s.onTriggerLeave(),p.current=!1}),onPointerDown:Ee(n.onPointerDown,()=>{s.open&&s.onClose(),m.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:Ee(n.onFocus,()=>{m.current||s.onOpen()}),onBlur:Ee(n.onBlur,s.onClose),onClick:Ee(n.onClick,s.onClose)})})});pw.displayName=ul;var gw="TooltipPortal",[ZT,vw]=$o(gw,{forceMount:void 0}),pi="TooltipContent",rf=b.forwardRef((n,e)=>{const t=vw(pi,n.__scopeTooltip),{forceMount:i=t.forceMount,side:s="top",...a}=n,l=Bo(pi,n.__scopeTooltip);return d.jsx(jr,{present:i||l.open,children:l.disableHoverableContent?d.jsx(sf,{side:s,...a,ref:e}):d.jsx(_w,{side:s,...a,ref:e})})}),_w=b.forwardRef((n,e)=>{const t=Bo(pi,n.__scopeTooltip),i=ef(pi,n.__scopeTooltip),s=b.useRef(null),a=ot(e,s),[l,u]=b.useState(null),{trigger:f,onClose:m}=t,p=s.current,{onPointerInTransitChange:v}=i,S=b.useCallback(()=>{u(null),v(!1)},[v]),_=b.useCallback((T,y)=>{const w=T.currentTarget,k={x:T.clientX,y:T.clientY},C=Sw(k,w.getBoundingClientRect()),P=kw(k,C),j=Tw(y.getBoundingClientRect()),N=Ew([...P,...j]);u(N),v(!0)},[v]);return b.useEffect(()=>()=>S(),[S]),b.useEffect(()=>{if(f&&p){const T=w=>_(w,p),y=w=>_(w,f);return f.addEventListener("pointerleave",T),p.addEventListener("pointerleave",y),()=>{f.removeEventListener("pointerleave",T),p.removeEventListener("pointerleave",y)}}},[f,p,_,S]),b.useEffect(()=>{if(l){const T=y=>{const w=y.target,k={x:y.clientX,y:y.clientY},C=(f==null?void 0:f.contains(w))||(p==null?void 0:p.contains(w)),P=!Pw(k,l);C?S():P&&(S(),m())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[f,p,l,m,S]),d.jsx(sf,{...n,ref:a})}),[yw,ww]=$o(nf,{isInside:!1}),bw=kg("TooltipContent"),sf=b.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:l,...u}=n,f=Bo(pi,t),m=Kl(t),{onClose:p}=f;return b.useEffect(()=>(document.addEventListener(Au,p),()=>document.removeEventListener(Au,p)),[p]),b.useEffect(()=>{if(f.trigger){const v=S=>{const _=S.target;_!=null&&_.contains(f.trigger)&&p()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[f.trigger,p]),d.jsx(jo,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:v=>v.preventDefault(),onDismiss:p,children:d.jsxs(dw,{"data-state":f.stateAttribute,...m,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[d.jsx(bw,{children:i}),d.jsx(yw,{scope:t,isInside:!0,children:d.jsx(Vg,{id:f.contentId,role:"tooltip",children:s||i})})]})})});rf.displayName=pi;var of="TooltipArrow",xw=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,s=Kl(t);return ww(of,t).isInside?null:d.jsx(hw,{...s,...i,ref:e})});xw.displayName=of;function Sw(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,i,s,a)){case a:return"left";case s:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function kw(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function Tw(n){const{top:e,right:t,bottom:i,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:i},{x:s,y:i}]}function Pw(n,e){const{x:t,y:i}=n;let s=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const u=e[a],f=e[l],m=u.x,p=u.y,v=f.x,S=f.y;p>i!=S>i&&t<(v-m)*(i-p)/(S-p)+m&&(s=!s)}return s}function Ew(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),Cw(e)}function Cw(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const s=n[i];for(;e.length>=2;){const a=e[e.length-1],l=e[e.length-2];if((a.x-l.x)*(s.y-l.y)>=(a.y-l.y)*(s.x-l.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const s=n[i];for(;t.length>=2;){const a=t[t.length-1],l=t[t.length-2];if((a.x-l.x)*(s.y-l.y)>=(a.y-l.y)*(s.x-l.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var jw=tf,af=rf;const Aw=jw,Ow=b.forwardRef(({className:n,sideOffset:e=4,...t},i)=>d.jsx(af,{ref:i,sideOffset:e,className:Fe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));Ow.displayName=af.displayName;var zo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Fo=typeof window>"u"||"Deno"in globalThis;function Bt(){}function Nw(n,e){return typeof n=="function"?n(e):n}function Rw(n){return typeof n=="number"&&n>=0&&n!==1/0}function Lw(n,e){return Math.max(n+(e||0)-Date.now(),0)}function dl(n,e){return typeof n=="function"?n(e):n}function Iw(n,e){return typeof n=="function"?n(e):n}function Ou(n,e){const{type:t="all",exact:i,fetchStatus:s,predicate:a,queryKey:l,stale:u}=n;if(l){if(i){if(e.queryHash!==Jl(l,e.options))return!1}else if(!rs(e.queryKey,l))return!1}if(t!=="all"){const f=e.isActive();if(t==="active"&&!f||t==="inactive"&&f)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||s&&s!==e.state.fetchStatus||a&&!a(e))}function Nu(n,e){const{exact:t,status:i,predicate:s,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(ns(e.options.mutationKey)!==ns(a))return!1}else if(!rs(e.options.mutationKey,a))return!1}return!(i&&e.state.status!==i||s&&!s(e))}function Jl(n,e){return((e==null?void 0:e.queryKeyHashFn)||ns)(n)}function ns(n){return JSON.stringify(n,(e,t)=>hl(t)?Object.keys(t).sort().reduce((i,s)=>(i[s]=t[s],i),{}):t)}function rs(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>rs(n[t],e[t])):!1}function lf(n,e){if(n===e)return n;const t=Ru(n)&&Ru(e);if(t||hl(n)&&hl(e)){const i=t?n:Object.keys(n),s=i.length,a=t?e:Object.keys(e),l=a.length,u=t?[]:{},f=new Set(i);let m=0;for(let p=0;p<l;p++){const v=t?p:a[p];(!t&&f.has(v)||t)&&n[v]===void 0&&e[v]===void 0?(u[v]=void 0,m++):(u[v]=lf(n[v],e[v]),u[v]===n[v]&&n[v]!==void 0&&m++)}return s===l&&m===s?n:u}return e}function Ru(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function hl(n){if(!Lu(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Lu(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Lu(n){return Object.prototype.toString.call(n)==="[object Object]"}function Mw(n){return new Promise(e=>{setTimeout(e,n)})}function Dw(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?lf(n,e):e}function $w(n,e,t=0){const i=[...n,e];return t&&i.length>t?i.slice(1):i}function Bw(n,e,t=0){const i=[e,...n];return t&&i.length>t?i.slice(0,-1):i}var Yl=Symbol();function cf(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Yl?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var yr,qn,oi,jd,zw=(jd=class extends zo{constructor(){super();Ae(this,yr);Ae(this,qn);Ae(this,oi);ge(this,oi,e=>{if(!Fo&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){I(this,qn)||this.setEventListener(I(this,oi))}onUnsubscribe(){var e;this.hasListeners()||((e=I(this,qn))==null||e.call(this),ge(this,qn,void 0))}setEventListener(e){var t;ge(this,oi,e),(t=I(this,qn))==null||t.call(this),ge(this,qn,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){I(this,yr)!==e&&(ge(this,yr,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof I(this,yr)=="boolean"?I(this,yr):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},yr=new WeakMap,qn=new WeakMap,oi=new WeakMap,jd),uf=new zw,ai,Hn,li,Ad,Fw=(Ad=class extends zo{constructor(){super();Ae(this,ai,!0);Ae(this,Hn);Ae(this,li);ge(this,li,e=>{if(!Fo&&window.addEventListener){const t=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",i)}}})}onSubscribe(){I(this,Hn)||this.setEventListener(I(this,li))}onUnsubscribe(){var e;this.hasListeners()||((e=I(this,Hn))==null||e.call(this),ge(this,Hn,void 0))}setEventListener(e){var t;ge(this,li,e),(t=I(this,Hn))==null||t.call(this),ge(this,Hn,e(this.setOnline.bind(this)))}setOnline(e){I(this,ai)!==e&&(ge(this,ai,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return I(this,ai)}},ai=new WeakMap,Hn=new WeakMap,li=new WeakMap,Ad),go=new Fw;function Uw(){let n,e;const t=new Promise((s,a)=>{n=s,e=a});t.status="pending",t.catch(()=>{});function i(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{i({status:"fulfilled",value:s}),n(s)},t.reject=s=>{i({status:"rejected",reason:s}),e(s)},t}function Zw(n){return Math.min(1e3*2**n,3e4)}function df(n){return(n??"online")==="online"?go.isOnline():!0}var hf=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Ia(n){return n instanceof hf}function ff(n){let e=!1,t=0,i=!1,s;const a=Uw(),l=y=>{var w;i||(S(new hf(y)),(w=n.abort)==null||w.call(n))},u=()=>{e=!0},f=()=>{e=!1},m=()=>uf.isFocused()&&(n.networkMode==="always"||go.isOnline())&&n.canRun(),p=()=>df(n.networkMode)&&n.canRun(),v=y=>{var w;i||(i=!0,(w=n.onSuccess)==null||w.call(n,y),s==null||s(),a.resolve(y))},S=y=>{var w;i||(i=!0,(w=n.onError)==null||w.call(n,y),s==null||s(),a.reject(y))},_=()=>new Promise(y=>{var w;s=k=>{(i||m())&&y(k)},(w=n.onPause)==null||w.call(n)}).then(()=>{var y;s=void 0,i||(y=n.onContinue)==null||y.call(n)}),T=()=>{if(i)return;let y;const w=t===0?n.initialPromise:void 0;try{y=w??n.fn()}catch(k){y=Promise.reject(k)}Promise.resolve(y).then(v).catch(k=>{var R;if(i)return;const C=n.retry??(Fo?0:3),P=n.retryDelay??Zw,j=typeof P=="function"?P(t,k):P,N=C===!0||typeof C=="number"&&t<C||typeof C=="function"&&C(t,k);if(e||!N){S(k);return}t++,(R=n.onFail)==null||R.call(n,t,k),Mw(j).then(()=>m()?void 0:_()).then(()=>{e?S(k):T()})})};return{promise:a,cancel:l,continue:()=>(s==null||s(),a),cancelRetry:u,continueRetry:f,canStart:p,start:()=>(p()?T():_().then(T),a)}}var Ww=n=>setTimeout(n,0);function qw(){let n=[],e=0,t=u=>{u()},i=u=>{u()},s=Ww;const a=u=>{e?n.push(u):s(()=>{t(u)})},l=()=>{const u=n;n=[],u.length&&s(()=>{i(()=>{u.forEach(f=>{t(f)})})})};return{batch:u=>{let f;e++;try{f=u()}finally{e--,e||l()}return f},batchCalls:u=>(...f)=>{a(()=>{u(...f)})},schedule:a,setNotifyFunction:u=>{t=u},setBatchNotifyFunction:u=>{i=u},setScheduler:u=>{s=u}}}var ht=qw(),wr,Od,mf=(Od=class{constructor(){Ae(this,wr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rw(this.gcTime)&&ge(this,wr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Fo?1/0:5*60*1e3))}clearGcTimeout(){I(this,wr)&&(clearTimeout(I(this,wr)),ge(this,wr,void 0))}},wr=new WeakMap,Od),ci,br,Ot,xr,rt,us,Sr,zt,kn,Nd,Hw=(Nd=class extends mf{constructor(e){super();Ae(this,zt);Ae(this,ci);Ae(this,br);Ae(this,Ot);Ae(this,xr);Ae(this,rt);Ae(this,us);Ae(this,Sr);ge(this,Sr,!1),ge(this,us,e.defaultOptions),this.setOptions(e.options),this.observers=[],ge(this,xr,e.client),ge(this,Ot,I(this,xr).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ge(this,ci,Gw(this.options)),this.state=e.state??I(this,ci),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=I(this,rt))==null?void 0:e.promise}setOptions(e){this.options={...I(this,us),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&I(this,Ot).remove(this)}setData(e,t){const i=Dw(this.state.data,e,this.options);return nt(this,zt,kn).call(this,{data:i,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),i}setState(e,t){nt(this,zt,kn).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var i,s;const t=(i=I(this,rt))==null?void 0:i.promise;return(s=I(this,rt))==null||s.cancel(e),t?t.then(Bt).catch(Bt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(I(this,ci))}isActive(){return this.observers.some(e=>Iw(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Yl||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>dl(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Lw(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=I(this,rt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=I(this,rt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),I(this,Ot).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(I(this,rt)&&(I(this,Sr)?I(this,rt).cancel({revert:!0}):I(this,rt).cancelRetry()),this.scheduleGc()),I(this,Ot).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||nt(this,zt,kn).call(this,{type:"invalidate"})}fetch(e,t){var m,p,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(I(this,rt))return I(this,rt).continueRetry(),I(this,rt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const S=this.observers.find(_=>_.options.queryFn);S&&this.setOptions(S.options)}const i=new AbortController,s=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(ge(this,Sr,!0),i.signal)})},a=()=>{const S=cf(this.options,t),T=(()=>{const y={client:I(this,xr),queryKey:this.queryKey,meta:this.meta};return s(y),y})();return ge(this,Sr,!1),this.options.persister?this.options.persister(S,T,this):S(T)},u=(()=>{const S={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:I(this,xr),state:this.state,fetchFn:a};return s(S),S})();(m=this.options.behavior)==null||m.onFetch(u,this),ge(this,br,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=u.fetchOptions)==null?void 0:p.meta))&&nt(this,zt,kn).call(this,{type:"fetch",meta:(v=u.fetchOptions)==null?void 0:v.meta});const f=S=>{var _,T,y,w;Ia(S)&&S.silent||nt(this,zt,kn).call(this,{type:"error",error:S}),Ia(S)||((T=(_=I(this,Ot).config).onError)==null||T.call(_,S,this),(w=(y=I(this,Ot).config).onSettled)==null||w.call(y,this.state.data,S,this)),this.scheduleGc()};return ge(this,rt,ff({initialPromise:t==null?void 0:t.initialPromise,fn:u.fetchFn,abort:i.abort.bind(i),onSuccess:S=>{var _,T,y,w;if(S===void 0){f(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(S)}catch(k){f(k);return}(T=(_=I(this,Ot).config).onSuccess)==null||T.call(_,S,this),(w=(y=I(this,Ot).config).onSettled)==null||w.call(y,S,this.state.error,this),this.scheduleGc()},onError:f,onFail:(S,_)=>{nt(this,zt,kn).call(this,{type:"failed",failureCount:S,error:_})},onPause:()=>{nt(this,zt,kn).call(this,{type:"pause"})},onContinue:()=>{nt(this,zt,kn).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),I(this,rt).start()}},ci=new WeakMap,br=new WeakMap,Ot=new WeakMap,xr=new WeakMap,rt=new WeakMap,us=new WeakMap,Sr=new WeakMap,zt=new WeakSet,kn=function(e){const t=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Vw(i.data,this.options),fetchMeta:e.meta??null};case"success":return ge(this,br,void 0),{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Ia(s)&&s.revert&&I(this,br)?{...I(this,br),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=t(this.state),ht.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),I(this,Ot).notify({query:this,type:"updated",action:e})})},Nd);function Vw(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:df(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Gw(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,i=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var on,Rd,Kw=(Rd=class extends zo{constructor(e={}){super();Ae(this,on);this.config=e,ge(this,on,new Map)}build(e,t,i){const s=t.queryKey,a=t.queryHash??Jl(s,t);let l=this.get(a);return l||(l=new Hw({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(t),state:i,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){I(this,on).has(e.queryHash)||(I(this,on).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=I(this,on).get(e.queryHash);t&&(e.destroy(),t===e&&I(this,on).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ht.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return I(this,on).get(e)}getAll(){return[...I(this,on).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(i=>Ou(t,i))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(i=>Ou(e,i)):t}notify(e){ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ht.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ht.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},on=new WeakMap,Rd),an,dt,kr,ln,zn,Ld,Jw=(Ld=class extends mf{constructor(e){super();Ae(this,ln);Ae(this,an);Ae(this,dt);Ae(this,kr);this.mutationId=e.mutationId,ge(this,dt,e.mutationCache),ge(this,an,[]),this.state=e.state||Yw(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){I(this,an).includes(e)||(I(this,an).push(e),this.clearGcTimeout(),I(this,dt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ge(this,an,I(this,an).filter(t=>t!==e)),this.scheduleGc(),I(this,dt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){I(this,an).length||(this.state.status==="pending"?this.scheduleGc():I(this,dt).remove(this))}continue(){var e;return((e=I(this,kr))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,l,u,f,m,p,v,S,_,T,y,w,k,C,P,j,N,R,M,U;const t=()=>{nt(this,ln,zn).call(this,{type:"continue"})};ge(this,kr,ff({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(q,Y)=>{nt(this,ln,zn).call(this,{type:"failed",failureCount:q,error:Y})},onPause:()=>{nt(this,ln,zn).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>I(this,dt).canRun(this)}));const i=this.state.status==="pending",s=!I(this,kr).canStart();try{if(i)t();else{nt(this,ln,zn).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(a=I(this,dt).config).onMutate)==null?void 0:l.call(a,e,this));const Y=await((f=(u=this.options).onMutate)==null?void 0:f.call(u,e));Y!==this.state.context&&nt(this,ln,zn).call(this,{type:"pending",context:Y,variables:e,isPaused:s})}const q=await I(this,kr).start();return await((p=(m=I(this,dt).config).onSuccess)==null?void 0:p.call(m,q,e,this.state.context,this)),await((S=(v=this.options).onSuccess)==null?void 0:S.call(v,q,e,this.state.context)),await((T=(_=I(this,dt).config).onSettled)==null?void 0:T.call(_,q,null,this.state.variables,this.state.context,this)),await((w=(y=this.options).onSettled)==null?void 0:w.call(y,q,null,e,this.state.context)),nt(this,ln,zn).call(this,{type:"success",data:q}),q}catch(q){try{throw await((C=(k=I(this,dt).config).onError)==null?void 0:C.call(k,q,e,this.state.context,this)),await((j=(P=this.options).onError)==null?void 0:j.call(P,q,e,this.state.context)),await((R=(N=I(this,dt).config).onSettled)==null?void 0:R.call(N,void 0,q,this.state.variables,this.state.context,this)),await((U=(M=this.options).onSettled)==null?void 0:U.call(M,void 0,q,e,this.state.context)),q}finally{nt(this,ln,zn).call(this,{type:"error",error:q})}}finally{I(this,dt).runNext(this)}}},an=new WeakMap,dt=new WeakMap,kr=new WeakMap,ln=new WeakSet,zn=function(e){const t=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),ht.batch(()=>{I(this,an).forEach(i=>{i.onMutationUpdate(e)}),I(this,dt).notify({mutation:this,type:"updated",action:e})})},Ld);function Yw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Pn,Ft,ds,Id,Qw=(Id=class extends zo{constructor(e={}){super();Ae(this,Pn);Ae(this,Ft);Ae(this,ds);this.config=e,ge(this,Pn,new Set),ge(this,Ft,new Map),ge(this,ds,0)}build(e,t,i){const s=new Jw({mutationCache:this,mutationId:++Ws(this,ds)._,options:e.defaultMutationOptions(t),state:i});return this.add(s),s}add(e){I(this,Pn).add(e);const t=Ks(e);if(typeof t=="string"){const i=I(this,Ft).get(t);i?i.push(e):I(this,Ft).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(I(this,Pn).delete(e)){const t=Ks(e);if(typeof t=="string"){const i=I(this,Ft).get(t);if(i)if(i.length>1){const s=i.indexOf(e);s!==-1&&i.splice(s,1)}else i[0]===e&&I(this,Ft).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Ks(e);if(typeof t=="string"){const i=I(this,Ft).get(t),s=i==null?void 0:i.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var i;const t=Ks(e);if(typeof t=="string"){const s=(i=I(this,Ft).get(t))==null?void 0:i.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ht.batch(()=>{I(this,Pn).forEach(e=>{this.notify({type:"removed",mutation:e})}),I(this,Pn).clear(),I(this,Ft).clear()})}getAll(){return Array.from(I(this,Pn))}find(e){const t={exact:!0,...e};return this.getAll().find(i=>Nu(t,i))}findAll(e={}){return this.getAll().filter(t=>Nu(e,t))}notify(e){ht.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return ht.batch(()=>Promise.all(e.map(t=>t.continue().catch(Bt))))}},Pn=new WeakMap,Ft=new WeakMap,ds=new WeakMap,Id);function Ks(n){var e;return(e=n.options.scope)==null?void 0:e.id}function Iu(n){return{onFetch:(e,t)=>{var p,v,S,_,T;const i=e.options,s=(S=(v=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:v.fetchMore)==null?void 0:S.direction,a=((_=e.state.data)==null?void 0:_.pages)||[],l=((T=e.state.data)==null?void 0:T.pageParams)||[];let u={pages:[],pageParams:[]},f=0;const m=async()=>{let y=!1;const w=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},k=cf(e.options,e.fetchOptions),C=async(P,j,N)=>{if(y)return Promise.reject();if(j==null&&P.pages.length)return Promise.resolve(P);const M=(()=>{const G={client:e.client,queryKey:e.queryKey,pageParam:j,direction:N?"backward":"forward",meta:e.options.meta};return w(G),G})(),U=await k(M),{maxPages:q}=e.options,Y=N?Bw:$w;return{pages:Y(P.pages,U,q),pageParams:Y(P.pageParams,j,q)}};if(s&&a.length){const P=s==="backward",j=P?Xw:Mu,N={pages:a,pageParams:l},R=j(i,N);u=await C(N,R,P)}else{const P=n??a.length;do{const j=f===0?l[0]??i.initialPageParam:Mu(i,u);if(f>0&&j==null)break;u=await C(u,j),f++}while(f<P)}return u};e.options.persister?e.fetchFn=()=>{var y,w;return(w=(y=e.options).persister)==null?void 0:w.call(y,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=m}}}function Mu(n,{pages:e,pageParams:t}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,t[i],t):void 0}function Xw(n,{pages:e,pageParams:t}){var i;return e.length>0?(i=n.getPreviousPageParam)==null?void 0:i.call(n,e[0],e,t[0],t):void 0}var qe,Vn,Gn,ui,di,Kn,hi,fi,Md,eb=(Md=class{constructor(n={}){Ae(this,qe);Ae(this,Vn);Ae(this,Gn);Ae(this,ui);Ae(this,di);Ae(this,Kn);Ae(this,hi);Ae(this,fi);ge(this,qe,n.queryCache||new Kw),ge(this,Vn,n.mutationCache||new Qw),ge(this,Gn,n.defaultOptions||{}),ge(this,ui,new Map),ge(this,di,new Map),ge(this,Kn,0)}mount(){Ws(this,Kn)._++,I(this,Kn)===1&&(ge(this,hi,uf.subscribe(async n=>{n&&(await this.resumePausedMutations(),I(this,qe).onFocus())})),ge(this,fi,go.subscribe(async n=>{n&&(await this.resumePausedMutations(),I(this,qe).onOnline())})))}unmount(){var n,e;Ws(this,Kn)._--,I(this,Kn)===0&&((n=I(this,hi))==null||n.call(this),ge(this,hi,void 0),(e=I(this,fi))==null||e.call(this),ge(this,fi,void 0))}isFetching(n){return I(this,qe).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return I(this,Vn).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=I(this,qe).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=I(this,qe).build(this,e),i=t.state.data;return i===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(dl(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(n){return I(this,qe).findAll(n).map(({queryKey:e,state:t})=>{const i=t.data;return[e,i]})}setQueryData(n,e,t){const i=this.defaultQueryOptions({queryKey:n}),s=I(this,qe).get(i.queryHash),a=s==null?void 0:s.state.data,l=Nw(e,a);if(l!==void 0)return I(this,qe).build(this,i).setData(l,{...t,manual:!0})}setQueriesData(n,e,t){return ht.batch(()=>I(this,qe).findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=I(this,qe).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=I(this,qe);ht.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=I(this,qe);return ht.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},i=ht.batch(()=>I(this,qe).findAll(n).map(s=>s.cancel(t)));return Promise.all(i).then(Bt).catch(Bt)}invalidateQueries(n,e={}){return ht.batch(()=>(I(this,qe).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},i=ht.batch(()=>I(this,qe).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,t);return t.throwOnError||(a=a.catch(Bt)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(i).then(Bt)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=I(this,qe).build(this,e);return t.isStaleByTime(dl(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Bt).catch(Bt)}fetchInfiniteQuery(n){return n.behavior=Iu(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Bt).catch(Bt)}ensureInfiniteQueryData(n){return n.behavior=Iu(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return go.isOnline()?I(this,Vn).resumePausedMutations():Promise.resolve()}getQueryCache(){return I(this,qe)}getMutationCache(){return I(this,Vn)}getDefaultOptions(){return I(this,Gn)}setDefaultOptions(n){ge(this,Gn,n)}setQueryDefaults(n,e){I(this,ui).set(ns(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...I(this,ui).values()],t={};return e.forEach(i=>{rs(n,i.queryKey)&&Object.assign(t,i.defaultOptions)}),t}setMutationDefaults(n,e){I(this,di).set(ns(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...I(this,di).values()],t={};return e.forEach(i=>{rs(n,i.mutationKey)&&Object.assign(t,i.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...I(this,Gn).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Jl(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Yl&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...I(this,Gn).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){I(this,qe).clear(),I(this,Vn).clear()}},qe=new WeakMap,Vn=new WeakMap,Gn=new WeakMap,ui=new WeakMap,di=new WeakMap,Kn=new WeakMap,hi=new WeakMap,fi=new WeakMap,Md),tb=b.createContext(void 0),nb=({client:n,children:e})=>(b.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),d.jsx(tb.Provider,{value:n,children:e}));const rb=Ro("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-[var(--shadow-glow)] transition-[var(--transition-smooth)]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-[var(--transition-smooth)]",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-gradient-to-r from-primary to-secondary text-primary-foreground hover:scale-105 shadow-[var(--shadow-glow)] transition-[var(--transition-smooth)] font-semibold"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),re=b.forwardRef(({className:n,variant:e,size:t,asChild:i=!1,...s},a)=>{const l=i?xg:"button";return d.jsx(l,{className:Fe(rb({variant:e,size:t,className:n})),ref:a,...s})});re.displayName="Button";const ib=()=>d.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-lg border-b border-border/50",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsxs("div",{className:"flex items-center justify-between h-16",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:d.jsx(Bl,{className:"w-5 h-5 text-primary-foreground"})}),d.jsxs("span",{className:"text-xl font-bold",children:[d.jsx("span",{className:"text-primary",children:"Pasar"}),d.jsx("span",{className:"text-secondary",children:"Malam"}),d.jsx("span",{className:"text-accent",children:"AI"})]})]}),d.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[d.jsx("a",{href:"#features",className:"text-sm font-medium hover:text-primary transition-colors",children:"Features"}),d.jsx("a",{href:"#about",className:"text-sm font-medium hover:text-primary transition-colors",children:"About"}),d.jsx("a",{href:"#contact",className:"text-sm font-medium hover:text-primary transition-colors",children:"Contact"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(re,{variant:"ghost",size:"sm",onClick:()=>window.location.href="/auth",children:[d.jsx(Ev,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Login"})]}),d.jsx(re,{variant:"default",size:"sm",onClick:()=>window.location.href="/auth",children:"Get Started"})]})]})})}),sb="/assets/hero-pasar-malam-CvF6g49N.jpg",ob=()=>d.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[d.jsxs("div",{className:"absolute inset-0 z-0",children:[d.jsx("img",{src:sb,alt:"Malaysian Night Market",className:"w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background/95 via-background/80 to-background/95"})]}),d.jsx("div",{className:"relative z-10 container mx-auto px-4 py-20 text-center",children:d.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 border border-primary/20",children:[d.jsx(Lo,{className:"w-4 h-4 text-primary"}),d.jsx("span",{className:"text-sm font-medium",children:"Taiping, Perak - Pasar Malam Batu 2 1/2"})]}),d.jsxs("h1",{className:"text-5xl md:text-7xl font-bold leading-tight",children:[d.jsx("span",{className:"bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"PasarMalamAI"}),d.jsx("br",{}),d.jsx("span",{className:"text-foreground",children:"Digital Marketplace"})]}),d.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground max-w-2xl mx-auto",children:"Empowering Malaysian hawkers and sellers with AI-driven insights, seamless pre-orders, and digital payments"}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[d.jsxs(re,{variant:"hero",size:"lg",className:"min-w-[200px]",onClick:()=>window.location.href="/auth",children:[d.jsx(yh,{className:"w-5 h-5"}),"Browse Market"]}),d.jsxs(re,{variant:"secondary",size:"lg",className:"min-w-[200px]",onClick:()=>window.location.href="/auth",children:[d.jsx(Tv,{className:"w-5 h-5"}),"Seller Dashboard"]})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-8 max-w-2xl mx-auto pt-12",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"text-3xl md:text-4xl font-bold text-primary",children:"50+"}),d.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Sellers"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"text-3xl md:text-4xl font-bold text-secondary",children:"1000+"}),d.jsx("div",{className:"text-sm text-muted-foreground",children:"Pre-Orders"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"text-3xl md:text-4xl font-bold text-accent",children:"24/7"}),d.jsx("div",{className:"text-sm text-muted-foreground",children:"AI Support"})]})]})]})}),d.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-10 animate-bounce",children:d.jsx("div",{className:"w-6 h-10 rounded-full border-2 border-primary/30 flex items-start justify-center p-2",children:d.jsx("div",{className:"w-1 h-3 rounded-full bg-primary/50"})})})]}),Se=b.forwardRef(({className:n,...e},t)=>d.jsx("div",{ref:t,className:Fe("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Se.displayName="Card";const Ue=b.forwardRef(({className:n,...e},t)=>d.jsx("div",{ref:t,className:Fe("flex flex-col space-y-1.5 p-6",n),...e}));Ue.displayName="CardHeader";const Ze=b.forwardRef(({className:n,...e},t)=>d.jsx("h3",{ref:t,className:Fe("text-2xl font-semibold leading-none tracking-tight",n),...e}));Ze.displayName="CardTitle";const gt=b.forwardRef(({className:n,...e},t)=>d.jsx("p",{ref:t,className:Fe("text-sm text-muted-foreground",n),...e}));gt.displayName="CardDescription";const Be=b.forwardRef(({className:n,...e},t)=>d.jsx("div",{ref:t,className:Fe("p-6 pt-0",n),...e}));Be.displayName="CardContent";const pf=b.forwardRef(({className:n,...e},t)=>d.jsx("div",{ref:t,className:Fe("flex items-center p-6 pt-0",n),...e}));pf.displayName="CardFooter";const ab="/assets/seller-dashboard-BgaE7Usd.jpg",lb="/assets/customer-ordering-DhVxMrnE.jpg",cb=()=>{const n=Ht(),e=[{icon:uo,title:"Pre-Order System",description:"Order ahead and skip the queue. Pay online and collect at your convenience."},{icon:Lo,title:"Real-Time Location",description:"Find your favorite stalls instantly with live gerai mapping."},{icon:jv,title:"QR Payments",description:"Seamless e-wallet integration with GrabPay and Touch'n Go."},{icon:pv,title:"AI Insights",description:"Smart analytics for sellers to predict demand and optimize inventory."},{icon:$l,title:"Market Hours",description:"Know exactly when your favorite stalls are open and what's available."},{icon:Sv,title:"Mobile First",description:"Designed for on-the-go shopping with intuitive mobile experience."}];return d.jsx("section",{className:"py-20 px-4 bg-muted/30",children:d.jsxs("div",{className:"container mx-auto",children:[d.jsxs("div",{className:"text-center mb-16",children:[d.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Modern Features for",d.jsxs("span",{className:"bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:[" ","Traditional Markets"]})]}),d.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Bridging heritage with technology for a better marketplace experience"})]}),d.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-16",children:e.map((t,i)=>d.jsxs(Se,{className:"p-6 hover:shadow-[var(--shadow-glow)] transition-[var(--transition-smooth)] hover:-translate-y-1 border-primary/10",children:[d.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center mb-4",children:d.jsx(t.icon,{className:"w-6 h-6 text-primary-foreground"})}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.title}),d.jsx("p",{className:"text-muted-foreground",children:t.description})]},i))}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-6xl mx-auto",children:[d.jsxs(Se,{className:"overflow-hidden hover:shadow-xl transition-[var(--transition-smooth)]",children:[d.jsx("img",{src:ab,alt:"Seller Dashboard",className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"p-6",children:[d.jsx("h3",{className:"text-2xl font-bold mb-2 text-primary",children:"For Peniaga"}),d.jsx("p",{className:"text-muted-foreground mb-4",children:"Manage your inventory, track pre-orders, and access AI-powered sales insights to grow your business."}),d.jsxs("ul",{className:"space-y-2 text-sm",children:[d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),"Digital inventory management"]}),d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),"Sales analytics dashboard"]}),d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),"Pre-order notification system"]})]}),d.jsx(re,{onClick:()=>n("/auth"),className:"w-full mt-4",children:"Get Started as Seller"})]})]}),d.jsxs(Se,{className:"overflow-hidden hover:shadow-xl transition-[var(--transition-smooth)]",children:[d.jsx("img",{src:lb,alt:"Customer Ordering",className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"p-6",children:[d.jsx("h3",{className:"text-2xl font-bold mb-2 text-secondary",children:"For Customers"}),d.jsx("p",{className:"text-muted-foreground mb-4",children:"Browse products, pre-order your favorites, and pay digitally for a seamless marketplace experience."}),d.jsxs("ul",{className:"space-y-2 text-sm",children:[d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-secondary"}),"Browse all stalls in one app"]}),d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-secondary"}),"Pre-order and skip queues"]}),d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-secondary"}),"Secure digital payments"]})]}),d.jsx(re,{onClick:()=>n("/customer/browse"),variant:"secondary",className:"w-full mt-4",children:"Browse Products"})]})]})]})]})})},ub=()=>d.jsx("footer",{className:"bg-muted/50 border-t border-border py-12",children:d.jsxs("div",{className:"container mx-auto px-4",children:[d.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:d.jsx(Bl,{className:"w-5 h-5 text-primary-foreground"})}),d.jsx("span",{className:"text-lg font-bold",children:"PasarMalamAI"})]}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Empowering Malaysian night markets with digital innovation and AI-driven insights."})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold mb-4",children:"Quick Links"}),d.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Browse Market"})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Seller Dashboard"})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"About Us"})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"FAQ"})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold mb-4",children:"For Sellers"}),d.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Register as Seller"})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Seller Guidelines"})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Payment Info"})}),d.jsx("li",{children:d.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Support"})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold mb-4",children:"Contact"}),d.jsxs("ul",{className:"space-y-3 text-sm text-muted-foreground",children:[d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx(Lo,{className:"w-4 h-4 text-primary"}),"Taiping, Perak"]}),d.jsxs("li",{className:"flex items-center gap-2",children:[d.jsx(wv,{className:"w-4 h-4 text-primary"}),"hello@pasarmalamai.my"]})]}),d.jsxs("div",{className:"flex items-center gap-3 mt-4",children:[d.jsx("a",{href:"#",className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center hover:bg-primary/20 transition-colors",children:d.jsx(vv,{className:"w-4 h-4 text-primary"})}),d.jsx("a",{href:"#",className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center hover:bg-primary/20 transition-colors",children:d.jsx(_v,{className:"w-4 h-4 text-primary"})}),d.jsx("a",{href:"#",className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center hover:bg-primary/20 transition-colors",children:d.jsx(Pv,{className:"w-4 h-4 text-primary"})})]})]})]}),d.jsxs("div",{className:"pt-8 border-t border-border flex flex-col md:flex-row justify-between items-center gap-4",children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:" 2025 PasarMalamAI. Idea & Developed by Fauziyah Md Aris, Taiping, Perak, Malaysia. All rights reserved."}),d.jsxs("div",{className:"flex gap-6 text-sm text-muted-foreground",children:[d.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Privacy Policy"}),d.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Terms of Service"}),d.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Cookie Policy"})]})]})]})}),db=()=>d.jsxs("div",{className:"min-h-screen",children:[d.jsx(ib,{}),d.jsxs("main",{children:[d.jsx(ob,{}),d.jsx(cb,{})]}),d.jsx(ub,{})]}),hb="modulepreload",fb=function(n){return"/"+n},Du={},ps=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(t.map(f=>{if(f=fb(f),f in Du)return;Du[f]=!0;const m=f.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":hb,m||(v.as="script"),v.crossOrigin="",v.href=f,u&&v.setAttribute("nonce",u),document.head.appendChild(v),m)return new Promise((S,_)=>{v.addEventListener("load",S),v.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})},mb=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ps(async()=>{const{default:i}=await Promise.resolve().then(()=>Ti);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)};class Ql extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class $u extends Ql{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Bu extends Ql{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class zu extends Ql{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var fl;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(fl||(fl={}));var pb=function(n,e,t,i){function s(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(p){try{m(i.next(p))}catch(v){l(v)}}function f(p){try{m(i.throw(p))}catch(v){l(v)}}function m(p){p.done?a(p.value):s(p.value).then(u,f)}m((i=i.apply(n,e||[])).next())})};class gb{constructor(e,{headers:t={},customFetch:i,region:s=fl.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=mb(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return pb(this,arguments,void 0,function*(t,i={}){var s;try{const{headers:a,method:l,body:u,signal:f}=i;let m={},{region:p}=i;p||(p=this.region);const v=new URL(`${this.url}/${t}`);p&&p!=="any"&&(m["x-region"]=p,v.searchParams.set("forceFunctionRegion",p));let S;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",S=u):typeof u=="string"?(m["Content-Type"]="text/plain",S=u):typeof FormData<"u"&&u instanceof FormData?S=u:(m["Content-Type"]="application/json",S=JSON.stringify(u)));const _=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:S,signal:f}).catch(k=>{throw k.name==="AbortError"?k:new $u(k)}),T=_.headers.get("x-relay-error");if(T&&T==="true")throw new Bu(_);if(!_.ok)throw new zu(_);let y=((s=_.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return y==="application/json"?w=yield _.json():y==="application/octet-stream"?w=yield _.blob():y==="text/event-stream"?w=_:y==="multipart/form-data"?w=yield _.formData():w=yield _.text(),{data:w,error:null,response:_}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new $u(a)}:{data:null,error:a,response:a instanceof zu||a instanceof Bu?a.context:void 0}}})}}var vt={},Xl={},Uo={},gs={},Zo={},Wo={},vb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},gi=vb();const _b=gi.fetch,gf=gi.fetch.bind(gi),vf=gi.Headers,yb=gi.Request,wb=gi.Response,Ti=Object.freeze(Object.defineProperty({__proto__:null,Headers:vf,Request:yb,Response:wb,default:gf,fetch:_b},Symbol.toStringTag,{value:"Module"})),bb=ig(Ti);var qo={};Object.defineProperty(qo,"__esModule",{value:!0});let xb=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};qo.default=xb;var _f=St&&St.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Wo,"__esModule",{value:!0});const Sb=_f(bb),kb=_f(qo);let Tb=class{constructor(e){var t,i;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(i=e.isMaybeSingle)!==null&&i!==void 0?i:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Sb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let s=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,u,f,m;let p=null,v=null,S=null,_=a.status,T=a.statusText;if(a.ok){if(this.method!=="HEAD"){const C=await a.text();C===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?v=C:v=JSON.parse(C))}const w=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),k=(f=a.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");w&&k&&k.length>1&&(S=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(p={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,S=null,_=406,T="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const w=await a.text();try{p=JSON.parse(w),Array.isArray(p)&&a.status===404&&(v=[],p=null,_=200,T="OK")}catch{a.status===404&&w===""?(_=204,T="No Content"):p={message:w}}if(p&&this.isMaybeSingle&&(!((m=p==null?void 0:p.details)===null||m===void 0)&&m.includes("0 rows"))&&(p=null,_=200,T="OK"),p&&this.shouldThrowOnError)throw new kb.default(p)}return{error:p,data:v,count:S,status:_,statusText:T}});return this.shouldThrowOnError||(s=s.catch(a=>{var l,u,f;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(u=a==null?void 0:a.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(f=a==null?void 0:a.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};Wo.default=Tb;var Pb=St&&St.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Zo,"__esModule",{value:!0});const Eb=Pb(Wo);let Cb=class extends Eb.default{select(e){let t=!1;const i=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:i,foreignTable:s,referencedTable:a=s}={}){const l=a?`${a}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${e}.${t?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:i=t}={}){const s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:i,referencedTable:s=i}={}){const a=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(l,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:i=!1,buffers:s=!1,wal:a=!1,format:l="text"}={}){var u;const f=[e?"analyze":null,t?"verbose":null,i?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),m=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${m}"; options=${f};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Zo.default=Cb;var jb=St&&St.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(gs,"__esModule",{value:!0});const Ab=jb(Zo);let Ob=class extends Ab.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const i=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:i,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const l=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${a}fts${l}.${t}`),this}match(e){return Object.entries(e).forEach(([t,i])=>{this.url.searchParams.append(t,`eq.${i}`)}),this}not(e,t,i){return this.url.searchParams.append(e,`not.${t}.${i}`),this}or(e,{foreignTable:t,referencedTable:i=t}={}){const s=i?`${i}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,i){return this.url.searchParams.append(e,`${t}.${i}`),this}};gs.default=Ob;var Nb=St&&St.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Uo,"__esModule",{value:!0});const qi=Nb(gs);let Rb=class{constructor(e,{headers:t={},schema:i,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=i,this.fetch=s}select(e,t){const{head:i=!1,count:s}=t??{},a=i?"HEAD":"GET";let l=!1;const u=(e??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",u),s&&this.headers.append("Prefer",`count=${s}`),new qi.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:i=!0}={}){var s;const a="POST";if(t&&this.headers.append("Prefer",`count=${t}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(l.length>0){const u=[...new Set(l)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new qi.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:i=!1,count:s,defaultToNull:a=!0}={}){var l;const u="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const f=e.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(f.length>0){const m=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new qi.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(e,{count:t}={}){var i;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new qi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:e}={}){var t;const i="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new qi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Uo.default=Rb;var yf=St&&St.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Xl,"__esModule",{value:!0});const Lb=yf(Uo),Ib=yf(gs);let Mb=class wf{constructor(e,{headers:t={},schema:i,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=i,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new Lb.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new wf(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:i=!1,get:s=!1,count:a}={}){var l;let u;const f=new URL(`${this.url}/rpc/${e}`);let m;i||s?(u=i?"HEAD":"GET",Object.entries(t).filter(([v,S])=>S!==void 0).map(([v,S])=>[v,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([v,S])=>{f.searchParams.append(v,S)})):(u="POST",m=t);const p=new Headers(this.headers);return a&&p.set("Prefer",`count=${a}`),new Ib.default({method:u,url:f,headers:p,schema:this.schemaName,body:m,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};Xl.default=Mb;var Pi=St&&St.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vt,"__esModule",{value:!0});vt.PostgrestError=vt.PostgrestBuilder=vt.PostgrestTransformBuilder=vt.PostgrestFilterBuilder=vt.PostgrestQueryBuilder=vt.PostgrestClient=void 0;const bf=Pi(Xl);vt.PostgrestClient=bf.default;const xf=Pi(Uo);vt.PostgrestQueryBuilder=xf.default;const Sf=Pi(gs);vt.PostgrestFilterBuilder=Sf.default;const kf=Pi(Zo);vt.PostgrestTransformBuilder=kf.default;const Tf=Pi(Wo);vt.PostgrestBuilder=Tf.default;const Pf=Pi(qo);vt.PostgrestError=Pf.default;var Db=vt.default={PostgrestClient:bf.default,PostgrestQueryBuilder:xf.default,PostgrestFilterBuilder:Sf.default,PostgrestTransformBuilder:kf.default,PostgrestBuilder:Tf.default,PostgrestError:Pf.default};const{PostgrestClient:$b,PostgrestQueryBuilder:KT,PostgrestFilterBuilder:JT,PostgrestTransformBuilder:YT,PostgrestBuilder:QT,PostgrestError:XT}=Db;class Bb{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const i=t.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const i=this.getWebSocketConstructor();return new i(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const zb="2.75.1",Fb=`realtime-js/${zb}`,Ub="1.0.0",ml=1e4,Zb=1e3,Wb=100;var Ji;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ji||(Ji={}));var Qe;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Qe||(Qe={}));var Ut;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ut||(Ut={}));var pl;(function(n){n.websocket="websocket"})(pl||(pl={}));var pr;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(pr||(pr={}));class qb{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){const s=t.getUint8(1),a=t.getUint8(2);let l=this.HEADER_LENGTH+2;const u=i.decode(e.slice(l,l+s));l=l+s;const f=i.decode(e.slice(l,l+a));l=l+a;const m=JSON.parse(i.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:f,payload:m}}}class Ef{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(De||(De={}));const Fu=(n,e,t={})=>{var i;const s=(i=t.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=Hb(l,n,e,s),a),{}):{}},Hb=(n,e,t,i)=>{const s=e.find(u=>u.name===n),a=s==null?void 0:s.type,l=t[n];return a&&!i.includes(a)?Cf(a,l):gl(l)},Cf=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Jb(e,t)}switch(n){case De.bool:return Vb(e);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return Gb(e);case De.json:case De.jsonb:return Kb(e);case De.timestamp:return Yb(e);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return gl(e);default:return gl(e)}},gl=n=>n,Vb=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Gb=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Kb=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Jb=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let a;const l=n.slice(1,t);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>Cf(e,u))}return n},Yb=n=>typeof n=="string"?n.replace(" ","T"):n,jf=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Ma{constructor(e,t,i={},s=ml){this.channel=e,this.event=t,this.payload=i,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Uu;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Uu||(Uu={}));class Yi{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yi.syncState(this.state,s,a,l),this.pendingDiffs.forEach(f=>{this.state=Yi.syncDiff(this.state,f,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(i.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Yi.syncDiff(this.state,s,a,l),u())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,s){const a=this.cloneDeep(e),l=this.transformState(t),u={},f={};return this.map(a,(m,p)=>{l[m]||(f[m]=p)}),this.map(l,(m,p)=>{const v=a[m];if(v){const S=p.map(w=>w.presence_ref),_=v.map(w=>w.presence_ref),T=p.filter(w=>_.indexOf(w.presence_ref)<0),y=v.filter(w=>S.indexOf(w.presence_ref)<0);T.length>0&&(u[m]=T),y.length>0&&(f[m]=y)}else u[m]=p}),this.syncDiff(a,{joins:u,leaves:f},i,s)}static syncDiff(e,t,i,s){const{joins:a,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),s||(s=()=>{}),this.map(a,(u,f)=>{var m;const p=(m=e[u])!==null&&m!==void 0?m:[];if(e[u]=this.cloneDeep(f),p.length>0){const v=e[u].map(_=>_.presence_ref),S=p.filter(_=>v.indexOf(_.presence_ref)<0);e[u].unshift(...S)}i(u,p,f)}),this.map(l,(u,f)=>{let m=e[u];if(!m)return;const p=f.map(v=>v.presence_ref);m=m.filter(v=>p.indexOf(v.presence_ref)<0),e[u]=m,s(u,m,f),m.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const s=e[i];return"metas"in s?t[i]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[i]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Zu;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Zu||(Zu={}));var Qi;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Qi||(Qi={}));var Tn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Tn||(Tn={}));class ec{constructor(e,t={config:{}},i){var s,a;if(this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=Qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ma(this,Ut.join,this.params,this.timeout),this.rejoinTimer=new Ef(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qe.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ut.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Yi(this),this.broadcastEndpointURL=jf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var i,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Qe.closed){const{config:{broadcast:l,presence:u,private:f}}=this.params,m=(s=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(_=>_.filter))!==null&&s!==void 0?s:[],p=!!this.bindings[Qi.PRESENCE]&&this.bindings[Qi.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,v={},S={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:m,private:f};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(_=>e==null?void 0:e(Tn.CHANNEL_ERROR,_)),this._onClose(()=>e==null?void 0:e(Tn.CLOSED)),this.updateJoinPayload(Object.assign({config:S},v)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:_})=>{var T;if(this.socket.setAuth(),_===void 0){e==null||e(Tn.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(T=y==null?void 0:y.length)!==null&&T!==void 0?T:0,k=[];for(let C=0;C<w;C++){const P=y[C],{filter:{event:j,schema:N,table:R,filter:M}}=P,U=_&&_[C];if(U&&U.event===j&&U.schema===N&&U.table===R&&U.filter===M)k.push(Object.assign(Object.assign({},P),{id:U.id}));else{this.unsubscribe(),this.state=Qe.errored,e==null||e(Tn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(Tn.SUBSCRIBED);return}}).receive("error",_=>{this.state=Qe.errored,e==null||e(Tn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Tn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this.state===Qe.joined&&e===Qi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,i)}async send(e,t={}){var i,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,f;const m=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Qe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ut.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(s=>{i=new Ma(this,Ut.leave,{},e),i.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qe.closed,this.bindings={}}async _fetchWithTimeout(e,t,i){const s=new AbortController,a=setTimeout(()=>s.abort(),i),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(a),l}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ma(this,e,t,i);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Wb){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var s,a;const l=e.toLocaleLowerCase(),{close:u,error:f,leave:m,join:p}=Ut;if(i&&[u,f,m,p].indexOf(l)>=0&&i!==this._joinRef())return;let S=this._onMessage(l,t,i);if(t&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(_=>{var T,y,w;return((T=_.filter)===null||T===void 0?void 0:T.event)==="*"||((w=(y=_.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===l}).map(_=>_.callback(S,i)):(a=this.bindings[l])===null||a===void 0||a.filter(_=>{var T,y,w,k,C,P;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in _){const j=_.id,N=(T=_.filter)===null||T===void 0?void 0:T.event;return j&&((y=t.ids)===null||y===void 0?void 0:y.includes(j))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const j=(C=(k=_==null?void 0:_.filter)===null||k===void 0?void 0:k.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return j==="*"||j===((P=t==null?void 0:t.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===l}).map(_=>{if(typeof S=="object"&&"ids"in S){const T=S.data,{schema:y,table:w,commit_timestamp:k,type:C,errors:P}=T;S=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:k,eventType:C,new:{},old:{},errors:P}),this._getPayloadRecords(T))}_.callback(S,i)})}_isClosed(){return this.state===Qe.closed}_isJoined(){return this.state===Qe.joined}_isJoining(){return this.state===Qe.joining}_isLeaving(){return this.state===Qe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const s=e.toLocaleLowerCase(),a={type:s,filter:t,callback:i};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===i&&ec.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ut.close,{},e)}_onError(e){this._on(Ut.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Fu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Fu(e.columns,e.old_record)),t}}const Da=()=>{},Js={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Qb=[1e3,2e3,5e3,1e4],Xb=1e4,ex=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class tx{constructor(e,t){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ml,this.transport=null,this.heartbeatIntervalMs=Js.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Da,this.ref=0,this.reconnectTimer=null,this.logger=Da,this.conn=null,this.sendBuffer=[],this.serializer=new qb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>ps(async()=>{const{default:u}=await Promise.resolve().then(()=>Ti);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((i=t==null?void 0:t.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${pl.websocket}`,this.httpEndpoint=jf(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Bb.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ub}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ji.connecting:return pr.Connecting;case Ji.open:return pr.Open;case Ji.closing:return pr.Closing;default:return pr.Closed}}isConnected(){return this.connectionState()===pr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const i=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===i);if(s)return s;{const a=new ec(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:i,payload:s,ref:a}=e,l=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${t} ${i} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Zb,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Js.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:s,payload:a,ref:l}=t,u=l?`(${l})`:"",f=a.status||"";this.log("receive",`${f} ${i} ${s} ${u}`.trim(),a),this.channels.filter(m=>m._isMember(i)).forEach(m=>m._trigger(s,a,l)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ut.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${i}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([ex],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const s={access_token:t,version:Fb};t&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(Ut.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Ef(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Js.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,i,s,a,l,u,f,m,p;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:ml,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Js.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:Da,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e==null?void 0:e.reconnectAfterMs)!==null&&f!==void 0?f:v=>Qb[v-1]||Xb,this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:(v,S)=>S(JSON.stringify(v)),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class tc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ye(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class nx extends tc{constructor(e,t,i){super(e),this.name="StorageApiError",this.status=t,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vl extends tc{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var rx=function(n,e,t,i){function s(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(p){try{m(i.next(p))}catch(v){l(v)}}function f(p){try{m(i.throw(p))}catch(v){l(v)}}function m(p){p.done?a(p.value):s(p.value).then(u,f)}m((i=i.apply(n,e||[])).next())})};const Af=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ps(async()=>{const{default:i}=await Promise.resolve().then(()=>Ti);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},ix=()=>rx(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ps(()=>Promise.resolve().then(()=>Ti),void 0)).Response:Response}),_l=n=>{if(Array.isArray(n))return n.map(t=>_l(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const s=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=_l(i)}),e},sx=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ar=function(n,e,t,i){function s(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(p){try{m(i.next(p))}catch(v){l(v)}}function f(p){try{m(i.throw(p))}catch(v){l(v)}}function m(p){p.done?a(p.value):s(p.value).then(u,f)}m((i=i.apply(n,e||[])).next())})};const $a=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),ox=(n,e,t)=>Ar(void 0,void 0,void 0,function*(){const i=yield ix();n instanceof i&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{const a=n.status||500,l=(s==null?void 0:s.statusCode)||a+"";e(new nx($a(s),a,l))}).catch(s=>{e(new vl($a(s),s))}):e(new vl($a(n),n))}),ax=(n,e,t,i)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!i?s:(sx(i)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(i)):s.body=i,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function vs(n,e,t,i,s,a){return Ar(this,void 0,void 0,function*(){return new Promise((l,u)=>{n(t,ax(e,i,s,a)).then(f=>{if(!f.ok)throw f;return i!=null&&i.noResolveJson?f:f.json()}).then(f=>l(f)).catch(f=>ox(f,u,i))})})}function vo(n,e,t,i){return Ar(this,void 0,void 0,function*(){return vs(n,"GET",e,t,i)})}function sn(n,e,t,i,s){return Ar(this,void 0,void 0,function*(){return vs(n,"POST",e,i,s,t)})}function yl(n,e,t,i,s){return Ar(this,void 0,void 0,function*(){return vs(n,"PUT",e,i,s,t)})}function lx(n,e,t,i){return Ar(this,void 0,void 0,function*(){return vs(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function Of(n,e,t,i,s){return Ar(this,void 0,void 0,function*(){return vs(n,"DELETE",e,i,s,t)})}var cx=function(n,e,t,i){function s(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(p){try{m(i.next(p))}catch(v){l(v)}}function f(p){try{m(i.throw(p))}catch(v){l(v)}}function m(p){p.done?a(p.value):s(p.value).then(u,f)}m((i=i.apply(n,e||[])).next())})};class ux{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return cx(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ye(e))return{data:null,error:e};throw e}})}}var dx=function(n,e,t,i){function s(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(p){try{m(i.next(p))}catch(v){l(v)}}function f(p){try{m(i.throw(p))}catch(v){l(v)}}function m(p){p.done?a(p.value):s(p.value).then(u,f)}m((i=i.apply(n,e||[])).next())})},Nf;class hx{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Nf]="BlobDownloadBuilder",this.promise=null}asStream(){return new ux(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return dx(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ye(e))return{data:null,error:e};throw e}})}}Nf=Symbol.toStringTag;var mt=function(n,e,t,i){function s(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(p){try{m(i.next(p))}catch(v){l(v)}}function f(p){try{m(i.throw(p))}catch(v){l(v)}}function m(p){p.done?a(p.value):s(p.value).then(u,f)}m((i=i.apply(n,e||[])).next())})};const fx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class mx{constructor(e,t={},i,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=i,this.fetch=Af(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,i,s){return mt(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},Wu),s);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const f=l.metadata;typeof Blob<"u"&&i instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),f&&a.append("metadata",this.encodeMetadata(f)),a.append("",i)):typeof FormData<"u"&&i instanceof FormData?(a=i,a.append("cacheControl",l.cacheControl),f&&a.append("metadata",this.encodeMetadata(f))):(a=i,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,f&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(t),p=this._getFinalPath(m),v=yield(e=="PUT"?yl:sn)(this.fetch,`${this.url}/object/${p}`,a,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:v.Id,fullPath:v.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ye(a))return{data:null,error:a};throw a}})}upload(e,t,i){return mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,s){return mt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let f;const m=Object.assign({upsert:Wu.upsert},s),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&i instanceof Blob?(f=new FormData,f.append("cacheControl",m.cacheControl),f.append("",i)):typeof FormData<"u"&&i instanceof FormData?(f=i,f.append("cacheControl",m.cacheControl)):(f=i,p["cache-control"]=`max-age=${m.cacheControl}`,p["content-type"]=m.contentType);const v=yield yl(this.fetch,u.toString(),f,{headers:p});return{data:{path:a,fullPath:v.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Ye(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,t){return mt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const a=yield sn(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:s}),l=new URL(this.url+a.url),u=l.searchParams.get("token");if(!u)throw new tc("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}update(e,t,i){return mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return mt(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}copy(e,t,i){return mt(this,void 0,void 0,function*(){try{return{data:{path:(yield sn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,i){return mt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield sn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,i){return mt(this,void 0,void 0,function*(){try{const s=yield sn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}download(e,t){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),l=a?`?${a}`:"",u=this._getFinalPath(e),f=()=>vo(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new hx(f,this.shouldThrowOnError)}info(e){return mt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const i=yield vo(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:_l(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}exists(e){return mt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield lx(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i)&&i instanceof vl){const s=i.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){const i=this._getFinalPath(e),s=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&s.push(a);const u=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});f!==""&&s.push(f);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${i}${m}`)}}}remove(e){return mt(this,void 0,void 0,function*(){try{return{data:yield Of(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ye(t))return{data:null,error:t};throw t}})}list(e,t,i){return mt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},fx),t),{prefix:e||""});return{data:yield sn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},i),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}listV2(e,t){return mt(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield sn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},t),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const px="2.75.1",gx={"X-Client-Info":`storage-js/${px}`};var Wr=function(n,e,t,i){function s(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(p){try{m(i.next(p))}catch(v){l(v)}}function f(p){try{m(i.throw(p))}catch(v){l(v)}}function m(p){p.done?a(p.value):s(p.value).then(u,f)}m((i=i.apply(n,e||[])).next())})};class vx{constructor(e,t={},i,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},gx),t),this.fetch=Af(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Wr(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ye(e))return{data:null,error:e};throw e}})}getBucket(e){return Wr(this,void 0,void 0,function*(){try{return{data:yield vo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ye(t))return{data:null,error:t};throw t}})}createBucket(e){return Wr(this,arguments,void 0,function*(t,i={public:!1}){try{return{data:yield sn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Wr(this,void 0,void 0,function*(){try{return{data:yield yl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Wr(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ye(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Wr(this,void 0,void 0,function*(){try{return{data:yield Of(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ye(t))return{data:null,error:t};throw t}})}}class _x extends vx{constructor(e,t={},i,s){super(e,t,i,s)}from(e){return new mx(this.url,this.headers,e,this.fetch)}}const yx="2.75.1";let Hi="";typeof Deno<"u"?Hi="deno":typeof document<"u"?Hi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Hi="react-native":Hi="node";const wx={"X-Client-Info":`supabase-js-${Hi}/${yx}`},bx={headers:wx},xx={schema:"public"},Sx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kx={};var Tx=function(n,e,t,i){function s(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(p){try{m(i.next(p))}catch(v){l(v)}}function f(p){try{m(i.throw(p))}catch(v){l(v)}}function m(p){p.done?a(p.value):s(p.value).then(u,f)}m((i=i.apply(n,e||[])).next())})};const Px=n=>{let e;return n?e=n:typeof fetch>"u"?e=gf:e=fetch,(...t)=>e(...t)},Ex=()=>typeof Headers>"u"?vf:Headers,Cx=(n,e,t)=>{const i=Px(t),s=Ex();return(a,l)=>Tx(void 0,void 0,void 0,function*(){var u;const f=(u=yield e())!==null&&u!==void 0?u:n;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",n),m.has("Authorization")||m.set("Authorization",`Bearer ${f}`),i(a,Object.assign(Object.assign({},l),{headers:m}))})};var jx=function(n,e,t,i){function s(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(p){try{m(i.next(p))}catch(v){l(v)}}function f(p){try{m(i.throw(p))}catch(v){l(v)}}function m(p){p.done?a(p.value):s(p.value).then(u,f)}m((i=i.apply(n,e||[])).next())})};function Ax(n){return n.endsWith("/")?n:n+"/"}function Ox(n,e){var t,i;const{db:s,auth:a,realtime:l,global:u}=n,{db:f,auth:m,realtime:p,global:v}=e,S={db:Object.assign(Object.assign({},f),s),auth:Object.assign(Object.assign({},m),a),realtime:Object.assign(Object.assign({},p),l),storage:{},global:Object.assign(Object.assign(Object.assign({},v),u),{headers:Object.assign(Object.assign({},(t=v==null?void 0:v.headers)!==null&&t!==void 0?t:{}),(i=u==null?void 0:u.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>jx(this,void 0,void 0,function*(){return""})};return n.accessToken?S.accessToken=n.accessToken:delete S.accessToken,S}function Nx(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ax(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Rf="2.75.1",Xr=30*1e3,wl=3,Ba=wl*Xr,Rx="http://localhost:9999",Lx="supabase.auth.token",Ix={"X-Client-Info":`gotrue-js/${Rf}`},bl="X-Supabase-Api-Version",Lf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Mx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Dx=10*60*1e3;class is extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function ne(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class $x extends is{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function Bx(n){return ne(n)&&n.name==="AuthApiError"}class gr extends is{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class nr extends is{constructor(e,t,i,s){super(e,i,s),this.name=t,this.status=i}}class Fn extends nr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function zx(n){return ne(n)&&n.name==="AuthSessionMissingError"}class qr extends nr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ys extends nr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Qs extends nr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Fx(n){return ne(n)&&n.name==="AuthImplicitGrantRedirectError"}class qu extends nr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xl extends nr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function za(n){return ne(n)&&n.name==="AuthRetryableFetchError"}class Hu extends nr{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class Sl extends nr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Vu=` 	
\r=`.split(""),Ux=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Vu.length;e+=1)n[Vu[e].charCodeAt(0)]=-2;for(let e=0;e<_o.length;e+=1)n[_o[e].charCodeAt(0)]=e;return n})();function Gu(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(_o[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(_o[i]),e.queuedBits-=6}}function If(n,e,t){const i=Ux[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Ku(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{qx(l,i,t)};for(let l=0;l<n.length;l+=1)If(n.charCodeAt(l),s,a);return e.join("")}function Zx(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Wx(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){const s=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}Zx(i,e)}}function qx(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if(!(n>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ii(n){const e=[],t={queue:0,queuedBits:0},i=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)If(n.charCodeAt(s),t,i);return new Uint8Array(e)}function Hx(n){const e=[];return Wx(n,t=>e.push(t)),new Uint8Array(e)}function vr(n){const e=[],t={queue:0,queuedBits:0},i=s=>{e.push(s)};return n.forEach(s=>Gu(s,t,i)),Gu(null,t,i),e.join("")}function Vx(n){return Math.round(Date.now()/1e3)+n}function Gx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const wt=()=>typeof window<"u"&&typeof document<"u",hr={tested:!1,writable:!1},Mf=()=>{if(!wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hr.tested)return hr.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),hr.tested=!0,hr.writable=!0}catch{hr.tested=!0,hr.writable=!1}return hr.writable};function Kx(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return t.searchParams.forEach((i,s)=>{e[s]=i}),e}const Df=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ps(async()=>{const{default:i}=await Promise.resolve().then(()=>Ti);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},Jx=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ei=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},fr=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Bn=async(n,e)=>{await n.removeItem(e)};class Ho{constructor(){this.promise=new Ho.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ho.promiseConstructor=Promise;function Fa(n){const e=n.split(".");if(e.length!==3)throw new Sl("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!Mx.test(e[i]))throw new Sl("JWT not in base64url format");return{header:JSON.parse(Ku(e[0])),payload:JSON.parse(Ku(e[1])),signature:ii(e[2]),raw:{header:e[0],payload:e[1]}}}async function Yx(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Qx(n,e){return new Promise((i,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await n(a);if(!e(a,null,l)){i(l);return}}catch(l){if(!e(a,l)){s(l);return}}})()})}function Xx(n){return("0"+n.toString(16)).substr(-2)}function e0(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let s="";for(let a=0;a<56;a++)s+=t.charAt(Math.floor(Math.random()*i));return s}return crypto.getRandomValues(e),Array.from(e,Xx).join("")}async function t0(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(i);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function n0(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await t0(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hr(n,e,t=!1){const i=e0();let s=i;t&&(s+="/PASSWORD_RECOVERY"),await ei(n,`${e}-code-verifier`,s);const a=await n0(i);return[a,i===a?"plain":"s256"]}const r0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function i0(n){const e=n.headers.get(bl);if(!e||!e.match(r0))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function s0(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function o0(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const a0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vr(n){if(!a0.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ua(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ju(n){return JSON.parse(JSON.stringify(n))}var l0=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t};const mr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),c0=[502,503,504];async function Yu(n){var e;if(!Jx(n))throw new xl(mr(n),0);if(c0.includes(n.status))throw new xl(mr(n),n.status);let t;try{t=await n.json()}catch(a){throw new gr(mr(a),a)}let i;const s=i0(n);if(s&&s.getTime()>=Lf["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new Hu(mr(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Fn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Hu(mr(t),n.status,t.weak_password.reasons);throw new $x(mr(t),n.status||500,i)}const u0=(n,e,t,i)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(i),Object.assign(Object.assign({},s),t))};async function he(n,e,t,i){var s;const a=Object.assign({},i==null?void 0:i.headers);a[bl]||(a[bl]=Lf["2024-01-01"].name),i!=null&&i.jwt&&(a.Authorization=`Bearer ${i.jwt}`);const l=(s=i==null?void 0:i.query)!==null&&s!==void 0?s:{};i!=null&&i.redirectTo&&(l.redirect_to=i.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",f=await d0(n,e,t+u,{headers:a,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(f):{data:Object.assign({},f),error:null}}async function d0(n,e,t,i,s,a){const l=u0(e,i,s,a);let u;try{u=await n(t,Object.assign({},l))}catch(f){throw console.error(f),new xl(mr(f),0)}if(u.ok||await Yu(u),i!=null&&i.noResolveJson)return u;try{return await u.json()}catch(f){await Yu(f)}}function $t(n){var e;let t=null;m0(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Vx(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function Qu(n){const e=$t(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Wn(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function h0(n){return{data:n,error:null}}function f0(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:s,verification_type:a}=n,l=l0(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:i,redirect_to:s,verification_type:a},f=Object.assign({},l);return{data:{properties:u,user:f},error:null}}function Xu(n){return n}function m0(n){return n.access_token&&n.refresh_token&&n.expires_in}const Za=["global","local","others"];var p0=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t};class g0{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=Df(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Za[0]){if(Za.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Za.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Wn})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=p0(e,["options"]),s=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(s.new_email=i==null?void 0:i.newEmail,delete s.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:f0,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ne(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wn})}catch(t){if(ne(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,s,a,l,u,f;try{const m={nextPage:null,lastPage:0,total:0},p=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Xu});if(p.error)throw p.error;const v=await p.json(),S=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,_=(f=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(T=>{const y=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(T.split(";")[1].split("=")[1]);m[`${w}Page`]=y}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(ne(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){Vr(e);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wn})}catch(t){if(ne(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Vr(e);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Wn})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){Vr(e);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Wn})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Vr(e.userId);try{const{data:t,error:i}=await he(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:i}}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Vr(e.userId),Vr(e.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,i,s,a,l,u,f;try{const m={nextPage:null,lastPage:0,total:0},p=await he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Xu});if(p.error)throw p.error;const v=await p.json(),S=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,_=(f=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(T=>{const y=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(T.split(";")[1].split("=")[1]);m[`${w}Page`]=y}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(ne(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}}function ed(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Gr={debug:!!(globalThis&&Mf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $f extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class v0 extends $f{}async function _0(n,e,t){Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async s=>{if(s){Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new v0(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Gr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function y0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Bf(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function w0(n){return parseInt(n,16)}function b0(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function x0(n){var e;const{chainId:t,domain:i,expirationTime:s,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:f,resources:m,scheme:p,uri:v,version:S}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const _=Bf(n.address),T=p?`${p}://${i}`:i,y=n.statement?`${n.statement}
`:"",w=`${T} wants you to sign in with your Ethereum account:
${_}

${y}`;let k=`URI: ${v}
Version: ${S}
Chain ID: ${t}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(s&&(k+=`
Expiration Time: ${s.toISOString()}`),u&&(k+=`
Not Before: ${u.toISOString()}`),f&&(k+=`
Request ID: ${f}`),m){let C=`
Resources:`;for(const P of m){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);C+=`
- ${P}`}k+=C}return`${w}
${k}`}class Je extends Error{constructor({message:e,code:t,cause:i,name:s}){var a;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(a=s??(i instanceof Error?i.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=t}}class yo extends Je{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function S0({error:n,options:e}){var t,i,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Je({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=a.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Je({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Je({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Je({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Je({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Je({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Je({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Je({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const l=window.location.hostname;if(Ff(l)){if(a.rp.id!==l)return new Je({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Je({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Je({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function k0({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Je({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Je({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(Ff(i)){if(t.rpId!==i)return new Je({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Je({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var zf=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t};class T0{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const P0=new T0;function E0(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:i}=n,s=zf(n,["challenge","user","excludeCredentials"]),a=ii(e).buffer,l=Object.assign(Object.assign({},t),{id:ii(t.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:a,user:l});if(i&&i.length>0){u.excludeCredentials=new Array(i.length);for(let f=0;f<i.length;f++){const m=i[f];u.excludeCredentials[f]=Object.assign(Object.assign({},m),{id:ii(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function C0(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,i=zf(n,["challenge","allowCredentials"]),s=ii(e).buffer,a=Object.assign(Object.assign({},i),{challenge:s});if(t&&t.length>0){a.allowCredentials=new Array(t.length);for(let l=0;l<t.length;l++){const u=t[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:ii(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function j0(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:vr(new Uint8Array(n.response.attestationObject)),clientDataJSON:vr(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function A0(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,i=n.getClientExtensionResults(),s=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:vr(new Uint8Array(s.authenticatorData)),clientDataJSON:vr(new Uint8Array(s.clientDataJSON)),signature:vr(new Uint8Array(s.signature)),userHandle:s.userHandle?vr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ff(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function td(){var n,e;return!!(wt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function O0(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new yo("Browser returned unexpected credential type",e)}:{data:null,error:new yo("Empty credential response",e)}}catch(e){return{data:null,error:S0({error:e,options:n})}}}async function N0(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new yo("Browser returned unexpected credential type",e)}:{data:null,error:new yo("Empty credential response",e)}}catch(e){return{data:null,error:k0({error:e,options:n})}}}const R0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},L0={userVerification:"preferred",hints:["security-key"]};function wo(...n){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),t=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),i={};for(const s of n)if(s)for(const a in s){const l=s[a];if(l!==void 0)if(Array.isArray(l))i[a]=l;else if(t(l))i[a]=l;else if(e(l)){const u=i[a];e(u)?i[a]=wo(u,l):i[a]=wo(l)}else i[a]=l}return i}function I0(n,e){return wo(R0,n,e||{})}function M0(n,e){return wo(L0,n,e||{})}class D0{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:i,signal:s},a){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!l)return{data:null,error:u};const f=s??P0.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${i}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=I0(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:p,error:v}=await O0({publicKey:m,signal:f});return p?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:p}},error:null}:{data:null,error:v}}case"request":{const m=M0(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:p,error:v}=await N0(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:f}));return p?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:p}},error:null}:{data:null,error:v}}}}catch(l){return ne(l)?{data:null,error:l}:{data:null,error:new gr("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:t,webauthn:i}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s}},a){if(!t)return{data:null,error:new is("rpId is required for WebAuthn authentication")};try{if(!td())return{data:null,error:new gr("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:i},signal:s},{request:a});if(!l)return{data:null,error:u};const{webauthn:f}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:f.type,rpId:t,rpOrigins:i,credential_response:f.credential_response}})}catch(l){return ne(l)?{data:null,error:l}:{data:null,error:new gr("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s},a){if(!t)return{data:null,error:new is("rpId is required for WebAuthn registration")};try{if(!td())return{data:null,error:new gr("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(p=>{var v;return(v=p.data)===null||v===void 0?void 0:v.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:u};const{data:f,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:t,rpOrigins:i},signal:s},{create:a});return f?this._verify({factorId:l.id,challengeId:f.challengeId,webauthn:{rpId:t,rpOrigins:i,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:m}}catch(l){return ne(l)?{data:null,error:l}:{data:null,error:new gr("Unexpected error in register",l)}}}}y0();const $0={url:Rx,storageKey:Lx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ix,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function nd(n,e,t){return await t()}const Kr={};class ss{get jwks(){var e,t;return(t=(e=Kr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Kr[this.storageKey]=Object.assign(Object.assign({},Kr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Kr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Kr[this.storageKey]=Object.assign(Object.assign({},Kr[this.storageKey]),{cachedAt:e})}constructor(e){var t,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ss.nextInstanceID,ss.nextInstanceID+=1,this.instanceID>0&&wt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},$0),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new g0({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Df(s.fetch),this.lock=s.lock||nd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:wt()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=_0:this.lock=nd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new D0(this)},this.persistSession?(s.storage?this.storage=s.storage:Mf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ed(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ed(this.memoryStorage)),wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Rf}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Kx(window.location.href);let i="none";if(this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce"),wt()&&this.detectSessionInUrl&&i!=="none"){const{data:s,error:a}=await this._getSessionFromURL(t,i);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Fx(a)){const f=(e=a.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ne(t)?{error:t}:{error:new gr("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,s;try{const a=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:$t}),{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const f=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,i,s;try{let a;if("email"in e){const{email:p,password:v,options:S}=e;let _=null,T=null;this.flowType==="pkce"&&([_,T]=await Hr(this.storage,this.storageKey)),a=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:p,password:v,data:(t=S==null?void 0:S.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:_,code_challenge_method:T},xform:$t})}else if("phone"in e){const{phone:p,password:v,options:S}=e;a=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:v,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},channel:(s=S==null?void 0:S.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:$t})}else throw new Ys("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const f=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:l,options:u}=e;t=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Qu})}else if("phone"in e){const{phone:a,password:l,options:u}=e;t=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Qu})}else throw new Ys("You must provide either an email or phone number and a password");const{data:i,error:s}=t;return s?{data:{user:null,session:null},error:s}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new qr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,i,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,i,s,a,l,u,f,m,p,v,S;let _,T;if("message"in e)_=e.message,T=e.signature;else{const{chain:y,wallet:w,statement:k,options:C}=e;let P;if(wt())if(typeof w=="object")P=w;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")P=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=w}const j=new URL((t=C==null?void 0:C.url)!==null&&t!==void 0?t:window.location.href),N=await P.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=Bf(N[0]);let M=(i=C==null?void 0:C.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!M){const q=await P.request({method:"eth_chainId"});M=w0(q)}const U={domain:j.host,address:R,statement:k,uri:j.href,version:"1",chainId:M,nonce:(s=C==null?void 0:C.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(a=C==null?void 0:C.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=C==null?void 0:C.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=C==null?void 0:C.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(m=C==null?void 0:C.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(p=C==null?void 0:C.signInWithEthereum)===null||p===void 0?void 0:p.resources};_=x0(U),T=await P.request({method:"personal_sign",params:[b0(_),R]})}try{const{data:y,error:w}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:T},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:$t});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new qr}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(ne(y))return{data:{user:null,session:null},error:y};throw y}}async signInWithSolana(e){var t,i,s,a,l,u,f,m,p,v,S,_;let T,y;if("message"in e)T=e.message,y=e.signature;else{const{chain:w,wallet:k,statement:C,options:P}=e;let j;if(wt())if(typeof k=="object")j=k;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))j=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(P!=null&&P.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=k}const N=new URL((t=P==null?void 0:P.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in j&&j.signIn){const R=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P==null?void 0:P.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),C?{statement:C}:null));let M;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")M=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)M=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)T=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),y=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${N.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(i=P==null?void 0:P.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=P==null?void 0:P.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((l=P==null?void 0:P.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((u=P==null?void 0:P.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((f=P==null?void 0:P.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((m=P==null?void 0:P.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((v=(p=P==null?void 0:P.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||v===void 0)&&v.length?["Resources",...P.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const R=await j.signMessage(new TextEncoder().encode(T),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=R}}try{const{data:w,error:k}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:vr(y)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:$t});if(k)throw k;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new qr}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:k})}catch(w){if(ne(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const t=await fr(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(t??"").split("/");try{const{data:a,error:l}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:$t});if(await Bn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new qr}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(ne(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:i,token:s,access_token:a,nonce:l}=e,u=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:$t}),{data:f,error:m}=u;return m?{data:{user:null,session:null},error:m}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new qr}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:m})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,i,s,a,l;try{if("email"in e){const{email:u,options:f}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Hr(this.storage,this.storageKey));const{error:v}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},create_user:(i=f==null?void 0:f.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:u,options:f}=e,{data:m,error:p}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(a=f==null?void 0:f.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(l=f==null?void 0:f.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:p}}throw new Ys("You must provide either an email or phone number.")}catch(u){if(ne(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var t,i;try{let s,a;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:l,error:u}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:$t});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const f=l.session,m=l.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,i,s;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Hr(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:h0})}catch(a){if(ne(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new Fn;const{error:s}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ne(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:s,options:a}=e,{error:l}=await he(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:i,type:s,options:a}=e,{data:l,error:u}=await he(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Ys("You must provide either an email or phone number and a type")}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await fr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Ba:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const l=await fr(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=Ua()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,m,p)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,m,p))})}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wn}):await this._useSession(async t=>{var i,s,a;const{data:l,error:u}=t;if(u)throw u;return!(!((i=l.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fn}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Wn})})}catch(t){if(ne(t))return zx(t)&&(await this._removeSession(),await Bn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:s,error:a}=i;if(a)throw a;if(!s.session)throw new Fn;const l=s.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await Hr(this.storage,this.storageKey));const{data:m,error:p}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:l.access_token,xform:Wn});if(p)throw p;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fn;const t=Date.now()/1e3;let i=t,s=!0,a=null;const{payload:l}=Fa(e.access_token);if(l.exp&&(i=l.exp,s=i<=t),s){const{data:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)throw f;a={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(ne(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:l,error:u}=t;if(u)throw u;e=(i=l.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new Fn;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!wt())throw new Qs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Qs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new qu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qs("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new qu("No code detected.");const{data:C,error:P}=await this._exchangeCodeForSession(e.code);if(P)throw P;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:u,expires_at:f,token_type:m}=e;if(!a||!u||!l||!m)throw new Qs("No session defined in URL");const p=Math.round(Date.now()/1e3),v=parseInt(u);let S=p+v;f&&(S=parseInt(f));const _=S-p;_*1e3<=Xr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${v}s`);const T=S-v;p-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,S,p):p-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,S,p);const{data:y,error:w}=await this._getUser(a);if(w)throw w;const k={provider_token:i,provider_refresh_token:s,access_token:a,expires_in:v,expires_at:S,refresh_token:l,token_type:m,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:e.type},error:null}}catch(i){if(ne(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await fr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:s,error:a}=t;if(a)return{error:a};const l=(i=s.session)===null||i===void 0?void 0:i.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(Bx(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await Bn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Gx(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,s;try{const{data:{session:a},error:l}=t;if(l)throw l;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=await Hr(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(ne(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(ne(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:i,error:s}=await this._useSession(async a=>{var l,u,f,m,p;const{data:v,error:S}=a;if(S)throw S;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",_,{headers:this.headers,jwt:(p=(m=v.session)===null||m===void 0?void 0:m.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return wt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(ne(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var i;try{const{error:s,data:{session:a}}=t;if(s)throw s;const{options:l,provider:u,token:f,access_token:m,nonce:p}=e,v=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=a==null?void 0:a.access_token)!==null&&i!==void 0?i:void 0,body:{provider:u,id_token:f,access_token:m,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:$t}),{data:S,error:_}=v;return _?{data:{user:null,session:null},error:_}:!S||!S.session||!S.user?{data:{user:null,session:null},error:new qr}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),{data:S,error:_})}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,s;const{data:a,error:l}=t;if(l)throw l;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await Qx(async s=>(s>0&&await Yx(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:$t})),(s,a)=>{const l=200*Math.pow(2,s);return a&&za(a)&&Date.now()+l-i<Xr})}catch(i){if(this._debug(t,"error",i),ne(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),wt()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const s=await fr(this.storage,this.storageKey);if(s&&this.userStorage){let l=await fr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await ei(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:Ua()}else if(s&&!s.user&&!s.user){const l=await fr(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Bn(this.storage,this.storageKey+"-user"),await ei(this.storage,this.storageKey,s)):s.user=Ua()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&await this._removeSession();return}const a=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ba;if(this._debug(i,`session has${a?"":" not"} expired with margin of ${Ba}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),za(l)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new Fn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ho;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new Fn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(s,"error",a),ne(a)){const l={data:null,error:a};return za(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,i=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(f){a.push(f)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await ei(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const a=Ju(s);await ei(this.storage,this.storageKey,a)}else{const s=Ju(t);await ei(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Bn(this.storage,this.storageKey),await Bn(this.storage,this.storageKey+"-code-verifier"),await Bn(this.storage,this.storageKey+"-user"),this.userStorage&&await Bn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&wt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Xr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((i.expires_at*1e3-e)/Xr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Xr}ms, refresh threshold is ${wl} ticks`),s<=wl&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof $f)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const s=[`provider=${encodeURIComponent(t)}`];if(i!=null&&i.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[a,l]=await Hr(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(i!=null&&i.queryParams){const a=new URLSearchParams(i.queryParams);s.push(a.toString())}return i!=null&&i.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:s,error:a}=t;return a?{data:null,error:a}:await he(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,s;const{data:a,error:l}=t;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:m}=await he(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&f.type==="totp"&&(!((s=f==null?void 0:f.totp)===null||s===void 0)&&s.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(t){if(ne(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:s,error:a}=t;if(a)return{data:null,error:a};const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?j0(e.webauthn.credential_response):A0(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:f}=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:f})})}catch(t){if(ne(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:s,error:a}=t;if(a)return{data:null,error:a};const l=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:E0(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:C0(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ne(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:i}=await this.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,i;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Fa(s.access_token);let u=null;l.aal&&(u=l.aal);let f=u;((i=(t=s.user.factors)===null||t===void 0?void 0:t.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(u=>u.kid===e);if(i)return i;const s=Date.now();if(i=this.jwks.keys.find(u=>u.kid===e),i&&this.jwks_cached_at+Dx>s)return i;const{data:a,error:l}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,i=a.keys.find(u=>u.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:_,error:T}=await this.getSession();if(T||!_.session)return{data:null,error:T};i=_.session.access_token}const{header:s,payload:a,signature:l,raw:{header:u,payload:f}}=Fa(i);t!=null&&t.allowExpired||s0(a.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!m){const{error:_}=await this.getUser(i);if(_)throw _;return{data:{claims:a,header:s,signature:l},error:null}}const p=o0(s.alg),v=await crypto.subtle.importKey("jwk",m,p,!0,["verify"]);if(!await crypto.subtle.verify(p,v,l,Hx(`${u}.${f}`)))throw new Sl("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}}ss.nextInstanceID=0;const B0=ss;class z0 extends B0{constructor(e){super(e)}}var F0=function(n,e,t,i){function s(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(p){try{m(i.next(p))}catch(v){l(v)}}function f(p){try{m(i.throw(p))}catch(v){l(v)}}function m(p){p.done?a(p.value):s(p.value).then(u,f)}m((i=i.apply(n,e||[])).next())})};class U0{constructor(e,t,i){var s,a,l;this.supabaseUrl=e,this.supabaseKey=t;const u=Nx(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const f=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:xx,realtime:kx,auth:Object.assign(Object.assign({},Sx),{storageKey:f}),global:bx},p=Ox(i??{},m);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=p.global.headers)!==null&&a!==void 0?a:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(v,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=p.auth)!==null&&l!==void 0?l:{},this.headers,p.global.fetch),this.fetch=Cx(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new $b(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new _x(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new gb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return F0(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:s,userStorage:a,storageKey:l,flowType:u,lock:f,debug:m},p,v){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new z0({url:this.authUrl.href,headers:Object.assign(Object.assign({},S),p),storageKey:l,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:s,userStorage:a,flowType:u,lock:f,debug:m,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new tx(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Z0=(n,e,t)=>new U0(n,e,t);function W0(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}W0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const q0="https://holsdtnnlcvqecyfjcph.supabase.co",H0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhvbHNkdG5ubGN2cWVjeWZqY3BoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEzMDAzODksImV4cCI6MjA3Njg3NjM4OX0.OtPkgnjpXFWNcxr-DjqHfS9BhOknFw33dYXTnaKWGBc",ue=Z0(q0,H0,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),st=b.forwardRef(({className:n,type:e,...t},i)=>d.jsx("input",{type:e,className:Fe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:i,...t}));st.displayName="Input";var V0="Label",Uf=b.forwardRef((n,e)=>d.jsx(Re.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Uf.displayName=V0;var Zf=Uf;const G0=Ro("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),it=b.forwardRef(({className:n,...e},t)=>d.jsx(Zf,{ref:t,className:Fe(G0(),n),...e}));it.displayName=Zf.displayName;var K0=b.createContext(void 0);function Wf(n){const e=b.useContext(K0);return n||e||"ltr"}var Wa="rovingFocusGroup.onEntryFocus",J0={bubbles:!1,cancelable:!0},_s="RovingFocusGroup",[kl,qf,Y0]=Wd(_s),[Q0,Hf]=Cr(_s,[Y0]),[X0,eS]=Q0(_s),Vf=b.forwardRef((n,e)=>d.jsx(kl.Provider,{scope:n.__scopeRovingFocusGroup,children:d.jsx(kl.Slot,{scope:n.__scopeRovingFocusGroup,children:d.jsx(tS,{...n,ref:e})})}));Vf.displayName=_s;var tS=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:i,loop:s=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:f,onEntryFocus:m,preventScrollOnEntryFocus:p=!1,...v}=n,S=b.useRef(null),_=ot(e,S),T=Wf(a),[y,w]=Ao({prop:l,defaultProp:u??null,onChange:f,caller:_s}),[k,C]=b.useState(!1),P=Zt(m),j=qf(t),N=b.useRef(!1),[R,M]=b.useState(0);return b.useEffect(()=>{const U=S.current;if(U)return U.addEventListener(Wa,P),()=>U.removeEventListener(Wa,P)},[P]),d.jsx(X0,{scope:t,orientation:i,dir:T,loop:s,currentTabStopId:y,onItemFocus:b.useCallback(U=>w(U),[w]),onItemShiftTab:b.useCallback(()=>C(!0),[]),onFocusableItemAdd:b.useCallback(()=>M(U=>U+1),[]),onFocusableItemRemove:b.useCallback(()=>M(U=>U-1),[]),children:d.jsx(Re.div,{tabIndex:k||R===0?-1:0,"data-orientation":i,...v,ref:_,style:{outline:"none",...n.style},onMouseDown:Ee(n.onMouseDown,()=>{N.current=!0}),onFocus:Ee(n.onFocus,U=>{const q=!N.current;if(U.target===U.currentTarget&&q&&!k){const Y=new CustomEvent(Wa,J0);if(U.currentTarget.dispatchEvent(Y),!Y.defaultPrevented){const G=j().filter(K=>K.focusable),Z=G.find(K=>K.active),be=G.find(K=>K.id===y),ye=[Z,be,...G].filter(Boolean).map(K=>K.ref.current);Jf(ye,p)}}N.current=!1}),onBlur:Ee(n.onBlur,()=>C(!1))})})}),Gf="RovingFocusGroupItem",Kf=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:i=!0,active:s=!1,tabStopId:a,children:l,...u}=n,f=Ki(),m=a||f,p=eS(Gf,t),v=p.currentTabStopId===m,S=qf(t),{onFocusableItemAdd:_,onFocusableItemRemove:T,currentTabStopId:y}=p;return b.useEffect(()=>{if(i)return _(),()=>T()},[i,_,T]),d.jsx(kl.ItemSlot,{scope:t,id:m,focusable:i,active:s,children:d.jsx(Re.span,{tabIndex:v?0:-1,"data-orientation":p.orientation,...u,ref:e,onMouseDown:Ee(n.onMouseDown,w=>{i?p.onItemFocus(m):w.preventDefault()}),onFocus:Ee(n.onFocus,()=>p.onItemFocus(m)),onKeyDown:Ee(n.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){p.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const k=iS(w,p.orientation,p.dir);if(k!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let P=S().filter(j=>j.focusable).map(j=>j.ref.current);if(k==="last")P.reverse();else if(k==="prev"||k==="next"){k==="prev"&&P.reverse();const j=P.indexOf(w.currentTarget);P=p.loop?sS(P,j+1):P.slice(j+1)}setTimeout(()=>Jf(P))}}),children:typeof l=="function"?l({isCurrentTabStop:v,hasTabStop:y!=null}):l})})});Kf.displayName=Gf;var nS={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function rS(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function iS(n,e,t){const i=rS(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return nS[i]}function Jf(n,e=!1){const t=document.activeElement;for(const i of n)if(i===t||(i.focus({preventScroll:e}),document.activeElement!==t))return}function sS(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var oS=Vf,aS=Kf,Vo="Tabs",[lS,eP]=Cr(Vo,[Hf]),Yf=Hf(),[cS,nc]=lS(Vo),Qf=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,onValueChange:s,defaultValue:a,orientation:l="horizontal",dir:u,activationMode:f="automatic",...m}=n,p=Wf(u),[v,S]=Ao({prop:i,onChange:s,defaultProp:a??"",caller:Vo});return d.jsx(cS,{scope:t,baseId:Ki(),value:v,onValueChange:S,orientation:l,dir:p,activationMode:f,children:d.jsx(Re.div,{dir:p,"data-orientation":l,...m,ref:e})})});Qf.displayName=Vo;var Xf="TabsList",em=b.forwardRef((n,e)=>{const{__scopeTabs:t,loop:i=!0,...s}=n,a=nc(Xf,t),l=Yf(t);return d.jsx(oS,{asChild:!0,...l,orientation:a.orientation,dir:a.dir,loop:i,children:d.jsx(Re.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});em.displayName=Xf;var tm="TabsTrigger",nm=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,disabled:s=!1,...a}=n,l=nc(tm,t),u=Yf(t),f=sm(l.baseId,i),m=om(l.baseId,i),p=i===l.value;return d.jsx(aS,{asChild:!0,...u,focusable:!s,active:p,children:d.jsx(Re.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":m,"data-state":p?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:f,...a,ref:e,onMouseDown:Ee(n.onMouseDown,v=>{!s&&v.button===0&&v.ctrlKey===!1?l.onValueChange(i):v.preventDefault()}),onKeyDown:Ee(n.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&l.onValueChange(i)}),onFocus:Ee(n.onFocus,()=>{const v=l.activationMode!=="manual";!p&&!s&&v&&l.onValueChange(i)})})})});nm.displayName=tm;var rm="TabsContent",im=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,forceMount:s,children:a,...l}=n,u=nc(rm,t),f=sm(u.baseId,i),m=om(u.baseId,i),p=i===u.value,v=b.useRef(p);return b.useEffect(()=>{const S=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(S)},[]),d.jsx(jr,{present:s||p,children:({present:S})=>d.jsx(Re.div,{"data-state":p?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!S,id:m,tabIndex:0,...l,ref:e,style:{...n.style,animationDuration:v.current?"0s":void 0},children:S&&a})})});im.displayName=rm;function sm(n,e){return`${n}-trigger-${e}`}function om(n,e){return`${n}-content-${e}`}var uS=Qf,am=em,lm=nm,cm=im;const Go=uS,ys=b.forwardRef(({className:n,...e},t)=>d.jsx(am,{ref:t,className:Fe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));ys.displayName=am.displayName;const On=b.forwardRef(({className:n,...e},t)=>d.jsx(lm,{ref:t,className:Fe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",n),...e}));On.displayName=lm.displayName;const Nn=b.forwardRef(({className:n,...e},t)=>d.jsx(cm,{ref:t,className:Fe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));Nn.displayName=cm.displayName;var Oe;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const a={};for(const l of s)a[l]=l;return a},n.getValidEnumValues=s=>{const a=n.objectKeys(s).filter(u=>typeof s[s[u]]!="number"),l={};for(const u of a)l[u]=s[u];return n.objectValues(l)},n.objectValues=s=>n.objectKeys(s).map(function(a){return s[a]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const l in s)Object.prototype.hasOwnProperty.call(s,l)&&a.push(l);return a},n.find=(s,a)=>{for(const l of s)if(a(l))return l},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function i(s,a=" | "){return s.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}n.joinValues=i,n.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(Oe||(Oe={}));var rd;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(rd||(rd={}));const Q=Oe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zn=n=>{switch(typeof n){case"undefined":return Q.undefined;case"string":return Q.string;case"number":return Number.isNaN(n)?Q.nan:Q.number;case"boolean":return Q.boolean;case"function":return Q.function;case"bigint":return Q.bigint;case"symbol":return Q.symbol;case"object":return Array.isArray(n)?Q.array:n===null?Q.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Q.promise:typeof Map<"u"&&n instanceof Map?Q.map:typeof Set<"u"&&n instanceof Set?Q.set:typeof Date<"u"&&n instanceof Date?Q.date:Q.object;default:return Q.unknown}},B=Oe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class mn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},i={_errors:[]},s=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(s);else if(l.code==="invalid_return_type")s(l.returnTypeError);else if(l.code==="invalid_arguments")s(l.argumentsError);else if(l.path.length===0)i._errors.push(t(l));else{let u=i,f=0;for(;f<l.path.length;){const m=l.path[f];f===l.path.length-1?(u[m]=u[m]||{_errors:[]},u[m]._errors.push(t(l))):u[m]=u[m]||{_errors:[]},u=u[m],f++}}};return s(this),i}static assert(e){if(!(e instanceof mn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Oe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},i=[];for(const s of this.issues)if(s.path.length>0){const a=s.path[0];t[a]=t[a]||[],t[a].push(e(s))}else i.push(e(s));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}mn.create=n=>new mn(n);const Tl=(n,e)=>{let t;switch(n.code){case B.invalid_type:n.received===Q.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case B.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Oe.jsonStringifyReplacer)}`;break;case B.unrecognized_keys:t=`Unrecognized key(s) in object: ${Oe.joinValues(n.keys,", ")}`;break;case B.invalid_union:t="Invalid input";break;case B.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Oe.joinValues(n.options)}`;break;case B.invalid_enum_value:t=`Invalid enum value. Expected ${Oe.joinValues(n.options)}, received '${n.received}'`;break;case B.invalid_arguments:t="Invalid function arguments";break;case B.invalid_return_type:t="Invalid function return type";break;case B.invalid_date:t="Invalid date";break;case B.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Oe.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case B.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case B.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case B.custom:t="Invalid input";break;case B.invalid_intersection_types:t="Intersection results could not be merged";break;case B.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case B.not_finite:t="Number must be finite";break;default:t=e.defaultError,Oe.assertNever(n)}return{message:t}};let dS=Tl;function hS(){return dS}const fS=n=>{const{data:e,path:t,errorMaps:i,issueData:s}=n,a=[...t,...s.path||[]],l={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let u="";const f=i.filter(m=>!!m).slice().reverse();for(const m of f)u=m(l,{data:e,defaultError:u}).message;return{...s,path:a,message:u}};function V(n,e){const t=hS(),i=fS({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Tl?void 0:Tl].filter(s=>!!s)});n.common.issues.push(i)}class kt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const i=[];for(const s of t){if(s.status==="aborted")return fe;s.status==="dirty"&&e.dirty(),i.push(s.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const i=[];for(const s of t){const a=await s.key,l=await s.value;i.push({key:a,value:l})}return kt.mergeObjectSync(e,i)}static mergeObjectSync(e,t){const i={};for(const s of t){const{key:a,value:l}=s;if(a.status==="aborted"||l.status==="aborted")return fe;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||s.alwaysSet)&&(i[a.value]=l.value)}return{status:e.value,value:i}}}const fe=Object.freeze({status:"aborted"}),Vi=n=>({status:"dirty",value:n}),Nt=n=>({status:"valid",value:n}),id=n=>n.status==="aborted",sd=n=>n.status==="dirty",vi=n=>n.status==="valid",bo=n=>typeof Promise<"u"&&n instanceof Promise;var X;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(X||(X={}));class er{constructor(e,t,i,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const od=(n,e)=>{if(vi(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new mn(n.common.issues);return this._error=t,this._error}}};function ke(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:i,description:s}=n;if(e&&(t||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(l,u)=>{const{message:f}=n;return l.code==="invalid_enum_value"?{message:f??u.defaultError}:typeof u.data>"u"?{message:f??i??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:f??t??u.defaultError}},description:s}}class Ce{get description(){return this._def.description}_getType(e){return Zn(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Zn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new kt,ctx:{common:e.parent.common,data:e.data,parsedType:Zn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(bo(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){const i={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zn(e)},s=this._parseSync({data:e,path:i.path,parent:i});return od(i,s)}"~validate"(e){var i,s;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zn(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return vi(a)?{value:a.value}:{issues:t.common.issues}}catch(a){(s=(i=a==null?void 0:a.message)==null?void 0:i.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(a=>vi(a)?{value:a.value}:{issues:t.common.issues})}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zn(e)},s=this._parse({data:e,path:i.path,parent:i}),a=await(bo(s)?s:Promise.resolve(s));return od(i,a)}refine(e,t){const i=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,a)=>{const l=e(s),u=()=>a.addIssue({code:B.custom,...i(s)});return typeof Promise<"u"&&l instanceof Promise?l.then(f=>f?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,t){return this._refinement((i,s)=>e(i)?!0:(s.addIssue(typeof t=="function"?t(i,s):t),!1))}_refinement(e){return new yi({schema:this,typeName:me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Yn.create(this,this._def)}nullable(){return wi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return hn.create(this)}promise(){return To.create(this,this._def)}or(e){return So.create([this,e],this._def)}and(e){return ko.create(this,e,this._def)}transform(e){return new yi({...ke(this._def),schema:this,typeName:me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new El({...ke(this._def),innerType:this,defaultValue:t,typeName:me.ZodDefault})}brand(){return new MS({typeName:me.ZodBranded,type:this,...ke(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Cl({...ke(this._def),innerType:this,catchValue:t,typeName:me.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return rc.create(this,e)}readonly(){return jl.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const mS=/^c[^\s-]{8,}$/i,pS=/^[0-9a-z]+$/,gS=/^[0-9A-HJKMNP-TV-Z]{26}$/i,vS=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_S=/^[a-z0-9_-]{21}$/i,yS=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,wS=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,bS=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xS="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let qa;const SS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,kS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,TS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,PS=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ES=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,CS=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,um="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",jS=new RegExp(`^${um}$`);function dm(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function AS(n){return new RegExp(`^${dm(n)}$`)}function OS(n){let e=`${um}T${dm(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function NS(n,e){return!!((e==="v4"||!e)&&SS.test(n)||(e==="v6"||!e)&&TS.test(n))}function RS(n,e){if(!yS.test(n))return!1;try{const[t]=n.split(".");if(!t)return!1;const i=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(i));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function LS(n,e){return!!((e==="v4"||!e)&&kS.test(n)||(e==="v6"||!e)&&PS.test(n))}class Jn extends Ce{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Q.string){const a=this._getOrReturnCtx(e);return V(a,{code:B.invalid_type,expected:Q.string,received:a.parsedType}),fe}const i=new kt;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:B.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:B.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="length"){const l=e.data.length>a.value,u=e.data.length<a.value;(l||u)&&(s=this._getOrReturnCtx(e,s),l?V(s,{code:B.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&V(s,{code:B.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),i.dirty())}else if(a.kind==="email")bS.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"email",code:B.invalid_string,message:a.message}),i.dirty());else if(a.kind==="emoji")qa||(qa=new RegExp(xS,"u")),qa.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"emoji",code:B.invalid_string,message:a.message}),i.dirty());else if(a.kind==="uuid")vS.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"uuid",code:B.invalid_string,message:a.message}),i.dirty());else if(a.kind==="nanoid")_S.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"nanoid",code:B.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid")mS.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"cuid",code:B.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid2")pS.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"cuid2",code:B.invalid_string,message:a.message}),i.dirty());else if(a.kind==="ulid")gS.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"ulid",code:B.invalid_string,message:a.message}),i.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),V(s,{validation:"url",code:B.invalid_string,message:a.message}),i.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"regex",code:B.invalid_string,message:a.message}),i.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),V(s,{code:B.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),i.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),V(s,{code:B.invalid_string,validation:{startsWith:a.value},message:a.message}),i.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),V(s,{code:B.invalid_string,validation:{endsWith:a.value},message:a.message}),i.dirty()):a.kind==="datetime"?OS(a).test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:B.invalid_string,validation:"datetime",message:a.message}),i.dirty()):a.kind==="date"?jS.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:B.invalid_string,validation:"date",message:a.message}),i.dirty()):a.kind==="time"?AS(a).test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:B.invalid_string,validation:"time",message:a.message}),i.dirty()):a.kind==="duration"?wS.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"duration",code:B.invalid_string,message:a.message}),i.dirty()):a.kind==="ip"?NS(e.data,a.version)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"ip",code:B.invalid_string,message:a.message}),i.dirty()):a.kind==="jwt"?RS(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"jwt",code:B.invalid_string,message:a.message}),i.dirty()):a.kind==="cidr"?LS(e.data,a.version)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"cidr",code:B.invalid_string,message:a.message}),i.dirty()):a.kind==="base64"?ES.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"base64",code:B.invalid_string,message:a.message}),i.dirty()):a.kind==="base64url"?CS.test(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{validation:"base64url",code:B.invalid_string,message:a.message}),i.dirty()):Oe.assertNever(a);return{status:i.value,value:e.data}}_regex(e,t,i){return this.refinement(s=>e.test(s),{validation:t,code:B.invalid_string,...X.errToObj(i)})}_addCheck(e){return new Jn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...X.errToObj(e)})}url(e){return this._addCheck({kind:"url",...X.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...X.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...X.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...X.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...X.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...X.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...X.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...X.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...X.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...X.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...X.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...X.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...X.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...X.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...X.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...X.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...X.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...X.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...X.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...X.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...X.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...X.errToObj(t)})}nonempty(e){return this.min(1,X.errToObj(e))}trim(){return new Jn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Jn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Jn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Jn.create=n=>new Jn({checks:[],typeName:me.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...ke(n)});function IS(n,e){const t=(n.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,s=t>i?t:i,a=Number.parseInt(n.toFixed(s).replace(".","")),l=Number.parseInt(e.toFixed(s).replace(".",""));return a%l/10**s}class os extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Q.number){const a=this._getOrReturnCtx(e);return V(a,{code:B.invalid_type,expected:Q.number,received:a.parsedType}),fe}let i;const s=new kt;for(const a of this._def.checks)a.kind==="int"?Oe.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{code:B.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(i=this._getOrReturnCtx(e,i),V(i,{code:B.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(i=this._getOrReturnCtx(e,i),V(i,{code:B.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?IS(e.data,a.value)!==0&&(i=this._getOrReturnCtx(e,i),V(i,{code:B.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{code:B.not_finite,message:a.message}),s.dirty()):Oe.assertNever(a);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,X.toString(t))}gt(e,t){return this.setLimit("min",e,!1,X.toString(t))}lte(e,t){return this.setLimit("max",e,!0,X.toString(t))}lt(e,t){return this.setLimit("max",e,!1,X.toString(t))}setLimit(e,t,i,s){return new os({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:X.toString(s)}]})}_addCheck(e){return new os({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:X.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:X.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:X.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:X.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:X.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:X.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:X.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:X.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:X.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Oe.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(t===null||i.value>t)&&(t=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}os.create=n=>new os({checks:[],typeName:me.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...ke(n)});class as extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Q.bigint)return this._getInvalidInput(e);let i;const s=new kt;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(i=this._getOrReturnCtx(e,i),V(i,{code:B.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(i=this._getOrReturnCtx(e,i),V(i,{code:B.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),V(i,{code:B.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):Oe.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return V(t,{code:B.invalid_type,expected:Q.bigint,received:t.parsedType}),fe}gte(e,t){return this.setLimit("min",e,!0,X.toString(t))}gt(e,t){return this.setLimit("min",e,!1,X.toString(t))}lte(e,t){return this.setLimit("max",e,!0,X.toString(t))}lt(e,t){return this.setLimit("max",e,!1,X.toString(t))}setLimit(e,t,i,s){return new as({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:X.toString(s)}]})}_addCheck(e){return new as({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:X.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:X.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:X.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:X.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:X.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}as.create=n=>new as({checks:[],typeName:me.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...ke(n)});class ad extends Ce{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Q.boolean){const i=this._getOrReturnCtx(e);return V(i,{code:B.invalid_type,expected:Q.boolean,received:i.parsedType}),fe}return Nt(e.data)}}ad.create=n=>new ad({typeName:me.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...ke(n)});class xo extends Ce{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Q.date){const a=this._getOrReturnCtx(e);return V(a,{code:B.invalid_type,expected:Q.date,received:a.parsedType}),fe}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return V(a,{code:B.invalid_date}),fe}const i=new kt;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:B.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),i.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),V(s,{code:B.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),i.dirty()):Oe.assertNever(a);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new xo({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:X.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:X.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}xo.create=n=>new xo({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:me.ZodDate,...ke(n)});class ld extends Ce{_parse(e){if(this._getType(e)!==Q.symbol){const i=this._getOrReturnCtx(e);return V(i,{code:B.invalid_type,expected:Q.symbol,received:i.parsedType}),fe}return Nt(e.data)}}ld.create=n=>new ld({typeName:me.ZodSymbol,...ke(n)});class cd extends Ce{_parse(e){if(this._getType(e)!==Q.undefined){const i=this._getOrReturnCtx(e);return V(i,{code:B.invalid_type,expected:Q.undefined,received:i.parsedType}),fe}return Nt(e.data)}}cd.create=n=>new cd({typeName:me.ZodUndefined,...ke(n)});class ud extends Ce{_parse(e){if(this._getType(e)!==Q.null){const i=this._getOrReturnCtx(e);return V(i,{code:B.invalid_type,expected:Q.null,received:i.parsedType}),fe}return Nt(e.data)}}ud.create=n=>new ud({typeName:me.ZodNull,...ke(n)});class dd extends Ce{constructor(){super(...arguments),this._any=!0}_parse(e){return Nt(e.data)}}dd.create=n=>new dd({typeName:me.ZodAny,...ke(n)});class hd extends Ce{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Nt(e.data)}}hd.create=n=>new hd({typeName:me.ZodUnknown,...ke(n)});class tr extends Ce{_parse(e){const t=this._getOrReturnCtx(e);return V(t,{code:B.invalid_type,expected:Q.never,received:t.parsedType}),fe}}tr.create=n=>new tr({typeName:me.ZodNever,...ke(n)});class fd extends Ce{_parse(e){if(this._getType(e)!==Q.undefined){const i=this._getOrReturnCtx(e);return V(i,{code:B.invalid_type,expected:Q.void,received:i.parsedType}),fe}return Nt(e.data)}}fd.create=n=>new fd({typeName:me.ZodVoid,...ke(n)});class hn extends Ce{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),s=this._def;if(t.parsedType!==Q.array)return V(t,{code:B.invalid_type,expected:Q.array,received:t.parsedType}),fe;if(s.exactLength!==null){const l=t.data.length>s.exactLength.value,u=t.data.length<s.exactLength.value;(l||u)&&(V(t,{code:l?B.too_big:B.too_small,minimum:u?s.exactLength.value:void 0,maximum:l?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),i.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(V(t,{code:B.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),i.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(V(t,{code:B.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map((l,u)=>s.type._parseAsync(new er(t,l,t.path,u)))).then(l=>kt.mergeArray(i,l));const a=[...t.data].map((l,u)=>s.type._parseSync(new er(t,l,t.path,u)));return kt.mergeArray(i,a)}get element(){return this._def.type}min(e,t){return new hn({...this._def,minLength:{value:e,message:X.toString(t)}})}max(e,t){return new hn({...this._def,maxLength:{value:e,message:X.toString(t)}})}length(e,t){return new hn({...this._def,exactLength:{value:e,message:X.toString(t)}})}nonempty(e){return this.min(1,e)}}hn.create=(n,e)=>new hn({type:n,minLength:null,maxLength:null,exactLength:null,typeName:me.ZodArray,...ke(e)});function ti(n){if(n instanceof He){const e={};for(const t in n.shape){const i=n.shape[t];e[t]=Yn.create(ti(i))}return new He({...n._def,shape:()=>e})}else return n instanceof hn?new hn({...n._def,type:ti(n.element)}):n instanceof Yn?Yn.create(ti(n.unwrap())):n instanceof wi?wi.create(ti(n.unwrap())):n instanceof Pr?Pr.create(n.items.map(e=>ti(e))):n}class He extends Ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Oe.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Q.object){const m=this._getOrReturnCtx(e);return V(m,{code:B.invalid_type,expected:Q.object,received:m.parsedType}),fe}const{status:i,ctx:s}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof tr&&this._def.unknownKeys==="strip"))for(const m in s.data)l.includes(m)||u.push(m);const f=[];for(const m of l){const p=a[m],v=s.data[m];f.push({key:{status:"valid",value:m},value:p._parse(new er(s,v,s.path,m)),alwaysSet:m in s.data})}if(this._def.catchall instanceof tr){const m=this._def.unknownKeys;if(m==="passthrough")for(const p of u)f.push({key:{status:"valid",value:p},value:{status:"valid",value:s.data[p]}});else if(m==="strict")u.length>0&&(V(s,{code:B.unrecognized_keys,keys:u}),i.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const p of u){const v=s.data[p];f.push({key:{status:"valid",value:p},value:m._parse(new er(s,v,s.path,p)),alwaysSet:p in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const m=[];for(const p of f){const v=await p.key,S=await p.value;m.push({key:v,value:S,alwaysSet:p.alwaysSet})}return m}).then(m=>kt.mergeObjectSync(i,m)):kt.mergeObjectSync(i,f)}get shape(){return this._def.shape()}strict(e){return X.errToObj,new He({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,i)=>{var a,l;const s=((l=(a=this._def).errorMap)==null?void 0:l.call(a,t,i).message)??i.defaultError;return t.code==="unrecognized_keys"?{message:X.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new He({...this._def,unknownKeys:"strip"})}passthrough(){return new He({...this._def,unknownKeys:"passthrough"})}extend(e){return new He({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new He({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:me.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new He({...this._def,catchall:e})}pick(e){const t={};for(const i of Oe.objectKeys(e))e[i]&&this.shape[i]&&(t[i]=this.shape[i]);return new He({...this._def,shape:()=>t})}omit(e){const t={};for(const i of Oe.objectKeys(this.shape))e[i]||(t[i]=this.shape[i]);return new He({...this._def,shape:()=>t})}deepPartial(){return ti(this)}partial(e){const t={};for(const i of Oe.objectKeys(this.shape)){const s=this.shape[i];e&&!e[i]?t[i]=s:t[i]=s.optional()}return new He({...this._def,shape:()=>t})}required(e){const t={};for(const i of Oe.objectKeys(this.shape))if(e&&!e[i])t[i]=this.shape[i];else{let a=this.shape[i];for(;a instanceof Yn;)a=a._def.innerType;t[i]=a}return new He({...this._def,shape:()=>t})}keyof(){return hm(Oe.objectKeys(this.shape))}}He.create=(n,e)=>new He({shape:()=>n,unknownKeys:"strip",catchall:tr.create(),typeName:me.ZodObject,...ke(e)});He.strictCreate=(n,e)=>new He({shape:()=>n,unknownKeys:"strict",catchall:tr.create(),typeName:me.ZodObject,...ke(e)});He.lazycreate=(n,e)=>new He({shape:n,unknownKeys:"strip",catchall:tr.create(),typeName:me.ZodObject,...ke(e)});class So extends Ce{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;function s(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return t.common.issues.push(...u.ctx.common.issues),u.result;const l=a.map(u=>new mn(u.ctx.common.issues));return V(t,{code:B.invalid_union,unionErrors:l}),fe}if(t.common.async)return Promise.all(i.map(async a=>{const l={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:l}),ctx:l}})).then(s);{let a;const l=[];for(const f of i){const m={...t,common:{...t.common,issues:[]},parent:null},p=f._parseSync({data:t.data,path:t.path,parent:m});if(p.status==="valid")return p;p.status==="dirty"&&!a&&(a={result:p,ctx:m}),m.common.issues.length&&l.push(m.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(f=>new mn(f));return V(t,{code:B.invalid_union,unionErrors:u}),fe}}get options(){return this._def.options}}So.create=(n,e)=>new So({options:n,typeName:me.ZodUnion,...ke(e)});function Pl(n,e){const t=Zn(n),i=Zn(e);if(n===e)return{valid:!0,data:n};if(t===Q.object&&i===Q.object){const s=Oe.objectKeys(e),a=Oe.objectKeys(n).filter(u=>s.indexOf(u)!==-1),l={...n,...e};for(const u of a){const f=Pl(n[u],e[u]);if(!f.valid)return{valid:!1};l[u]=f.data}return{valid:!0,data:l}}else if(t===Q.array&&i===Q.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<n.length;a++){const l=n[a],u=e[a],f=Pl(l,u);if(!f.valid)return{valid:!1};s.push(f.data)}return{valid:!0,data:s}}else return t===Q.date&&i===Q.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class ko extends Ce{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),s=(a,l)=>{if(id(a)||id(l))return fe;const u=Pl(a.value,l.value);return u.valid?((sd(a)||sd(l))&&t.dirty(),{status:t.value,value:u.data}):(V(i,{code:B.invalid_intersection_types}),fe)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([a,l])=>s(a,l)):s(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}ko.create=(n,e,t)=>new ko({left:n,right:e,typeName:me.ZodIntersection,...ke(t)});class Pr extends Ce{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Q.array)return V(i,{code:B.invalid_type,expected:Q.array,received:i.parsedType}),fe;if(i.data.length<this._def.items.length)return V(i,{code:B.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),fe;!this._def.rest&&i.data.length>this._def.items.length&&(V(i,{code:B.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...i.data].map((l,u)=>{const f=this._def.items[u]||this._def.rest;return f?f._parse(new er(i,l,i.path,u)):null}).filter(l=>!!l);return i.common.async?Promise.all(a).then(l=>kt.mergeArray(t,l)):kt.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Pr({...this._def,rest:e})}}Pr.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Pr({items:n,typeName:me.ZodTuple,rest:null,...ke(e)})};class md extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Q.map)return V(i,{code:B.invalid_type,expected:Q.map,received:i.parsedType}),fe;const s=this._def.keyType,a=this._def.valueType,l=[...i.data.entries()].map(([u,f],m)=>({key:s._parse(new er(i,u,i.path,[m,"key"])),value:a._parse(new er(i,f,i.path,[m,"value"]))}));if(i.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const f of l){const m=await f.key,p=await f.value;if(m.status==="aborted"||p.status==="aborted")return fe;(m.status==="dirty"||p.status==="dirty")&&t.dirty(),u.set(m.value,p.value)}return{status:t.value,value:u}})}else{const u=new Map;for(const f of l){const m=f.key,p=f.value;if(m.status==="aborted"||p.status==="aborted")return fe;(m.status==="dirty"||p.status==="dirty")&&t.dirty(),u.set(m.value,p.value)}return{status:t.value,value:u}}}}md.create=(n,e,t)=>new md({valueType:e,keyType:n,typeName:me.ZodMap,...ke(t)});class ls extends Ce{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Q.set)return V(i,{code:B.invalid_type,expected:Q.set,received:i.parsedType}),fe;const s=this._def;s.minSize!==null&&i.data.size<s.minSize.value&&(V(i,{code:B.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&i.data.size>s.maxSize.value&&(V(i,{code:B.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const a=this._def.valueType;function l(f){const m=new Set;for(const p of f){if(p.status==="aborted")return fe;p.status==="dirty"&&t.dirty(),m.add(p.value)}return{status:t.value,value:m}}const u=[...i.data.values()].map((f,m)=>a._parse(new er(i,f,i.path,m)));return i.common.async?Promise.all(u).then(f=>l(f)):l(u)}min(e,t){return new ls({...this._def,minSize:{value:e,message:X.toString(t)}})}max(e,t){return new ls({...this._def,maxSize:{value:e,message:X.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ls.create=(n,e)=>new ls({valueType:n,minSize:null,maxSize:null,typeName:me.ZodSet,...ke(e)});class pd extends Ce{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}pd.create=(n,e)=>new pd({getter:n,typeName:me.ZodLazy,...ke(e)});class gd extends Ce{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return V(t,{received:t.data,code:B.invalid_literal,expected:this._def.value}),fe}return{status:"valid",value:e.data}}get value(){return this._def.value}}gd.create=(n,e)=>new gd({value:n,typeName:me.ZodLiteral,...ke(e)});function hm(n,e){return new _i({values:n,typeName:me.ZodEnum,...ke(e)})}class _i extends Ce{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),i=this._def.values;return V(t,{expected:Oe.joinValues(i),received:t.parsedType,code:B.invalid_type}),fe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return V(t,{received:t.data,code:B.invalid_enum_value,options:i}),fe}return Nt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return _i.create(e,{...this._def,...t})}exclude(e,t=this._def){return _i.create(this.options.filter(i=>!e.includes(i)),{...this._def,...t})}}_i.create=hm;class vd extends Ce{_parse(e){const t=Oe.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Q.string&&i.parsedType!==Q.number){const s=Oe.objectValues(t);return V(i,{expected:Oe.joinValues(s),received:i.parsedType,code:B.invalid_type}),fe}if(this._cache||(this._cache=new Set(Oe.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Oe.objectValues(t);return V(i,{received:i.data,code:B.invalid_enum_value,options:s}),fe}return Nt(e.data)}get enum(){return this._def.values}}vd.create=(n,e)=>new vd({values:n,typeName:me.ZodNativeEnum,...ke(e)});class To extends Ce{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Q.promise&&t.common.async===!1)return V(t,{code:B.invalid_type,expected:Q.promise,received:t.parsedType}),fe;const i=t.parsedType===Q.promise?t.data:Promise.resolve(t.data);return Nt(i.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}To.create=(n,e)=>new To({type:n,typeName:me.ZodPromise,...ke(e)});class yi extends Ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:l=>{V(i,l),l.fatal?t.abort():t.dirty()},get path(){return i.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const l=s.transform(i.data,a);if(i.common.async)return Promise.resolve(l).then(async u=>{if(t.value==="aborted")return fe;const f=await this._def.schema._parseAsync({data:u,path:i.path,parent:i});return f.status==="aborted"?fe:f.status==="dirty"||t.value==="dirty"?Vi(f.value):f});{if(t.value==="aborted")return fe;const u=this._def.schema._parseSync({data:l,path:i.path,parent:i});return u.status==="aborted"?fe:u.status==="dirty"||t.value==="dirty"?Vi(u.value):u}}if(s.type==="refinement"){const l=u=>{const f=s.refinement(u,a);if(i.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(i.common.async===!1){const u=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return u.status==="aborted"?fe:(u.status==="dirty"&&t.dirty(),l(u.value),{status:t.value,value:u.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(u=>u.status==="aborted"?fe:(u.status==="dirty"&&t.dirty(),l(u.value).then(()=>({status:t.value,value:u.value}))))}if(s.type==="transform")if(i.common.async===!1){const l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!vi(l))return fe;const u=s.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:u}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(l=>vi(l)?Promise.resolve(s.transform(l.value,a)).then(u=>({status:t.value,value:u})):fe);Oe.assertNever(s)}}yi.create=(n,e,t)=>new yi({schema:n,typeName:me.ZodEffects,effect:e,...ke(t)});yi.createWithPreprocess=(n,e,t)=>new yi({schema:e,effect:{type:"preprocess",transform:n},typeName:me.ZodEffects,...ke(t)});class Yn extends Ce{_parse(e){return this._getType(e)===Q.undefined?Nt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Yn.create=(n,e)=>new Yn({innerType:n,typeName:me.ZodOptional,...ke(e)});class wi extends Ce{_parse(e){return this._getType(e)===Q.null?Nt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}wi.create=(n,e)=>new wi({innerType:n,typeName:me.ZodNullable,...ke(e)});class El extends Ce{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===Q.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}El.create=(n,e)=>new El({innerType:n,typeName:me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ke(e)});class Cl extends Ce{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return bo(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new mn(i.common.issues)},input:i.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new mn(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}Cl.create=(n,e)=>new Cl({innerType:n,typeName:me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ke(e)});class _d extends Ce{_parse(e){if(this._getType(e)!==Q.nan){const i=this._getOrReturnCtx(e);return V(i,{code:B.invalid_type,expected:Q.nan,received:i.parsedType}),fe}return{status:"valid",value:e.data}}}_d.create=n=>new _d({typeName:me.ZodNaN,...ke(n)});class MS extends Ce{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class rc extends Ce{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?fe:a.status==="dirty"?(t.dirty(),Vi(a.value)):this._def.out._parseAsync({data:a.value,path:i.path,parent:i})})();{const s=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?fe:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:i.path,parent:i})}}static create(e,t){return new rc({in:e,out:t,typeName:me.ZodPipeline})}}class jl extends Ce{_parse(e){const t=this._def.innerType._parse(e),i=s=>(vi(s)&&(s.value=Object.freeze(s.value)),s);return bo(t)?t.then(s=>i(s)):i(t)}unwrap(){return this._def.innerType}}jl.create=(n,e)=>new jl({innerType:n,typeName:me.ZodReadonly,...ke(e)});He.lazycreate;var me;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(me||(me={}));const _r=Jn.create;tr.create;hn.create;const fm=He.create;He.strictCreate;So.create;ko.create;Pr.create;const DS=_i.create;To.create;Yn.create;wi.create;const cs=({message:n="Hi, I need help with PasarMalamAI",className:e})=>{const t=()=>{const i=encodeURIComponent(n);window.open(`https://wa.me/60193438388?text=${i}`,"_blank")};return d.jsxs(re,{onClick:t,variant:"outline",className:e,children:[d.jsx(co,{className:"w-4 h-4 mr-2"}),"WhatsApp Support"]})},$S=_r().min(12,"Password must be at least 12 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),BS=async n=>{try{const{data:{user:e}}=await ue.auth.getUser();if(!e)return!1;const{data:t}=await ue.from("user_roles").select("role").eq("user_id",e.id);return(t==null?void 0:t.some(i=>i.role===n))||!1}catch(e){return console.error("Error checking role:",e),!1}},zS=async n=>{const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-1",t);return Array.from(new Uint8Array(i)).map(l=>l.toString(16).padStart(2,"0")).join("")},FS=async n=>{try{const e=await zS(n),t=e.substring(0,5),i=e.substring(5).toUpperCase(),s=await fetch(`https://api.pwnedpasswords.com/range/${t}`);return s.ok?(await s.text()).split(`\r
`).map(u=>u.split(":")[0]).includes(i):(console.error("Error fetching from HIBP API:",s.statusText),!1)}catch(e){return console.error("Error checking password breach:",e),!1}},US=async n=>{try{return $S.parse(n),await FS(n)?{valid:!1,message:"This password appears in data breaches. Please choose a different password."}:{valid:!0}}catch(e){return e instanceof mn?{valid:!1,message:e.errors[0].message}:{valid:!1,message:"Password validation failed"}}},ZS=fm({fullName:_r().trim().min(2,"Name must be at least 2 characters").max(100),email:_r().trim().email("Invalid email address").max(255),phone:_r().trim().min(10,"Phone number must be at least 10 digits").max(20),password:_r().min(6,"Password must be at least 6 characters").max(100),role:DS(["customer","seller"])}),WS=fm({email:_r().trim().email("Invalid email address"),password:_r().min(1,"Password is required")}),qS=()=>{const n=Ht(),[e,t]=b.useState(!1),[i,s]=b.useState({fullName:"",email:"",phone:"",password:"",role:"customer"}),[a,l]=b.useState({email:"",password:""}),u=async m=>{m.preventDefault();const p=ZS.safeParse(i);if(!p.success){ze.error(p.error.errors[0].message);return}const v=await US(i.password);if(!v.valid){ze.error(v.message||"Password is not secure enough");return}t(!0);try{const{error:S}=await ue.auth.signUp({email:i.email,password:i.password,options:{data:{full_name:i.fullName,phone_number:i.phone,role:i.role,is_approved:i.role==="customer"},emailRedirectTo:`${window.location.origin}/`}});if(S)throw S;const{data:{user:_}}=await ue.auth.getUser();_&&await ue.from("user_roles").insert({user_id:_.id,role:i.role}),ze.success("Account created successfully! You can now log in."),s({fullName:"",email:"",phone:"",password:"",role:"customer"})}catch(S){ze.error(S.message||"Failed to create account")}finally{t(!1)}},f=async m=>{m.preventDefault();const p=WS.safeParse(a);if(!p.success){ze.error(p.error.errors[0].message);return}t(!0);try{const{error:v}=await ue.auth.signInWithPassword({email:a.email,password:a.password});if(v)throw v;ze.success("Logged in successfully!"),n("/dashboard")}catch(v){ze.error(v.message||"Failed to log in")}finally{t(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-primary/5 p-4",children:d.jsxs(Se,{className:"w-full max-w-md",children:[d.jsxs(Ue,{children:[d.jsx(Ze,{className:"text-2xl font-bold text-center",children:"PasarMalamAI"}),d.jsx(gt,{className:"text-center",children:"Join Malaysia's digital night market revolution"})]}),d.jsx(Be,{children:d.jsxs(Go,{defaultValue:"login",className:"w-full",children:[d.jsxs(ys,{className:"grid w-full grid-cols-2",children:[d.jsx(On,{value:"login",children:"Login"}),d.jsx(On,{value:"signup",children:"Sign Up"})]}),d.jsxs(Nn,{value:"login",children:[d.jsxs("form",{onSubmit:f,className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(it,{htmlFor:"login-email",children:"Email"}),d.jsx(st,{id:"login-email",type:"email",placeholder:"your@email.com",value:a.email,onChange:m=>l({...a,email:m.target.value}),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(it,{htmlFor:"login-password",children:"Password"}),d.jsx(st,{id:"login-password",type:"password",placeholder:"",value:a.password,onChange:m=>l({...a,password:m.target.value}),required:!0})]}),d.jsx(re,{type:"submit",className:"w-full",disabled:e,children:e?"Logging in...":"Log In"})]}),d.jsx("div",{className:"mt-4",children:d.jsx(cs,{message:"Hi, I need help with login",className:"w-full"})})]}),d.jsxs(Nn,{value:"signup",children:[d.jsxs("form",{onSubmit:u,className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(it,{htmlFor:"signup-name",children:"Full Name"}),d.jsx(st,{id:"signup-name",type:"text",placeholder:"Fadzilah Aris",value:i.fullName,onChange:m=>s({...i,fullName:m.target.value}),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(it,{htmlFor:"signup-phone",children:"Phone Number"}),d.jsx(st,{id:"signup-phone",type:"tel",placeholder:"0123456789",value:i.phone,onChange:m=>s({...i,phone:m.target.value}),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(it,{htmlFor:"signup-email",children:"Email"}),d.jsx(st,{id:"signup-email",type:"email",placeholder:"your@email.com",value:i.email,onChange:m=>s({...i,email:m.target.value}),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(it,{htmlFor:"signup-password",children:"Password"}),d.jsx(st,{id:"signup-password",type:"password",placeholder:"",value:i.password,onChange:m=>s({...i,password:m.target.value}),required:!0})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(it,{htmlFor:"signup-role",children:"I am a"}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsx(re,{type:"button",variant:i.role==="customer"?"default":"outline",onClick:()=>s({...i,role:"customer"}),children:"Customer"}),d.jsx(re,{type:"button",variant:i.role==="seller"?"default":"outline",onClick:()=>s({...i,role:"seller"}),children:"Seller (Peniaga)"})]}),i.role==="seller"&&d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Note: Seller accounts require approval and a subscription fee of RM50/2 months."})]}),d.jsx(re,{type:"submit",className:"w-full",disabled:e,children:e?"Creating account...":"Sign Up"})]}),d.jsx("div",{className:"mt-4",children:d.jsx(cs,{message:"Hi, I need help with registration",className:"w-full"})})]})]})})]})})},HS=()=>{const n=Ht(),[e,t]=b.useState(null),[i,s]=b.useState([]),[a,l]=b.useState(null),[u,f]=b.useState(!0);b.useEffect(()=>{(async()=>{const{data:{session:w}}=await ue.auth.getSession();if(!w){n("/auth");return}t(w.user),await m(w.user.id)})();const{data:{subscription:y}}=ue.auth.onAuthStateChange((w,k)=>{w==="SIGNED_OUT"?n("/auth"):k&&(t(k.user),m(k.user.id))});return()=>y.unsubscribe()},[n]);const m=async T=>{try{const[y,w]=await Promise.all([ue.from("user_roles").select("role").eq("user_id",T),ue.from("profiles").select("*").eq("id",T).single()]);if(y.error)throw y.error;if(w.error)throw w.error;if(y.data)if(y.data.length===0){const{error:k}=await ue.from("user_roles").insert({user_id:T,role:"customer"});if(k)throw k;s(["customer"])}else s(y.data.map(k=>k.role));w.data&&l(w.data)}catch(y){console.error("Error fetching user data:",y),ze.error("Failed to load user data"),n("/auth")}finally{f(!1)}},p=async()=>{try{await ue.auth.signOut(),ze.success("Logged out successfully"),n("/")}catch{ze.error("Failed to log out")}};if(u)return d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"text-center",children:"Loading..."})});const v=i.includes("admin"),S=i.includes("seller"),_=i.includes("customer");return d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5",children:[d.jsx("header",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:d.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"PasarMalamAI"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(cs,{}),d.jsxs(re,{variant:"outline",onClick:p,children:[d.jsx(yv,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}),d.jsx("main",{className:"container mx-auto px-4 py-8",children:d.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[d.jsxs(Se,{children:[d.jsxs(Ue,{children:[d.jsxs(Ze,{children:["Welcome, ",a==null?void 0:a.full_name,"!"]}),d.jsxs(gt,{children:["Email: ",e==null?void 0:e.email]})]}),d.jsx(Be,{children:d.jsx("div",{className:"flex gap-2 flex-wrap",children:i.map(T=>d.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm font-medium",children:T},T))})})]}),d.jsxs(Se,{className:"mb-6",children:[d.jsx(Ue,{children:d.jsx(Ze,{children:"Quick Access"})}),d.jsx(Be,{children:d.jsxs(re,{variant:"outline",onClick:()=>n("/tutorials"),className:"w-full",children:[d.jsx(il,{className:"w-4 h-4 mr-2"}),"Help & Tutorials"]})})]}),d.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[_&&d.jsxs(d.Fragment,{children:[d.jsxs(Se,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>n("/products"),children:[d.jsxs(Ue,{children:[d.jsx(yh,{className:"w-8 h-8 mb-2 text-primary"}),d.jsx(Ze,{children:"Browse Products"}),d.jsx(gt,{children:"Discover amazing items from local sellers"})]}),d.jsx(Be,{children:d.jsx(re,{className:"w-full",children:"Shop Now"})})]}),d.jsxs(Se,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>n("/customer/orders"),children:[d.jsxs(Ue,{children:[d.jsx(so,{className:"w-8 h-8 mb-2 text-primary"}),d.jsx(Ze,{children:"My Orders"}),d.jsx(gt,{children:"View your pre-orders and order status"})]}),d.jsx(Be,{children:d.jsx(re,{className:"w-full",children:"View Orders"})})]})]}),S&&d.jsxs(d.Fragment,{children:[d.jsxs(Se,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>n("/seller/subscription"),children:[d.jsxs(Ue,{children:[d.jsx(Bl,{className:"w-8 h-8 mb-2 text-primary"}),d.jsx(Ze,{children:"Subscription"}),d.jsx(gt,{children:"Manage your seller subscription"})]}),d.jsx(Be,{children:d.jsx(re,{className:"w-full",children:"View Details"})})]}),d.jsxs(Se,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[d.jsxs(Ue,{children:[d.jsx(so,{className:"w-8 h-8 mb-2 text-primary"}),d.jsx(Ze,{children:"My Products"}),d.jsx(gt,{children:"View your product listings"})]}),d.jsx(Be,{children:d.jsx(re,{className:"w-full",children:"Coming Soon"})})]})]}),v&&d.jsxs(d.Fragment,{children:[d.jsxs(Se,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>n("/admin/products"),children:[d.jsxs(Ue,{children:[d.jsx(so,{className:"w-8 h-8 mb-2 text-primary"}),d.jsx(Ze,{children:"Product Management"}),d.jsx(gt,{children:"Manage all product listings"})]}),d.jsx(Be,{children:d.jsx(re,{className:"w-full",children:"Manage Products"})})]}),d.jsxs(Se,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>n("/admin/subscriptions"),children:[d.jsxs(Ue,{children:[d.jsx(Cv,{className:"w-8 h-8 mb-2 text-primary"}),d.jsx(Ze,{children:"Seller Subscriptions"}),d.jsx(gt,{children:"Track seller payments"})]}),d.jsx(Be,{children:d.jsx(re,{className:"w-full",children:"View Sellers"})})]}),d.jsxs(Se,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>n("/admin/payouts"),children:[d.jsxs(Ue,{children:[d.jsx(_h,{className:"w-8 h-8 mb-2 text-primary"}),d.jsx(Ze,{children:"Payout Management"}),d.jsx(gt,{children:"Manage seller payouts"})]}),d.jsx(Be,{children:d.jsx(re,{className:"w-full",children:"Manage Payouts"})})]})]})]})]})})]})},VS=()=>{const n=sg();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),d.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),d.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),d.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},Po=b.forwardRef(({className:n,...e},t)=>d.jsx("textarea",{className:Fe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));Po.displayName="Textarea";const GS=()=>{const[n,e]=b.useState([]),[t,i]=b.useState(!0),[s,a]=b.useState(!1),[l,u]=b.useState({name:"",description:"",price:0,stock_quantity:0}),[f,m]=b.useState(null);b.useEffect(()=>{p()},[]);const p=async()=>{try{i(!0);const{data:{user:w}}=await ue.auth.getUser();if(!w)throw new Error("User not found");const{data:k}=await ue.from("seller_stalls").select("id").eq("seller_id",w.id).single();if(!k){e([]),i(!1);return}const{data:C,error:P}=await ue.from("products").select("id, name, description, price, stock_quantity").eq("stall_id",k.id).order("name");if(P)throw P;e(C||[])}catch(w){console.error("Error fetching products:",w)}finally{i(!1)}},v=async()=>{try{const{data:{user:w}}=await ue.auth.getUser();if(!w)throw new Error("User not found");const{data:k}=await ue.from("seller_stalls").select("id").eq("seller_id",w.id).single();if(!k)throw new Error("Stall not found");const{error:C}=await ue.from("products").insert({...l,stall_id:k.id});if(C)throw C;u({name:"",description:"",price:0,stock_quantity:0}),a(!1),p()}catch(w){console.error("Error adding product:",w)}},S=w=>{m(w)},_=()=>{m(null)},T=async()=>{if(f)try{const{error:w}=await ue.from("products").update({name:f.name,description:f.description,price:f.price,stock_quantity:f.stock_quantity}).eq("id",f.id);if(w)throw w;m(null),p()}catch(w){console.error("Error updating product:",w)}},y=async w=>{if(window.confirm("Are you sure you want to delete this product?"))try{const{error:k}=await ue.from("products").delete().eq("id",w);if(k)throw k;p()}catch(k){console.error("Error deleting product:",k)}};return d.jsxs(Se,{children:[d.jsx(Ue,{children:d.jsx(Ze,{children:"Product Management"})}),d.jsxs(Be,{children:[d.jsx(re,{onClick:()=>a(!s),className:"mb-4",children:s?"Cancel":"Add Product"}),s&&d.jsxs("div",{className:"space-y-4 mb-4",children:[d.jsxs("div",{children:[d.jsx(it,{htmlFor:"product-name",children:"Product Name"}),d.jsx(st,{id:"product-name",value:l.name,onChange:w=>u({...l,name:w.target.value})})]}),d.jsxs("div",{children:[d.jsx(it,{htmlFor:"product-description",children:"Description"}),d.jsx(Po,{id:"product-description",value:l.description,onChange:w=>u({...l,description:w.target.value})})]}),d.jsxs("div",{children:[d.jsx(it,{htmlFor:"product-price",children:"Price"}),d.jsx(st,{id:"product-price",type:"number",value:l.price,onChange:w=>u({...l,price:parseFloat(w.target.value)||0})})]}),d.jsxs("div",{children:[d.jsx(it,{htmlFor:"product-stock",children:"Stock Quantity"}),d.jsx(st,{id:"product-stock",type:"number",value:l.stock_quantity,onChange:w=>u({...l,stock_quantity:parseInt(w.target.value)||0})})]}),d.jsx(re,{onClick:v,children:"Add Product"})]}),f&&d.jsxs("div",{className:"space-y-4 mb-4",children:[d.jsxs("h3",{className:"font-semibold",children:["Editing: ",f.name]}),d.jsxs("div",{children:[d.jsx(it,{htmlFor:"edit-product-name",children:"Product Name"}),d.jsx(st,{id:"edit-product-name",value:f.name,onChange:w=>m({...f,name:w.target.value})})]}),d.jsxs("div",{children:[d.jsx(it,{htmlFor:"edit-product-description",children:"Description"}),d.jsx(Po,{id:"edit-product-description",value:f.description,onChange:w=>m({...f,description:w.target.value})})]}),d.jsxs("div",{children:[d.jsx(it,{htmlFor:"edit-product-price",children:"Price"}),d.jsx(st,{id:"edit-product-price",type:"number",value:f.price,onChange:w=>m({...f,price:parseFloat(w.target.value)||0})})]}),d.jsxs("div",{children:[d.jsx(it,{htmlFor:"edit-product-stock",children:"Stock Quantity"}),d.jsx(st,{id:"edit-product-stock",type:"number",value:f.stock_quantity,onChange:w=>m({...f,stock_quantity:parseInt(w.target.value)||0})})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(re,{onClick:T,children:"Update Product"}),d.jsx(re,{variant:"outline",onClick:_,children:"Cancel"})]})]}),t?d.jsx("p",{children:"Loading products..."}):d.jsx("div",{className:"space-y-4",children:n.map(w=>d.jsxs("div",{className:"flex items-center justify-between p-4 border rounded",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold",children:w.name}),d.jsx("p",{className:"text-sm text-muted-foreground",children:w.description})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"font-semibold",children:["RM ",w.price.toFixed(2)]}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Stock: ",w.stock_quantity]}),d.jsxs("div",{className:"flex gap-2 mt-2",children:[d.jsx(re,{variant:"outline",size:"sm",onClick:()=>S(w),children:"Edit"}),d.jsx(re,{variant:"destructive",size:"sm",onClick:()=>y(w.id),children:"Delete"})]})]})]},w.id))})]})]})},KS=Ro("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function bi({className:n,variant:e,...t}){return d.jsx("div",{className:Fe(KS({variant:e}),n),...t})}const JS=()=>{const n=Ht(),[e,t]=b.useState([]),[i,s]=b.useState(!0);b.useEffect(()=>{a(),l()},[]);const a=async()=>{try{const{data:{user:u},error:f}=await ue.auth.getUser();if(f)throw f;if(!u){ze.error("Authentication required"),n("/auth");return}const{data:m,error:p}=await ue.from("user_roles").select("role").eq("user_id",u.id);if(p)throw p;return!m||!m.some(v=>v.role==="admin")?(ze.error("Access denied: Admin privileges required"),n("/dashboard"),!1):!0}catch(u){return console.error("Security verification error:",u),ze.error("Security verification failed"),n("/dashboard"),!1}},l=async()=>{try{const{data:u}=await ue.from("user_roles").select("user_id, profiles(full_name, phone_number)").eq("role","seller");u&&t(u)}catch{ze.error("Failed to load subscriptions")}finally{s(!1)}};return i?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5",children:[d.jsx("header",{className:"border-b bg-background/95 backdrop-blur",children:d.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center gap-4",children:[d.jsx(re,{variant:"ghost",onClick:()=>n("/dashboard"),children:d.jsx(Cn,{className:"w-4 h-4"})}),d.jsx("h1",{className:"text-2xl font-bold",children:"Seller Subscriptions"})]})}),d.jsx("main",{className:"container mx-auto px-4 py-8",children:d.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(u=>{var f,m;return d.jsxs(Se,{children:[d.jsx(Ue,{children:d.jsxs(Ze,{className:"flex items-center justify-between",children:[(f=u.profiles)==null?void 0:f.full_name,d.jsx(bi,{variant:"default",children:"Active"})]})}),d.jsx(Be,{children:d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Phone:"})," ",((m=u.profiles)==null?void 0:m.phone_number)||"N/A"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Status:"})," Paid (RM50 - 2 months)"]})]})})]},u.user_id)})})})]})},YS=()=>{const n=Ht(),[e,t]=b.useState([]),[i,s]=b.useState(!0);b.useEffect(()=>{a(),l()},[]);const a=async()=>{const{data:{user:u}}=await ue.auth.getUser();if(!u){n("/auth");return}const{data:f}=await ue.from("user_roles").select("role").eq("user_id",u.id);f!=null&&f.some(m=>m.role==="admin")||(ze.error("Access denied"),n("/dashboard"))},l=async()=>{try{const{data:u}=await ue.from("pre_orders").select(`
          *,
          seller_stalls(
            stall_name,
            seller_id,
            profiles(full_name, phone_number)
          )
        `).eq("payment_status","paid");if(u){const f=u.reduce((m,p)=>{var S,_,T,y,w,k;const v=(S=p.seller_stalls)==null?void 0:S.seller_id;return v&&(m[v]||(m[v]={seller_name:(T=(_=p.seller_stalls)==null?void 0:_.profiles)==null?void 0:T.full_name,phone:(w=(y=p.seller_stalls)==null?void 0:y.profiles)==null?void 0:w.phone_number,stall_name:(k=p.seller_stalls)==null?void 0:k.stall_name,total_amount:0,order_count:0}),m[v].total_amount+=parseFloat(p.total_amount),m[v].order_count+=1),m},{});t(Object.values(f))}}catch{ze.error("Failed to load payouts")}finally{s(!1)}};return i?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5",children:[d.jsx("header",{className:"border-b bg-background/95 backdrop-blur",children:d.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center gap-4",children:[d.jsx(re,{variant:"ghost",onClick:()=>n("/dashboard"),children:d.jsx(Cn,{className:"w-4 h-4"})}),d.jsx("h1",{className:"text-2xl font-bold",children:"Payout Management"})]})}),d.jsxs("main",{className:"container mx-auto px-4 py-8",children:[d.jsxs(Se,{className:"mb-6",children:[d.jsx(Ue,{children:d.jsx(Ze,{children:"Bank Transfer Instructions"})}),d.jsx(Be,{children:d.jsx("p",{className:"text-sm text-muted-foreground",children:"Payouts will be processed via direct bank transfer to registered seller accounts. Current status: Manual processing (automation in progress)."})})]}),d.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map((u,f)=>d.jsxs(Se,{children:[d.jsx(Ue,{children:d.jsxs(Ze,{className:"flex items-center justify-between",children:[d.jsx("span",{children:u.seller_name}),d.jsx(_h,{className:"w-5 h-5 text-primary"})]})}),d.jsx(Be,{children:d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Stall:"})," ",u.stall_name]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Phone:"})," ",u.phone||"N/A"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Total Amount:"})," RM ",u.total_amount.toFixed(2)]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Orders:"})," ",u.order_count]}),d.jsx(bi,{variant:"secondary",className:"mt-2",children:"Pending Payout"})]})})]},f))}),e.length===0&&d.jsx(Se,{children:d.jsx(Be,{className:"py-8 text-center text-muted-foreground",children:"No payouts pending at this time"})})]})]})},QS="/assets/payment-qr-code-BxR96ucI.png",XS=()=>{const n=Ht(),[e,t]=b.useState(!1),[i,s]=b.useState(!0);b.useEffect(()=>{a()},[]);const a=async()=>{const{data:{user:u}}=await ue.auth.getUser();if(!u){n("/auth");return}const{data:f}=await ue.from("user_roles").select("role").eq("user_id",u.id);t((f==null?void 0:f.some(m=>m.role==="seller"))||!1),s(!1)},l=()=>{window.open("https://wa.me/60193438388?text=Hi,%20I%20have%20completed%20my%20seller%20subscription%20payment","_blank")};return i?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):e?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5 flex items-center justify-center p-4",children:d.jsxs(Se,{className:"max-w-md w-full",children:[d.jsxs(Ue,{children:[d.jsx(Ze,{children:"Subscription Active"}),d.jsx(gt,{children:"Your seller subscription is already active"})]}),d.jsx(Be,{children:d.jsx(re,{onClick:()=>n("/dashboard"),className:"w-full",children:"Go to Dashboard"})})]})}):d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5",children:[d.jsx("header",{className:"border-b bg-background/95 backdrop-blur",children:d.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center gap-4",children:[d.jsx(re,{variant:"ghost",onClick:()=>n("/dashboard"),children:d.jsx(Cn,{className:"w-4 h-4"})}),d.jsx("h1",{className:"text-2xl font-bold",children:"Seller Subscription"})]})}),d.jsx("main",{className:"container mx-auto px-4 py-8",children:d.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:d.jsxs(Se,{children:[d.jsxs(Ue,{children:[d.jsx(Ze,{children:"Subscribe as a Seller"}),d.jsx(gt,{children:"Join PasarMalamAI as a seller for just RM50 for 2 months"})]}),d.jsxs(Be,{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Benefits:"}),d.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:[d.jsx("li",{children:"List unlimited products"}),d.jsx("li",{children:"Manage pre-orders from customers"}),d.jsx("li",{children:"Direct bank transfer payouts"}),d.jsx("li",{children:"Analytics and insights"}),d.jsx("li",{children:"Customer support"})]})]}),d.jsxs("div",{className:"border-t pt-6",children:[d.jsx("h3",{className:"font-semibold mb-4",children:"Payment Instructions:"}),d.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm mb-6",children:[d.jsx("li",{children:"Scan the QR code below using your banking app"}),d.jsx("li",{children:"Transfer RM50 to the account"}),d.jsx("li",{children:"After payment, contact us via WhatsApp with proof"}),d.jsx("li",{children:"Your seller account will be activated within 24 hours"})]}),d.jsx("div",{className:"bg-white p-6 rounded-lg flex justify-center mb-6",children:d.jsx("img",{src:QS,alt:"Payment QR Code",className:"max-w-full h-auto",style:{maxHeight:"400px"}})}),d.jsxs(re,{onClick:l,className:"w-full",size:"lg",children:[d.jsx(co,{className:"w-5 h-5 mr-2"}),"Contact on WhatsApp After Payment"]})]})]})]})})})]})};function mm(n,e){const t=b.useRef(e);b.useEffect(function(){e!==t.current&&n.attributionControl!=null&&(t.current!=null&&n.attributionControl.removeAttribution(t.current),e!=null&&n.attributionControl.addAttribution(e)),t.current=e},[n,e])}const ek=1;function tk(n){return Object.freeze({__version:ek,map:n})}function nk(n,e){return Object.freeze({...n,...e})}const pm=b.createContext(null),gm=pm.Provider;function vm(){const n=b.useContext(pm);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function rk(n){function e(t,i){const{instance:s,context:a}=n(t).current;return b.useImperativeHandle(i,()=>s),t.children==null?null:z.createElement(gm,{value:a},t.children)}return b.forwardRef(e)}function ik(n){function e(t,i){const[s,a]=b.useState(!1),{instance:l}=n(t,a).current;b.useImperativeHandle(i,()=>l),b.useEffect(function(){s&&l.update()},[l,s,t.children]);const u=l._contentNode;return u?hs.createPortal(t.children,u):null}return b.forwardRef(e)}function sk(n){function e(t,i){const{instance:s}=n(t).current;return b.useImperativeHandle(i,()=>s),null}return b.forwardRef(e)}function _m(n,e){const t=b.useRef();b.useEffect(function(){return e!=null&&n.instance.on(e),t.current=e,function(){t.current!=null&&n.instance.off(t.current),t.current=null}},[n,e])}function ic(n,e){const t=n.pane??e.pane;return t?{...n,pane:t}:n}function ok(n,e){return function(i,s){const a=vm(),l=n(ic(i,a),a);return mm(a.map,i.attribution),_m(l.current,i.eventHandlers),e(l.current,a,i,s),l}}var Al={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,e){(function(t,i){i(e)})(St,function(t){var i="1.9.4";function s(r){var o,c,h,g;for(c=1,h=arguments.length;c<h;c++){g=arguments[c];for(o in g)r[o]=g[o]}return r}var a=Object.create||function(){function r(){}return function(o){return r.prototype=o,new r}}();function l(r,o){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var h=c.call(arguments,2);return function(){return r.apply(o,h.length?h.concat(c.call(arguments)):arguments)}}var u=0;function f(r){return"_leaflet_id"in r||(r._leaflet_id=++u),r._leaflet_id}function m(r,o,c){var h,g,x,E;return E=function(){h=!1,g&&(x.apply(c,g),g=!1)},x=function(){h?g=arguments:(r.apply(c,arguments),setTimeout(E,o),h=!0)},x}function p(r,o,c){var h=o[1],g=o[0],x=h-g;return r===h&&c?r:((r-g)%x+x)%x+g}function v(){return!1}function S(r,o){if(o===!1)return r;var c=Math.pow(10,o===void 0?6:o);return Math.round(r*c)/c}function _(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function T(r){return _(r).split(/\s+/)}function y(r,o){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?a(r.options):{});for(var c in o)r.options[c]=o[c];return r.options}function w(r,o,c){var h=[];for(var g in r)h.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!o||o.indexOf("?")===-1?"?":"&")+h.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function C(r,o){return r.replace(k,function(c,h){var g=o[h];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(o)),g})}var P=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function j(r,o){for(var c=0;c<r.length;c++)if(r[c]===o)return c;return-1}var N="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function R(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var M=0;function U(r){var o=+new Date,c=Math.max(0,16-(o-M));return M=o+c,window.setTimeout(r,c)}var q=window.requestAnimationFrame||R("RequestAnimationFrame")||U,Y=window.cancelAnimationFrame||R("CancelAnimationFrame")||R("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function G(r,o,c){if(c&&q===U)r.call(o);else return q.call(window,l(r,o))}function Z(r){r&&Y.call(window,r)}var be={__proto__:null,extend:s,create:a,bind:l,get lastId(){return u},stamp:f,throttle:m,wrapNum:p,falseFn:v,formatNum:S,trim:_,splitWords:T,setOptions:y,getParamString:w,template:C,isArray:P,indexOf:j,emptyImageUrl:N,requestFn:q,cancelFn:Y,requestAnimFrame:G,cancelAnimFrame:Z};function F(){}F.extend=function(r){var o=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,h=a(c);h.constructor=o,o.prototype=h;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(o[g]=this[g]);return r.statics&&s(o,r.statics),r.includes&&(ye(r.includes),s.apply(null,[h].concat(r.includes))),s(h,r),delete h.statics,delete h.includes,h.options&&(h.options=c.options?a(c.options):{},s(h.options,r.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var x=0,E=h._initHooks.length;x<E;x++)h._initHooks[x].call(this)}},o},F.include=function(r){var o=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=o,this.mergeOptions(r.options)),this},F.mergeOptions=function(r){return s(this.prototype.options,r),this},F.addInitHook=function(r){var o=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function ye(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=P(r)?r:[r];for(var o=0;o<r.length;o++)r[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var K={on:function(r,o,c){if(typeof r=="object")for(var h in r)this._on(h,r[h],o);else{r=T(r);for(var g=0,x=r.length;g<x;g++)this._on(r[g],o,c)}return this},off:function(r,o,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var h in r)this._off(h,r[h],o);else{r=T(r);for(var g=arguments.length===1,x=0,E=r.length;x<E;x++)g?this._off(r[x]):this._off(r[x],o,c)}return this},_on:function(r,o,c,h){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(r,o,c)===!1){c===this&&(c=void 0);var g={fn:o,ctx:c};h&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,o,c){var h,g,x;if(this._events&&(h=this._events[r],!!h)){if(arguments.length===1){if(this._firingCount)for(g=0,x=h.length;g<x;g++)h[g].fn=v;delete this._events[r];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var E=this._listens(r,o,c);if(E!==!1){var A=h[E];this._firingCount&&(A.fn=v,this._events[r]=h=h.slice()),h.splice(E,1)}}},fire:function(r,o,c){if(!this.listens(r,c))return this;var h=s({},o,{type:r,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var x=0,E=g.length;x<E;x++){var A=g[x],O=A.fn;A.once&&this.off(r,O,A.ctx),O.call(A.ctx||this,h)}this._firingCount--}}return c&&this._propagateEvent(h),this},listens:function(r,o,c,h){typeof r!="string"&&console.warn('"string" type argument expected');var g=o;typeof o!="function"&&(h=!!o,g=void 0,c=void 0);var x=this._events&&this._events[r];if(x&&x.length&&this._listens(r,g,c)!==!1)return!0;if(h){for(var E in this._eventParents)if(this._eventParents[E].listens(r,o,c,h))return!0}return!1},_listens:function(r,o,c){if(!this._events)return!1;var h=this._events[r]||[];if(!o)return!!h.length;c===this&&(c=void 0);for(var g=0,x=h.length;g<x;g++)if(h[g].fn===o&&h[g].ctx===c)return g;return!1},once:function(r,o,c){if(typeof r=="object")for(var h in r)this._on(h,r[h],o,!0);else{r=T(r);for(var g=0,x=r.length;g<x;g++)this._on(r[g],o,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[f(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[f(r)],this},_propagateEvent:function(r){for(var o in this._eventParents)this._eventParents[o].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};K.addEventListener=K.on,K.removeEventListener=K.clearAllEventListeners=K.off,K.addOneTimeEventListener=K.once,K.fireEvent=K.fire,K.hasEventListeners=K.listens;var te=F.extend(K);function $(r,o,c){this.x=c?Math.round(r):r,this.y=c?Math.round(o):o}var J=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(r){return this.clone()._add(W(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(W(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new $(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new $(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=J(this.x),this.y=J(this.y),this},distanceTo:function(r){r=W(r);var o=r.x-this.x,c=r.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(r){return r=W(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=W(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function W(r,o,c){return r instanceof $?r:P(r)?new $(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new $(r.x,r.y):new $(r,o,c)}function de(r,o){if(r)for(var c=o?[r,o]:r,h=0,g=c.length;h<g;h++)this.extend(c[h])}de.prototype={extend:function(r){var o,c;if(!r)return this;if(r instanceof $||typeof r[0]=="number"||"x"in r)o=c=W(r);else if(r=oe(r),o=r.min,c=r.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return W((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return W(this.min.x,this.max.y)},getTopRight:function(){return W(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var o,c;return typeof r[0]=="number"||r instanceof $?r=W(r):r=oe(r),r instanceof de?(o=r.min,c=r.max):o=c=r,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=oe(r);var o=this.min,c=this.max,h=r.min,g=r.max,x=g.x>=o.x&&h.x<=c.x,E=g.y>=o.y&&h.y<=c.y;return x&&E},overlaps:function(r){r=oe(r);var o=this.min,c=this.max,h=r.min,g=r.max,x=g.x>o.x&&h.x<c.x,E=g.y>o.y&&h.y<c.y;return x&&E},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var o=this.min,c=this.max,h=Math.abs(o.x-c.x)*r,g=Math.abs(o.y-c.y)*r;return oe(W(o.x-h,o.y-g),W(c.x+h,c.y+g))},equals:function(r){return r?(r=oe(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function oe(r,o){return!r||r instanceof de?r:new de(r,o)}function ae(r,o){if(r)for(var c=o?[r,o]:r,h=0,g=c.length;h<g;h++)this.extend(c[h])}ae.prototype={extend:function(r){var o=this._southWest,c=this._northEast,h,g;if(r instanceof le)h=r,g=r;else if(r instanceof ae){if(h=r._southWest,g=r._northEast,!h||!g)return this}else return r?this.extend(pe(r)||ie(r)):this;return!o&&!c?(this._southWest=new le(h.lat,h.lng),this._northEast=new le(g.lat,g.lng)):(o.lat=Math.min(h.lat,o.lat),o.lng=Math.min(h.lng,o.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var o=this._southWest,c=this._northEast,h=Math.abs(o.lat-c.lat)*r,g=Math.abs(o.lng-c.lng)*r;return new ae(new le(o.lat-h,o.lng-g),new le(c.lat+h,c.lng+g))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof le||"lat"in r?r=pe(r):r=ie(r);var o=this._southWest,c=this._northEast,h,g;return r instanceof ae?(h=r.getSouthWest(),g=r.getNorthEast()):h=g=r,h.lat>=o.lat&&g.lat<=c.lat&&h.lng>=o.lng&&g.lng<=c.lng},intersects:function(r){r=ie(r);var o=this._southWest,c=this._northEast,h=r.getSouthWest(),g=r.getNorthEast(),x=g.lat>=o.lat&&h.lat<=c.lat,E=g.lng>=o.lng&&h.lng<=c.lng;return x&&E},overlaps:function(r){r=ie(r);var o=this._southWest,c=this._northEast,h=r.getSouthWest(),g=r.getNorthEast(),x=g.lat>o.lat&&h.lat<c.lat,E=g.lng>o.lng&&h.lng<c.lng;return x&&E},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,o){return r?(r=ie(r),this._southWest.equals(r.getSouthWest(),o)&&this._northEast.equals(r.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ie(r,o){return r instanceof ae?r:new ae(r,o)}function le(r,o,c){if(isNaN(r)||isNaN(o))throw new Error("Invalid LatLng object: ("+r+", "+o+")");this.lat=+r,this.lng=+o,c!==void 0&&(this.alt=+c)}le.prototype={equals:function(r,o){if(!r)return!1;r=pe(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(o===void 0?1e-9:o)},toString:function(r){return"LatLng("+S(this.lat,r)+", "+S(this.lng,r)+")"},distanceTo:function(r){return at.distance(this,pe(r))},wrap:function(){return at.wrapLatLng(this)},toBounds:function(r){var o=180*r/40075017,c=o/Math.cos(Math.PI/180*this.lat);return ie([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function pe(r,o,c){return r instanceof le?r:P(r)&&typeof r[0]!="object"?r.length===3?new le(r[0],r[1],r[2]):r.length===2?new le(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new le(r.lat,"lng"in r?r.lng:r.lon,r.alt):o===void 0?null:new le(r,o,c)}var Te={latLngToPoint:function(r,o){var c=this.projection.project(r),h=this.scale(o);return this.transformation._transform(c,h)},pointToLatLng:function(r,o){var c=this.scale(o),h=this.transformation.untransform(r,c);return this.projection.unproject(h)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(r),h=this.transformation.transform(o.min,c),g=this.transformation.transform(o.max,c);return new de(h,g)},infinite:!1,wrapLatLng:function(r){var o=this.wrapLng?p(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?p(r.lat,this.wrapLat,!0):r.lat,h=r.alt;return new le(c,o,h)},wrapLatLngBounds:function(r){var o=r.getCenter(),c=this.wrapLatLng(o),h=o.lat-c.lat,g=o.lng-c.lng;if(h===0&&g===0)return r;var x=r.getSouthWest(),E=r.getNorthEast(),A=new le(x.lat-h,x.lng-g),O=new le(E.lat-h,E.lng-g);return new ae(A,O)}},at=s({},Te,{wrapLng:[-180,180],R:6371e3,distance:function(r,o){var c=Math.PI/180,h=r.lat*c,g=o.lat*c,x=Math.sin((o.lat-r.lat)*c/2),E=Math.sin((o.lng-r.lng)*c/2),A=x*x+Math.cos(h)*Math.cos(g)*E*E,O=2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A));return this.R*O}}),Rt=6378137,Lt={R:Rt,MAX_LATITUDE:85.0511287798,project:function(r){var o=Math.PI/180,c=this.MAX_LATITUDE,h=Math.max(Math.min(c,r.lat),-c),g=Math.sin(h*o);return new $(this.R*r.lng*o,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var o=180/Math.PI;return new le((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*o,r.x*o/this.R)},bounds:function(){var r=Rt*Math.PI;return new de([-r,-r],[r,r])}()};function Tt(r,o,c,h){if(P(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=o,this._c=c,this._d=h}Tt.prototype={transform:function(r,o){return this._transform(r.clone(),o)},_transform:function(r,o){return o=o||1,r.x=o*(this._a*r.x+this._b),r.y=o*(this._c*r.y+this._d),r},untransform:function(r,o){return o=o||1,new $((r.x/o-this._b)/this._a,(r.y/o-this._d)/this._c)}};function Pt(r,o,c,h){return new Tt(r,o,c,h)}var Et=s({},at,{code:"EPSG:3857",projection:Lt,transformation:function(){var r=.5/(Math.PI*Lt.R);return Pt(r,.5,-r,.5)}()}),Or=s({},Et,{code:"EPSG:900913"});function Nr(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function rr(r,o){var c="",h,g,x,E,A,O;for(h=0,x=r.length;h<x;h++){for(A=r[h],g=0,E=A.length;g<E;g++)O=A[g],c+=(g?"L":"M")+O.x+" "+O.y;c+=o?ee.svg?"z":"x":""}return c||"M0 0"}var ir=document.documentElement.style,Gt="ActiveXObject"in window,Rn=Gt&&!document.addEventListener,Ei="msLaunchUri"in navigator&&!("documentMode"in document),gn=en("webkit"),Ci=en("android"),Kt=en("android 2")||en("android 3"),Yo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Qo=Ci&&en("Google")&&Yo<537&&!("AudioNode"in window),tt=!!window.opera,vn=!Ei&&en("chrome"),bs=en("gecko")&&!gn&&!tt&&!Gt,Xo=!vn&&en("safari"),sr=en("phantom"),xs="OTransition"in ir,Ss=navigator.platform.indexOf("Win")===0,Rr=Gt&&"transition"in ir,Jt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Kt,ji="MozPerspective"in ir,Ln=!window.L_DISABLE_3D&&(Rr||Jt||ji)&&!xs&&!sr,or=typeof orientation<"u"||en("mobile"),ea=or&&gn,ks=or&&Jt,Ai=!window.PointerEvent&&window.MSPointerEvent,Ts=!!(window.PointerEvent||Ai),Lr="ontouchstart"in window||!!window.TouchEvent,Yt=!window.L_NO_TOUCH&&(Lr||Ts),ta=or&&tt,ce=or&&bs,Ne=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ie=function(){var r=!1;try{var o=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",v,o),window.removeEventListener("testPassiveEventSupport",v,o)}catch{}return r}(),_t=function(){return!!document.createElement("canvas").getContext}(),lt=!!(document.createElementNS&&Nr("svg").createSVGRect),Qt=!!lt&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),_n=!lt&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var o=r.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),yt=navigator.platform.indexOf("Mac")===0,Xt=navigator.platform.indexOf("Linux")===0;function en(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ee={ie:Gt,ielt9:Rn,edge:Ei,webkit:gn,android:Ci,android23:Kt,androidStock:Qo,opera:tt,chrome:vn,gecko:bs,safari:Xo,phantom:sr,opera12:xs,win:Ss,ie3d:Rr,webkit3d:Jt,gecko3d:ji,any3d:Ln,mobile:or,mobileWebkit:ea,mobileWebkit3d:ks,msPointer:Ai,pointer:Ts,touch:Yt,touchNative:Lr,mobileOpera:ta,mobileGecko:ce,retina:Ne,passiveEvents:Ie,canvas:_t,svg:lt,vml:_n,inlineSvg:Qt,mac:yt,linux:Xt},dc=ee.msPointer?"MSPointerDown":"pointerdown",hc=ee.msPointer?"MSPointerMove":"pointermove",fc=ee.msPointer?"MSPointerUp":"pointerup",mc=ee.msPointer?"MSPointerCancel":"pointercancel",na={touchstart:dc,touchmove:hc,touchend:fc,touchcancel:mc},pc={touchstart:ip,touchmove:Ps,touchend:Ps,touchcancel:Ps},Ir={},gc=!1;function Xm(r,o,c){return o==="touchstart"&&rp(),pc[o]?(c=pc[o].bind(this,c),r.addEventListener(na[o],c,!1),c):(console.warn("wrong event specified:",o),v)}function ep(r,o,c){if(!na[o]){console.warn("wrong event specified:",o);return}r.removeEventListener(na[o],c,!1)}function tp(r){Ir[r.pointerId]=r}function np(r){Ir[r.pointerId]&&(Ir[r.pointerId]=r)}function vc(r){delete Ir[r.pointerId]}function rp(){gc||(document.addEventListener(dc,tp,!0),document.addEventListener(hc,np,!0),document.addEventListener(fc,vc,!0),document.addEventListener(mc,vc,!0),gc=!0)}function Ps(r,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in Ir)o.touches.push(Ir[c]);o.changedTouches=[o],r(o)}}function ip(r,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&et(o),Ps(r,o)}function sp(r){var o={},c,h;for(h in r)c=r[h],o[h]=c&&c.bind?c.bind(r):c;return r=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var op=200;function ap(r,o){r.addEventListener("dblclick",o);var c=0,h;function g(x){if(x.detail!==1){h=x.detail;return}if(!(x.pointerType==="mouse"||x.sourceCapabilities&&!x.sourceCapabilities.firesTouchEvents)){var E=xc(x);if(!(E.some(function(O){return O instanceof HTMLLabelElement&&O.attributes.for})&&!E.some(function(O){return O instanceof HTMLInputElement||O instanceof HTMLSelectElement}))){var A=Date.now();A-c<=op?(h++,h===2&&o(sp(x))):h=1,c=A}}}return r.addEventListener("click",g),{dblclick:o,simDblclick:g}}function lp(r,o){r.removeEventListener("dblclick",o.dblclick),r.removeEventListener("click",o.simDblclick)}var ra=js(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Oi=js(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),_c=Oi==="webkitTransition"||Oi==="OTransition"?Oi+"End":"transitionend";function yc(r){return typeof r=="string"?document.getElementById(r):r}function Ni(r,o){var c=r.style[o]||r.currentStyle&&r.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(r,null);c=h?h[o]:null}return c==="auto"?null:c}function je(r,o,c){var h=document.createElement(r);return h.className=o||"",c&&c.appendChild(h),h}function We(r){var o=r.parentNode;o&&o.removeChild(r)}function Es(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Mr(r){var o=r.parentNode;o&&o.lastChild!==r&&o.appendChild(r)}function Dr(r){var o=r.parentNode;o&&o.firstChild!==r&&o.insertBefore(r,o.firstChild)}function ia(r,o){if(r.classList!==void 0)return r.classList.contains(o);var c=Cs(r);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function we(r,o){if(r.classList!==void 0)for(var c=T(o),h=0,g=c.length;h<g;h++)r.classList.add(c[h]);else if(!ia(r,o)){var x=Cs(r);sa(r,(x?x+" ":"")+o)}}function Ve(r,o){r.classList!==void 0?r.classList.remove(o):sa(r,_((" "+Cs(r)+" ").replace(" "+o+" "," ")))}function sa(r,o){r.className.baseVal===void 0?r.className=o:r.className.baseVal=o}function Cs(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Ct(r,o){"opacity"in r.style?r.style.opacity=o:"filter"in r.style&&cp(r,o)}function cp(r,o){var c=!1,h="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(h)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):r.style.filter+=" progid:"+h+"(opacity="+o+")"}function js(r){for(var o=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in o)return r[c];return!1}function ar(r,o,c){var h=o||new $(0,0);r.style[ra]=(ee.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(c?" scale("+c+")":"")}function Ge(r,o){r._leaflet_pos=o,ee.any3d?ar(r,o):(r.style.left=o.x+"px",r.style.top=o.y+"px")}function lr(r){return r._leaflet_pos||new $(0,0)}var Ri,Li,oa;if("onselectstart"in document)Ri=function(){ve(window,"selectstart",et)},Li=function(){Me(window,"selectstart",et)};else{var Ii=js(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ri=function(){if(Ii){var r=document.documentElement.style;oa=r[Ii],r[Ii]="none"}},Li=function(){Ii&&(document.documentElement.style[Ii]=oa,oa=void 0)}}function aa(){ve(window,"dragstart",et)}function la(){Me(window,"dragstart",et)}var As,ca;function ua(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Os(),As=r,ca=r.style.outlineStyle,r.style.outlineStyle="none",ve(window,"keydown",Os))}function Os(){As&&(As.style.outlineStyle=ca,As=void 0,ca=void 0,Me(window,"keydown",Os))}function wc(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function da(r){var o=r.getBoundingClientRect();return{x:o.width/r.offsetWidth||1,y:o.height/r.offsetHeight||1,boundingClientRect:o}}var up={__proto__:null,TRANSFORM:ra,TRANSITION:Oi,TRANSITION_END:_c,get:yc,getStyle:Ni,create:je,remove:We,empty:Es,toFront:Mr,toBack:Dr,hasClass:ia,addClass:we,removeClass:Ve,setClass:sa,getClass:Cs,setOpacity:Ct,testProp:js,setTransform:ar,setPosition:Ge,getPosition:lr,get disableTextSelection(){return Ri},get enableTextSelection(){return Li},disableImageDrag:aa,enableImageDrag:la,preventOutline:ua,restoreOutline:Os,getSizedParentNode:wc,getScale:da};function ve(r,o,c,h){if(o&&typeof o=="object")for(var g in o)fa(r,g,o[g],c);else{o=T(o);for(var x=0,E=o.length;x<E;x++)fa(r,o[x],c,h)}return this}var tn="_leaflet_events";function Me(r,o,c,h){if(arguments.length===1)bc(r),delete r[tn];else if(o&&typeof o=="object")for(var g in o)ma(r,g,o[g],c);else if(o=T(o),arguments.length===2)bc(r,function(A){return j(o,A)!==-1});else for(var x=0,E=o.length;x<E;x++)ma(r,o[x],c,h);return this}function bc(r,o){for(var c in r[tn]){var h=c.split(/\d/)[0];(!o||o(h))&&ma(r,h,null,null,c)}}var ha={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function fa(r,o,c,h){var g=o+f(c)+(h?"_"+f(h):"");if(r[tn]&&r[tn][g])return this;var x=function(A){return c.call(h||r,A||window.event)},E=x;!ee.touchNative&&ee.pointer&&o.indexOf("touch")===0?x=Xm(r,o,x):ee.touch&&o==="dblclick"?x=ap(r,x):"addEventListener"in r?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?r.addEventListener(ha[o]||o,x,ee.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(x=function(A){A=A||window.event,ga(r,A)&&E(A)},r.addEventListener(ha[o],x,!1)):r.addEventListener(o,E,!1):r.attachEvent("on"+o,x),r[tn]=r[tn]||{},r[tn][g]=x}function ma(r,o,c,h,g){g=g||o+f(c)+(h?"_"+f(h):"");var x=r[tn]&&r[tn][g];if(!x)return this;!ee.touchNative&&ee.pointer&&o.indexOf("touch")===0?ep(r,o,x):ee.touch&&o==="dblclick"?lp(r,x):"removeEventListener"in r?r.removeEventListener(ha[o]||o,x,!1):r.detachEvent("on"+o,x),r[tn][g]=null}function cr(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function pa(r){return fa(r,"wheel",cr),this}function Mi(r){return ve(r,"mousedown touchstart dblclick contextmenu",cr),r._leaflet_disable_click=!0,this}function et(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function ur(r){return et(r),cr(r),this}function xc(r){if(r.composedPath)return r.composedPath();for(var o=[],c=r.target;c;)o.push(c),c=c.parentNode;return o}function Sc(r,o){if(!o)return new $(r.clientX,r.clientY);var c=da(o),h=c.boundingClientRect;return new $((r.clientX-h.left)/c.x-o.clientLeft,(r.clientY-h.top)/c.y-o.clientTop)}var dp=ee.linux&&ee.chrome?window.devicePixelRatio:ee.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function kc(r){return ee.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/dp:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function ga(r,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var hp={__proto__:null,on:ve,off:Me,stopPropagation:cr,disableScrollPropagation:pa,disableClickPropagation:Mi,preventDefault:et,stop:ur,getPropagationPath:xc,getMousePosition:Sc,getWheelDelta:kc,isExternalTarget:ga,addListener:ve,removeListener:Me},Tc=te.extend({run:function(r,o,c,h){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=lr(r),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=G(this._animate,this),this._step()},_step:function(r){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,o){var c=this._startPos.add(this._offset.multiplyBy(r));o&&c._round(),Ge(this._el,c),this.fire("step")},_complete:function(){Z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Pe=te.extend({options:{crs:Et,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,o){o=y(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(pe(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Oi&&ee.any3d&&!ee.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ve(this._proxy,_c,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),r=this._limitCenter(pe(r),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var h=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,o,c.zoom):this._tryAnimatedPan(r,c.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(r,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,o){return this._loaded?this.setView(this.getCenter(),r,{zoom:o}):(this._zoom=r,this)},zoomIn:function(r,o){return r=r||(ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,o)},zoomOut:function(r,o){return r=r||(ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,o)},setZoomAround:function(r,o,c){var h=this.getZoomScale(o),g=this.getSize().divideBy(2),x=r instanceof $?r:this.latLngToContainerPoint(r),E=x.subtract(g).multiplyBy(1-1/h),A=this.containerPointToLatLng(g.add(E));return this.setView(A,o,{zoom:c})},_getBoundsCenterZoom:function(r,o){o=o||{},r=r.getBounds?r.getBounds():ie(r);var c=W(o.paddingTopLeft||o.padding||[0,0]),h=W(o.paddingBottomRight||o.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(h));if(g=typeof o.maxZoom=="number"?Math.min(o.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var x=h.subtract(c).divideBy(2),E=this.project(r.getSouthWest(),g),A=this.project(r.getNorthEast(),g),O=this.unproject(E.add(A).divideBy(2).add(x),g);return{center:O,zoom:g}},fitBounds:function(r,o){if(r=ie(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,o){return this.setView(r,this._zoom,{pan:o})},panBy:function(r,o){if(r=W(r).round(),o=o||{},!r.x&&!r.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Tc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){we(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,o,c){if(c=c||{},c.animate===!1||!ee.any3d)return this.setView(r,o,c);this._stop();var h=this.project(this.getCenter()),g=this.project(r),x=this.getSize(),E=this._zoom;r=pe(r),o=o===void 0?E:o;var A=Math.max(x.x,x.y),O=A*this.getZoomScale(E,o),D=g.distanceTo(h)||1,H=1.42,se=H*H;function xe(Ke){var Zs=Ke?-1:1,eg=Ke?O:A,tg=O*O-A*A+Zs*se*se*D*D,ng=2*eg*se*D,Ea=tg/ng,su=Math.sqrt(Ea*Ea+1)-Ea,rg=su<1e-9?-18:Math.log(su);return rg}function ct(Ke){return(Math.exp(Ke)-Math.exp(-Ke))/2}function Xe(Ke){return(Math.exp(Ke)+Math.exp(-Ke))/2}function At(Ke){return ct(Ke)/Xe(Ke)}var ft=xe(0);function Zr(Ke){return A*(Xe(ft)/Xe(ft+H*Ke))}function Jp(Ke){return A*(Xe(ft)*At(ft+H*Ke)-ct(ft))/se}function Yp(Ke){return 1-Math.pow(1-Ke,1.5)}var Qp=Date.now(),ru=(xe(1)-ft)/H,Xp=c.duration?1e3*c.duration:1e3*ru*.8;function iu(){var Ke=(Date.now()-Qp)/Xp,Zs=Yp(Ke)*ru;Ke<=1?(this._flyToFrame=G(iu,this),this._move(this.unproject(h.add(g.subtract(h).multiplyBy(Jp(Zs)/D)),E),this.getScaleZoom(A/Zr(Zs),E),{flyTo:!0})):this._move(r,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),iu.call(this),this},flyToBounds:function(r,o){var c=this._getBoundsCenterZoom(r,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(r){return r=ie(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var o=this.options.minZoom;return this.options.minZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var o=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,o){this._enforcingBounds=!0;var c=this.getCenter(),h=this._limitCenter(c,this._zoom,ie(r));return c.equals(h)||this.panTo(h,o),this._enforcingBounds=!1,this},panInside:function(r,o){o=o||{};var c=W(o.paddingTopLeft||o.padding||[0,0]),h=W(o.paddingBottomRight||o.padding||[0,0]),g=this.project(this.getCenter()),x=this.project(r),E=this.getPixelBounds(),A=oe([E.min.add(c),E.max.subtract(h)]),O=A.getSize();if(!A.contains(x)){this._enforcingBounds=!0;var D=x.subtract(A.getCenter()),H=A.extend(x).getSize().subtract(O);g.x+=D.x<0?-H.x:H.x,g.y+=D.y<0?-H.y:H.y,this.panTo(this.unproject(g),o),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),h=o.divideBy(2).round(),g=c.divideBy(2).round(),x=h.subtract(g);return!x.x&&!x.y?this:(r.animate&&r.pan?this.panBy(x):(r.pan&&this._rawPanBy(x),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,r):navigator.geolocation.getCurrentPosition(o,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var o=r.code,c=r.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var o=r.coords.latitude,c=r.coords.longitude,h=new le(o,c),g=h.toBounds(r.coords.accuracy*2),x=this._locateOptions;if(x.setView){var E=this.getBoundsZoom(g);this.setView(h,x.maxZoom?Math.min(E,x.maxZoom):E)}var A={latlng:h,bounds:g,timestamp:r.timestamp};for(var O in r.coords)typeof r.coords[O]=="number"&&(A[O]=r.coords[O]);this.fire("locationfound",A)}},addHandler:function(r,o){if(!o)return this;var c=this[r]=new o(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),We(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)We(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,o){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),h=je("div",c,o||this._mapPane);return r&&(this._panes[r]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),o=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new ae(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,o,c){r=ie(r),c=W(c||[0,0]);var h=this.getZoom()||0,g=this.getMinZoom(),x=this.getMaxZoom(),E=r.getNorthWest(),A=r.getSouthEast(),O=this.getSize().subtract(c),D=oe(this.project(A,h),this.project(E,h)).getSize(),H=ee.any3d?this.options.zoomSnap:1,se=O.x/D.x,xe=O.y/D.y,ct=o?Math.max(se,xe):Math.min(se,xe);return h=this.getScaleZoom(ct,h),H&&(h=Math.round(h/(H/100))*(H/100),h=o?Math.ceil(h/H)*H:Math.floor(h/H)*H),Math.max(g,Math.min(x,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,o){var c=this._getTopLeftPoint(r,o);return new de(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(r)/c.scale(o)},getScaleZoom:function(r,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var h=c.zoom(r*c.scale(o));return isNaN(h)?1/0:h},project:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(pe(r),o)},unproject:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(W(r),o)},layerPointToLatLng:function(r){var o=W(r).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(r){var o=this.project(pe(r))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(pe(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(ie(r))},distance:function(r,o){return this.options.crs.distance(pe(r),pe(o))},containerPointToLayerPoint:function(r){return W(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return W(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var o=this.containerPointToLayerPoint(W(r));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(r)))},mouseEventToContainerPoint:function(r){return Sc(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var o=this._container=yc(r);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ve(o,"scroll",this._onScroll,this),this._containerId=f(o)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ee.any3d,we(r,"leaflet-container"+(ee.touch?" leaflet-touch":"")+(ee.retina?" leaflet-retina":"")+(ee.ielt9?" leaflet-oldie":"")+(ee.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=Ni(r,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ge(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(we(r.markerPane,"leaflet-zoom-hide"),we(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,o,c){Ge(this._mapPane,new $(0,0));var h=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var g=this._zoom!==o;this._moveStart(g,c)._move(r,o)._moveEnd(g),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(r,o){return r&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(r,o,c,h){o===void 0&&(o=this._zoom);var g=this._zoom!==o;return this._zoom=o,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),h?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Ge(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[f(this._container)]=this;var o=r?Me:ve;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),ee.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Z(this._resizeRequest),this._resizeRequest=G(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,o){for(var c=[],h,g=o==="mouseout"||o==="mouseover",x=r.target||r.srcElement,E=!1;x;){if(h=this._targets[f(x)],h&&(o==="click"||o==="preclick")&&this._draggableMoved(h)){E=!0;break}if(h&&h.listens(o,!0)&&(g&&!ga(x,r)||(c.push(h),g))||x===this._container)break;x=x.parentNode}return!c.length&&!E&&!g&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var o=r.target||r.srcElement;if(!(!this._loaded||o._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(o))){var c=r.type;c==="mousedown"&&ua(o),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,o,c){if(r.type==="click"){var h=s({},r);h.type="preclick",this._fireDOMEvent(h,h.type,c)}var g=this._findEventTargets(r,o);if(c){for(var x=[],E=0;E<c.length;E++)c[E].listens(o,!0)&&x.push(c[E]);g=x.concat(g)}if(g.length){o==="contextmenu"&&et(r);var A=g[0],O={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var D=A.getLatLng&&(!A._radius||A._radius<=10);O.containerPoint=D?this.latLngToContainerPoint(A.getLatLng()):this.mouseEventToContainerPoint(r),O.layerPoint=this.containerPointToLayerPoint(O.containerPoint),O.latlng=D?A.getLatLng():this.layerPointToLatLng(O.layerPoint)}for(E=0;E<g.length;E++)if(g[E].fire(o,O,!0),O.originalEvent._stopped||g[E].options.bubblingMouseEvents===!1&&j(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,o=this._handlers.length;r<o;r++)this._handlers[r].disable()},whenReady:function(r,o){return this._loaded?r.call(o||this,{target:this}):this.on("load",r,o),this},_getMapPanePos:function(){return lr(this._mapPane)||new $(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,o){var c=r&&o!==void 0?this._getNewPixelOrigin(r,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,o){var c=this.getSize()._divideBy(2);return this.project(r,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,o,c){var h=this._getNewPixelOrigin(c,o);return this.project(r,o)._subtract(h)},_latLngBoundsToNewLayerBounds:function(r,o,c){var h=this._getNewPixelOrigin(c,o);return oe([this.project(r.getSouthWest(),o)._subtract(h),this.project(r.getNorthWest(),o)._subtract(h),this.project(r.getSouthEast(),o)._subtract(h),this.project(r.getNorthEast(),o)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,o,c){if(!c)return r;var h=this.project(r,o),g=this.getSize().divideBy(2),x=new de(h.subtract(g),h.add(g)),E=this._getBoundsOffset(x,c,o);return Math.abs(E.x)<=1&&Math.abs(E.y)<=1?r:this.unproject(h.add(E),o)},_limitOffset:function(r,o){if(!o)return r;var c=this.getPixelBounds(),h=new de(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(h,o))},_getBoundsOffset:function(r,o,c){var h=oe(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),g=h.min.subtract(r.min),x=h.max.subtract(r.max),E=this._rebound(g.x,-x.x),A=this._rebound(g.y,-x.y);return new $(E,A)},_rebound:function(r,o){return r+o>0?Math.round(r-o)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(o))},_limitZoom:function(r){var o=this.getMinZoom(),c=this.getMaxZoom(),h=ee.any3d?this.options.zoomSnap:1;return h&&(r=Math.round(r/h)*h),Math.max(o,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ve(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,o){var c=this._getCenterOffset(r)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var r=this._proxy=je("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(o){var c=ra,h=this._proxy.style[c];ar(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),h===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){We(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),o=this.getZoom();ar(this._proxy,this.project(r,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(o),g=this._getCenterOffset(r)._divideBy(1-1/h);return c.animate!==!0&&!this.getSize().contains(g)?!1:(G(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,o,!0)},this),!0)},_animateZoom:function(r,o,c,h){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=o,we(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:o,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ve(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function fp(r,o){return new Pe(r,o)}var It=F.extend({options:{position:"topright"},initialize:function(r){y(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var o=this._map;return o&&o.removeControl(this),this.options.position=r,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var o=this._container=this.onAdd(r),c=this.getPosition(),h=r._controlCorners[c];return we(o,"leaflet-control"),c.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(We(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Di=function(r){return new It(r)};Pe.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},o="leaflet-",c=this._controlContainer=je("div",o+"control-container",this._container);function h(g,x){var E=o+g+" "+o+x;r[g+x]=je("div",E,c)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)We(this._controlCorners[r]);We(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Pc=It.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,o,c,h){return c<h?-1:h<c?1:0}},initialize:function(r,o,c){y(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in r)this._addLayer(r[h],h);for(h in o)this._addLayer(o[h],h,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return It.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,o){return this._addLayer(r,o),this._map?this._update():this},addOverlay:function(r,o){return this._addLayer(r,o,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var o=this._getLayer(f(r));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){we(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(we(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Ve(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ve(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",o=this._container=je("div",r),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Mi(o),pa(o);var h=this._section=je("section",r+"-list");c&&(this._map.on("click",this.collapse,this),ve(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=je("a",r+"-toggle",o);g.href="#",g.title="Layers",g.setAttribute("role","button"),ve(g,{keydown:function(x){x.keyCode===13&&this._expandSafely()},click:function(x){et(x),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=je("div",r+"-base",h),this._separator=je("div",r+"-separator",h),this._overlaysList=je("div",r+"-overlays",h),o.appendChild(h)},_getLayer:function(r){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&f(this._layers[o].layer)===r)return this._layers[o]},_addLayer:function(r,o,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(h,g){return this.options.sortFunction(h.layer,g.layer,h.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Es(this._baseLayersList),Es(this._overlaysList),this._layerControlInputs=[];var r,o,c,h,g=0;for(c=0;c<this._layers.length;c++)h=this._layers[c],this._addItem(h),o=o||h.overlay,r=r||!h.overlay,g+=h.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=o&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var o=this._getLayer(f(r.target)),c=o.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(r,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(o?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=c,h.firstChild},_addItem:function(r){var o=document.createElement("label"),c=this._map.hasLayer(r.layer),h;r.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=c):h=this._createRadioElement("leaflet-base-layers_"+f(this),c),this._layerControlInputs.push(h),h.layerId=f(r.layer),ve(h,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var x=document.createElement("span");o.appendChild(x),x.appendChild(h),x.appendChild(g);var E=r.overlay?this._overlaysList:this._baseLayersList;return E.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,o,c,h=[],g=[];this._handlingClick=!0;for(var x=r.length-1;x>=0;x--)o=r[x],c=this._getLayer(o.layerId).layer,o.checked?h.push(c):o.checked||g.push(c);for(x=0;x<g.length;x++)this._map.hasLayer(g[x])&&this._map.removeLayer(g[x]);for(x=0;x<h.length;x++)this._map.hasLayer(h[x])||this._map.addLayer(h[x]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,o,c,h=this._map.getZoom(),g=r.length-1;g>=0;g--)o=r[g],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&h<c.options.minZoom||c.options.maxZoom!==void 0&&h>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ve(r,"click",et),this.expand();var o=this;setTimeout(function(){Me(r,"click",et),o._preventClick=!1})}}),mp=function(r,o,c){return new Pc(r,o,c)},va=It.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var o="leaflet-control-zoom",c=je("div",o+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,o,c,h,g){var x=je("a",c,h);return x.innerHTML=r,x.href="#",x.title=o,x.setAttribute("role","button"),x.setAttribute("aria-label",o),Mi(x),ve(x,"click",ur),ve(x,"click",g,this),ve(x,"click",this._refocusOnMap,this),x},_updateDisabled:function(){var r=this._map,o="leaflet-disabled";Ve(this._zoomInButton,o),Ve(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(we(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(we(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});Pe.mergeOptions({zoomControl:!0}),Pe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new va,this.addControl(this.zoomControl))});var pp=function(r){return new va(r)},Ec=It.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var o="leaflet-control-scale",c=je("div",o),h=this.options;return this._addScales(h,o+"-line",c),r.on(h.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,o,c){r.metric&&(this._mScale=je("div",o,c)),r.imperial&&(this._iScale=je("div",o,c))},_update:function(){var r=this._map,o=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,o]),r.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var o=this._getRoundNum(r),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/r)},_updateImperial:function(r){var o=r*3.2808399,c,h,g;o>5280?(c=o/5280,h=this._getRoundNum(c),this._updateScale(this._iScale,h+" mi",h/c)):(g=this._getRoundNum(o),this._updateScale(this._iScale,g+" ft",g/o))},_updateScale:function(r,o,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=o},_getRoundNum:function(r){var o=Math.pow(10,(Math.floor(r)+"").length-1),c=r/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),gp=function(r){return new Ec(r)},vp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',_a=It.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ee.inlineSvg?vp+" ":"")+"Leaflet</a>"},initialize:function(r){y(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=je("div","leaflet-control-attribution"),Mi(this._container);for(var o in r._layers)r._layers[o].getAttribution&&this.addAttribution(r._layers[o].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var o in this._attributions)this._attributions[o]&&r.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Pe.mergeOptions({attributionControl:!0}),Pe.addInitHook(function(){this.options.attributionControl&&new _a().addTo(this)});var _p=function(r){return new _a(r)};It.Layers=Pc,It.Zoom=va,It.Scale=Ec,It.Attribution=_a,Di.layers=mp,Di.zoom=pp,Di.scale=gp,Di.attribution=_p;var nn=F.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nn.addTo=function(r,o){return r.addHandler(o,this),this};var yp={Events:K},Cc=ee.touch?"touchstart mousedown":"mousedown",In=te.extend({options:{clickTolerance:3},initialize:function(r,o,c,h){y(this,h),this._element=r,this._dragStartTarget=o||r,this._preventOutline=c},enable:function(){this._enabled||(ve(this._dragStartTarget,Cc,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(In._dragging===this&&this.finishDrag(!0),Me(this._dragStartTarget,Cc,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!ia(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){In._dragging===this&&this.finishDrag();return}if(!(In._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(In._dragging=this,this._preventOutline&&ua(this._element),aa(),Ri(),!this._moving)){this.fire("down");var o=r.touches?r.touches[0]:r,c=wc(this._element);this._startPoint=new $(o.clientX,o.clientY),this._startPos=lr(this._element),this._parentScale=da(c);var h=r.type==="mousedown";ve(document,h?"mousemove":"touchmove",this._onMove,this),ve(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var o=r.touches&&r.touches.length===1?r.touches[0]:r,c=new $(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,et(r),this._moved||(this.fire("dragstart"),this._moved=!0,we(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),we(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Ge(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Ve(document.body,"leaflet-dragging"),this._lastTarget&&(Ve(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Me(document,"mousemove touchmove",this._onMove,this),Me(document,"mouseup touchend touchcancel",this._onUp,this),la(),Li();var o=this._moved&&this._moving;this._moving=!1,In._dragging=!1,o&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function jc(r,o,c){var h,g=[1,4,2,8],x,E,A,O,D,H,se,xe;for(x=0,H=r.length;x<H;x++)r[x]._code=dr(r[x],o);for(A=0;A<4;A++){for(se=g[A],h=[],x=0,H=r.length,E=H-1;x<H;E=x++)O=r[x],D=r[E],O._code&se?D._code&se||(xe=Ns(D,O,se,o,c),xe._code=dr(xe,o),h.push(xe)):(D._code&se&&(xe=Ns(D,O,se,o,c),xe._code=dr(xe,o),h.push(xe)),h.push(O));r=h}return r}function Ac(r,o){var c,h,g,x,E,A,O,D,H;if(!r||r.length===0)throw new Error("latlngs not passed");jt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var se=pe([0,0]),xe=ie(r),ct=xe.getNorthWest().distanceTo(xe.getSouthWest())*xe.getNorthEast().distanceTo(xe.getNorthWest());ct<1700&&(se=ya(r));var Xe=r.length,At=[];for(c=0;c<Xe;c++){var ft=pe(r[c]);At.push(o.project(pe([ft.lat-se.lat,ft.lng-se.lng])))}for(A=O=D=0,c=0,h=Xe-1;c<Xe;h=c++)g=At[c],x=At[h],E=g.y*x.x-x.y*g.x,O+=(g.x+x.x)*E,D+=(g.y+x.y)*E,A+=E*3;A===0?H=At[0]:H=[O/A,D/A];var Zr=o.unproject(W(H));return pe([Zr.lat+se.lat,Zr.lng+se.lng])}function ya(r){for(var o=0,c=0,h=0,g=0;g<r.length;g++){var x=pe(r[g]);o+=x.lat,c+=x.lng,h++}return pe([o/h,c/h])}var wp={__proto__:null,clipPolygon:jc,polygonCenter:Ac,centroid:ya};function Oc(r,o){if(!o||!r.length)return r.slice();var c=o*o;return r=Sp(r,c),r=xp(r,c),r}function Nc(r,o,c){return Math.sqrt($i(r,o,c,!0))}function bp(r,o,c){return $i(r,o,c)}function xp(r,o){var c=r.length,h=typeof Uint8Array<"u"?Uint8Array:Array,g=new h(c);g[0]=g[c-1]=1,wa(r,g,o,0,c-1);var x,E=[];for(x=0;x<c;x++)g[x]&&E.push(r[x]);return E}function wa(r,o,c,h,g){var x=0,E,A,O;for(A=h+1;A<=g-1;A++)O=$i(r[A],r[h],r[g],!0),O>x&&(E=A,x=O);x>c&&(o[E]=1,wa(r,o,c,h,E),wa(r,o,c,E,g))}function Sp(r,o){for(var c=[r[0]],h=1,g=0,x=r.length;h<x;h++)kp(r[h],r[g])>o&&(c.push(r[h]),g=h);return g<x-1&&c.push(r[x-1]),c}var Rc;function Lc(r,o,c,h,g){var x=h?Rc:dr(r,c),E=dr(o,c),A,O,D;for(Rc=E;;){if(!(x|E))return[r,o];if(x&E)return!1;A=x||E,O=Ns(r,o,A,c,g),D=dr(O,c),A===x?(r=O,x=D):(o=O,E=D)}}function Ns(r,o,c,h,g){var x=o.x-r.x,E=o.y-r.y,A=h.min,O=h.max,D,H;return c&8?(D=r.x+x*(O.y-r.y)/E,H=O.y):c&4?(D=r.x+x*(A.y-r.y)/E,H=A.y):c&2?(D=O.x,H=r.y+E*(O.x-r.x)/x):c&1&&(D=A.x,H=r.y+E*(A.x-r.x)/x),new $(D,H,g)}function dr(r,o){var c=0;return r.x<o.min.x?c|=1:r.x>o.max.x&&(c|=2),r.y<o.min.y?c|=4:r.y>o.max.y&&(c|=8),c}function kp(r,o){var c=o.x-r.x,h=o.y-r.y;return c*c+h*h}function $i(r,o,c,h){var g=o.x,x=o.y,E=c.x-g,A=c.y-x,O=E*E+A*A,D;return O>0&&(D=((r.x-g)*E+(r.y-x)*A)/O,D>1?(g=c.x,x=c.y):D>0&&(g+=E*D,x+=A*D)),E=r.x-g,A=r.y-x,h?E*E+A*A:new $(g,x)}function jt(r){return!P(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Ic(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),jt(r)}function Mc(r,o){var c,h,g,x,E,A,O,D;if(!r||r.length===0)throw new Error("latlngs not passed");jt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var H=pe([0,0]),se=ie(r),xe=se.getNorthWest().distanceTo(se.getSouthWest())*se.getNorthEast().distanceTo(se.getNorthWest());xe<1700&&(H=ya(r));var ct=r.length,Xe=[];for(c=0;c<ct;c++){var At=pe(r[c]);Xe.push(o.project(pe([At.lat-H.lat,At.lng-H.lng])))}for(c=0,h=0;c<ct-1;c++)h+=Xe[c].distanceTo(Xe[c+1])/2;if(h===0)D=Xe[0];else for(c=0,x=0;c<ct-1;c++)if(E=Xe[c],A=Xe[c+1],g=E.distanceTo(A),x+=g,x>h){O=(x-h)/g,D=[A.x-O*(A.x-E.x),A.y-O*(A.y-E.y)];break}var ft=o.unproject(W(D));return pe([ft.lat+H.lat,ft.lng+H.lng])}var Tp={__proto__:null,simplify:Oc,pointToSegmentDistance:Nc,closestPointOnSegment:bp,clipSegment:Lc,_getEdgeIntersection:Ns,_getBitCode:dr,_sqClosestPointOnSegment:$i,isFlat:jt,_flat:Ic,polylineCenter:Mc},ba={project:function(r){return new $(r.lng,r.lat)},unproject:function(r){return new le(r.y,r.x)},bounds:new de([-180,-90],[180,90])},xa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new de([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var o=Math.PI/180,c=this.R,h=r.lat*o,g=this.R_MINOR/c,x=Math.sqrt(1-g*g),E=x*Math.sin(h),A=Math.tan(Math.PI/4-h/2)/Math.pow((1-E)/(1+E),x/2);return h=-c*Math.log(Math.max(A,1e-10)),new $(r.lng*o*c,h)},unproject:function(r){for(var o=180/Math.PI,c=this.R,h=this.R_MINOR/c,g=Math.sqrt(1-h*h),x=Math.exp(-r.y/c),E=Math.PI/2-2*Math.atan(x),A=0,O=.1,D;A<15&&Math.abs(O)>1e-7;A++)D=g*Math.sin(E),D=Math.pow((1-D)/(1+D),g/2),O=Math.PI/2-2*Math.atan(x*D)-E,E+=O;return new le(E*o,r.x*o/c)}},Pp={__proto__:null,LonLat:ba,Mercator:xa,SphericalMercator:Lt},Ep=s({},at,{code:"EPSG:3395",projection:xa,transformation:function(){var r=.5/(Math.PI*xa.R);return Pt(r,.5,-r,.5)}()}),Dc=s({},at,{code:"EPSG:4326",projection:ba,transformation:Pt(1/180,1,-1/180,.5)}),Cp=s({},Te,{projection:ba,transformation:Pt(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,o){var c=o.lng-r.lng,h=o.lat-r.lat;return Math.sqrt(c*c+h*h)},infinite:!0});Te.Earth=at,Te.EPSG3395=Ep,Te.EPSG3857=Et,Te.EPSG900913=Or,Te.EPSG4326=Dc,Te.Simple=Cp;var Mt=te.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[f(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[f(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var o=r.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});Pe.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var o=f(r);return this._layers[o]?this:(this._layers[o]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var o=f(r);return this._layers[o]?(this._loaded&&r.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return f(r)in this._layers},eachLayer:function(r,o){for(var c in this._layers)r.call(o,this._layers[c]);return this},_addLayers:function(r){r=r?P(r)?r:[r]:[];for(var o=0,c=r.length;o<c;o++)this.addLayer(r[o])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[f(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var o=f(r);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,o=-1/0,c=this._getZoomSpan();for(var h in this._zoomBoundLayers){var g=this._zoomBoundLayers[h].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),o=g.maxZoom===void 0?o:Math.max(o,g.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $r=Mt.extend({initialize:function(r,o){y(this,o),this._layers={};var c,h;if(r)for(c=0,h=r.length;c<h;c++)this.addLayer(r[c])},addLayer:function(r){var o=this.getLayerId(r);return this._layers[o]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var o=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(r){var o=typeof r=="number"?r:this.getLayerId(r);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var o=Array.prototype.slice.call(arguments,1),c,h;for(c in this._layers)h=this._layers[c],h[r]&&h[r].apply(h,o);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,o){for(var c in this._layers)r.call(o,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return f(r)}}),jp=function(r,o){return new $r(r,o)},yn=$r.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),$r.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),$r.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new ae;for(var o in this._layers){var c=this._layers[o];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),Ap=function(r,o){return new yn(r,o)},Br=F.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){y(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,o){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(h,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(r,o){var c=this.options,h=c[o+"Size"];typeof h=="number"&&(h=[h,h]);var g=W(h),x=W(o==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+o+" "+(c.className||""),x&&(r.style.marginLeft=-x.x+"px",r.style.marginTop=-x.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,o){return o=o||document.createElement("img"),o.src=r,o},_getIconUrl:function(r){return ee.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function Op(r){return new Br(r)}var Bi=Br.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Bi.imagePath!="string"&&(Bi.imagePath=this._detectIconPath()),(this.options.imagePath||Bi.imagePath)+Br.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var o=function(c,h,g){var x=h.exec(c);return x&&x[g]};return r=o(r,/^url\((['"])?(.+)\1\)$/,2),r&&o(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=je("div","leaflet-default-icon-path",document.body),o=Ni(r,"background-image")||Ni(r,"backgroundImage");if(document.body.removeChild(r),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),$c=nn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new In(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),we(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ve(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var o=this._marker,c=o._map,h=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,x=lr(o._icon),E=c.getPixelBounds(),A=c.getPixelOrigin(),O=oe(E.min._subtract(A).add(g),E.max._subtract(A).subtract(g));if(!O.contains(x)){var D=W((Math.max(O.max.x,x.x)-O.max.x)/(E.max.x-O.max.x)-(Math.min(O.min.x,x.x)-O.min.x)/(E.min.x-O.min.x),(Math.max(O.max.y,x.y)-O.max.y)/(E.max.y-O.max.y)-(Math.min(O.min.y,x.y)-O.min.y)/(E.min.y-O.min.y)).multiplyBy(h);c.panBy(D,{animate:!1}),this._draggable._newPos._add(D),this._draggable._startPos._add(D),Ge(o._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=G(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(Z(this._panRequest),this._panRequest=G(this._adjustPan.bind(this,r)))},_onDrag:function(r){var o=this._marker,c=o._shadow,h=lr(o._icon),g=o._map.layerPointToLatLng(h);c&&Ge(c,h),o._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,o.fire("move",r).fire("drag",r)},_onDragEnd:function(r){Z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Rs=Mt.extend({options:{icon:new Bi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,o){y(this,o),this._latlng=pe(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var o=this._latlng;return this._latlng=pe(r),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),h=!1;c!==this._icon&&(this._icon&&this._removeIcon(),h=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),we(c,o),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ve(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),x=!1;g!==this._shadow&&(this._removeShadow(),x=!0),g&&(we(g,o),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&x&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Me(this._icon,"focus",this._panOnFocus,this),We(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&We(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Ge(this._icon,r),this._shadow&&Ge(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(we(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$c)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $c(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Ct(this._icon,r),this._shadow&&Ct(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var o=this.options.icon.options,c=o.iconSize?W(o.iconSize):W(0,0),h=o.iconAnchor?W(o.iconAnchor):W(0,0);r.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:c.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Np(r,o){return new Rs(r,o)}var Mn=Mt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return y(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ls=Mn.extend({options:{fill:!0,radius:10},initialize:function(r,o){y(this,o),this._latlng=pe(r),this._radius=this.options.radius},setLatLng:function(r){var o=this._latlng;return this._latlng=pe(r),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var o=r&&r.radius||this._radius;return Mn.prototype.setStyle.call(this,r),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,o=this._radiusY||r,c=this._clickTolerance(),h=[r+c,o+c];this._pxBounds=new de(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Rp(r,o){return new Ls(r,o)}var Sa=Ls.extend({initialize:function(r,o,c){if(typeof o=="number"&&(o=s({},c,{radius:o})),y(this,o),this._latlng=pe(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new ae(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Mn.prototype.setStyle,_project:function(){var r=this._latlng.lng,o=this._latlng.lat,c=this._map,h=c.options.crs;if(h.distance===at.distance){var g=Math.PI/180,x=this._mRadius/at.R/g,E=c.project([o+x,r]),A=c.project([o-x,r]),O=E.add(A).divideBy(2),D=c.unproject(O).lat,H=Math.acos((Math.cos(x*g)-Math.sin(o*g)*Math.sin(D*g))/(Math.cos(o*g)*Math.cos(D*g)))/g;(isNaN(H)||H===0)&&(H=x/Math.cos(Math.PI/180*o)),this._point=O.subtract(c.getPixelOrigin()),this._radius=isNaN(H)?0:O.x-c.project([D,r-H]).x,this._radiusY=O.y-E.y}else{var se=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(se).x}this._updateBounds()}});function Lp(r,o,c){return new Sa(r,o,c)}var wn=Mn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,o){y(this,o),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var o=1/0,c=null,h=$i,g,x,E=0,A=this._parts.length;E<A;E++)for(var O=this._parts[E],D=1,H=O.length;D<H;D++){g=O[D-1],x=O[D];var se=h(r,g,x,!0);se<o&&(o=se,c=h(r,g,x))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Mc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,o){return o=o||this._defaultShape(),r=pe(r),o.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new ae,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return jt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var o=[],c=jt(r),h=0,g=r.length;h<g;h++)c?(o[h]=pe(r[h]),this._bounds.extend(o[h])):o[h]=this._convertLatLngs(r[h]);return o},_project:function(){var r=new de;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),o=new $(r,r);this._rawPxBounds&&(this._pxBounds=new de([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(r,o,c){var h=r[0]instanceof le,g=r.length,x,E;if(h){for(E=[],x=0;x<g;x++)E[x]=this._map.latLngToLayerPoint(r[x]),c.extend(E[x]);o.push(E)}else for(x=0;x<g;x++)this._projectLatlngs(r[x],o,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,h,g,x,E,A,O;for(c=0,g=0,x=this._rings.length;c<x;c++)for(O=this._rings[c],h=0,E=O.length;h<E-1;h++)A=Lc(O[h],O[h+1],r,h,!0),A&&(o[g]=o[g]||[],o[g].push(A[0]),(A[1]!==O[h+1]||h===E-2)&&(o[g].push(A[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,o=this.options.smoothFactor,c=0,h=r.length;c<h;c++)r[c]=Oc(r[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,o){var c,h,g,x,E,A,O=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,x=this._parts.length;c<x;c++)for(A=this._parts[c],h=0,E=A.length,g=E-1;h<E;g=h++)if(!(!o&&h===0)&&Nc(r,A[g],A[h])<=O)return!0;return!1}});function Ip(r,o){return new wn(r,o)}wn._flat=Ic;var zr=wn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ac(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var o=wn.prototype._convertLatLngs.call(this,r),c=o.length;return c>=2&&o[0]instanceof le&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(r){wn.prototype._setLatLngs.call(this,r),jt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return jt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,o=this.options.weight,c=new $(o,o);if(r=new de(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,g=this._rings.length,x;h<g;h++)x=jc(this._rings[h],r,!0),x.length&&this._parts.push(x)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var o=!1,c,h,g,x,E,A,O,D;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(x=0,O=this._parts.length;x<O;x++)for(c=this._parts[x],E=0,D=c.length,A=D-1;E<D;A=E++)h=c[E],g=c[A],h.y>r.y!=g.y>r.y&&r.x<(g.x-h.x)*(r.y-h.y)/(g.y-h.y)+h.x&&(o=!o);return o||wn.prototype._containsPoint.call(this,r,!0)}});function Mp(r,o){return new zr(r,o)}var bn=yn.extend({initialize:function(r,o){y(this,o),this._layers={},r&&this.addData(r)},addData:function(r){var o=P(r)?r:r.features,c,h,g;if(o){for(c=0,h=o.length;c<h;c++)g=o[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var x=this.options;if(x.filter&&!x.filter(r))return this;var E=Is(r,x);return E?(E.feature=$s(r),E.defaultOptions=E.options,this.resetStyle(E),x.onEachFeature&&x.onEachFeature(r,E),this.addLayer(E)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(o){this._setLayerStyle(o,r)},this)},_setLayerStyle:function(r,o){r.setStyle&&(typeof o=="function"&&(o=o(r.feature)),r.setStyle(o))}});function Is(r,o){var c=r.type==="Feature"?r.geometry:r,h=c?c.coordinates:null,g=[],x=o&&o.pointToLayer,E=o&&o.coordsToLatLng||ka,A,O,D,H;if(!h&&!c)return null;switch(c.type){case"Point":return A=E(h),Bc(x,r,A,o);case"MultiPoint":for(D=0,H=h.length;D<H;D++)A=E(h[D]),g.push(Bc(x,r,A,o));return new yn(g);case"LineString":case"MultiLineString":return O=Ms(h,c.type==="LineString"?0:1,E),new wn(O,o);case"Polygon":case"MultiPolygon":return O=Ms(h,c.type==="Polygon"?1:2,E),new zr(O,o);case"GeometryCollection":for(D=0,H=c.geometries.length;D<H;D++){var se=Is({geometry:c.geometries[D],type:"Feature",properties:r.properties},o);se&&g.push(se)}return new yn(g);case"FeatureCollection":for(D=0,H=c.features.length;D<H;D++){var xe=Is(c.features[D],o);xe&&g.push(xe)}return new yn(g);default:throw new Error("Invalid GeoJSON object.")}}function Bc(r,o,c,h){return r?r(o,c):new Rs(c,h&&h.markersInheritOptions&&h)}function ka(r){return new le(r[1],r[0],r[2])}function Ms(r,o,c){for(var h=[],g=0,x=r.length,E;g<x;g++)E=o?Ms(r[g],o-1,c):(c||ka)(r[g]),h.push(E);return h}function Ta(r,o){return r=pe(r),r.alt!==void 0?[S(r.lng,o),S(r.lat,o),S(r.alt,o)]:[S(r.lng,o),S(r.lat,o)]}function Ds(r,o,c,h){for(var g=[],x=0,E=r.length;x<E;x++)g.push(o?Ds(r[x],jt(r[x])?0:o-1,c,h):Ta(r[x],h));return!o&&c&&g.length>0&&g.push(g[0].slice()),g}function Fr(r,o){return r.feature?s({},r.feature,{geometry:o}):$s(o)}function $s(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Pa={toGeoJSON:function(r){return Fr(this,{type:"Point",coordinates:Ta(this.getLatLng(),r)})}};Rs.include(Pa),Sa.include(Pa),Ls.include(Pa),wn.include({toGeoJSON:function(r){var o=!jt(this._latlngs),c=Ds(this._latlngs,o?1:0,!1,r);return Fr(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),zr.include({toGeoJSON:function(r){var o=!jt(this._latlngs),c=o&&!jt(this._latlngs[0]),h=Ds(this._latlngs,c?2:o?1:0,!0,r);return o||(h=[h]),Fr(this,{type:(c?"Multi":"")+"Polygon",coordinates:h})}}),$r.include({toMultiPoint:function(r){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(r).geometry.coordinates)}),Fr(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(r){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(r);var c=o==="GeometryCollection",h=[];return this.eachLayer(function(g){if(g.toGeoJSON){var x=g.toGeoJSON(r);if(c)h.push(x.geometry);else{var E=$s(x);E.type==="FeatureCollection"?h.push.apply(h,E.features):h.push(E)}}}),c?Fr(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function zc(r,o){return new bn(r,o)}var Dp=zc,Bs=Mt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,o,c){this._url=r,this._bounds=ie(o),y(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(we(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){We(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Mr(this._image),this},bringToBack:function(){return this._map&&Dr(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=ie(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",o=this._image=r?this._url:je("img");if(we(o,"leaflet-image-layer"),this._zoomAnimated&&we(o,"leaflet-zoom-animated"),this.options.className&&we(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onload=l(this.fire,this,"load"),o.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(r){var o=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;ar(this._image,c,o)},_reset:function(){var r=this._image,o=new de(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();Ge(r,o.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Ct(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),$p=function(r,o,c){return new Bs(r,o,c)},Fc=Bs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",o=this._image=r?this._url:je("video");if(we(o,"leaflet-image-layer"),this._zoomAnimated&&we(o,"leaflet-zoom-animated"),this.options.className&&we(o,this.options.className),o.onselectstart=v,o.onmousemove=v,o.onloadeddata=l(this.fire,this,"load"),r){for(var c=o.getElementsByTagName("source"),h=[],g=0;g<c.length;g++)h.push(c[g].src);this._url=c.length>0?h:[o.src];return}P(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var x=0;x<this._url.length;x++){var E=je("source");E.src=this._url[x],o.appendChild(E)}}});function Bp(r,o,c){return new Fc(r,o,c)}var Uc=Bs.extend({_initImage:function(){var r=this._image=this._url;we(r,"leaflet-image-layer"),this._zoomAnimated&&we(r,"leaflet-zoom-animated"),this.options.className&&we(r,this.options.className),r.onselectstart=v,r.onmousemove=v}});function zp(r,o,c){return new Uc(r,o,c)}var rn=Mt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,o){r&&(r instanceof le||P(r))?(this._latlng=pe(r),y(this,o)):(y(this,r),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Ct(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Ct(this._container,1),this.bringToFront(),this.options.interactive&&(we(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Ct(this._container,0),this._removeTimeout=setTimeout(l(We,void 0,this._container),200)):We(this._container),this.options.interactive&&(Ve(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=pe(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Mr(this._container),this},bringToBack:function(){return this._map&&Dr(this._container),this},_prepareOpen:function(r){var o=this._source;if(!o._map)return!1;if(o instanceof yn){o=null;var c=this._source._layers;for(var h in c)if(c[h]._map){o=c[h];break}if(!o)return!1;this._source=o}if(!r)if(o.getCenter)r=o.getCenter();else if(o.getLatLng)r=o.getLatLng();else if(o.getBounds)r=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")r.innerHTML=o;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),o=W(this.options.offset),c=this._getAnchor();this._zoomAnimated?Ge(this._container,r.add(c)):o=o.add(r).add(c);var h=this._containerBottom=-o.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=h+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Pe.include({_initOverlay:function(r,o,c,h){var g=o;return g instanceof r||(g=new r(h).setContent(o)),c&&g.setLatLng(c),g}}),Mt.include({_initOverlay:function(r,o,c,h){var g=c;return g instanceof r?(y(g,h),g._source=this):(g=o&&!h?o:new r(h,this),g.setContent(c)),g}});var zs=rn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,rn.prototype.openOn.call(this,r)},onAdd:function(r){rn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mn||this._source.on("preclick",cr))},onRemove:function(r){rn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mn||this._source.off("preclick",cr))},getEvents:function(){var r=rn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",o=this._container=je("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=je("div",r+"-content-wrapper",o);if(this._contentNode=je("div",r+"-content",c),Mi(o),pa(this._contentNode),ve(o,"contextmenu",cr),this._tipContainer=je("div",r+"-tip-container",o),this._tip=je("div",r+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=je("a",r+"-close-button",o);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',ve(h,"click",function(g){et(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,o=r.style;o.width="",o.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var h=r.offsetHeight,g=this.options.maxHeight,x="leaflet-popup-scrolled";g&&h>g?(o.height=g+"px",we(r,x)):Ve(r,x),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();Ge(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,o=parseInt(Ni(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,h=this._containerWidth,g=new $(this._containerLeft,-c-this._containerBottom);g._add(lr(this._container));var x=r.layerPointToContainerPoint(g),E=W(this.options.autoPanPadding),A=W(this.options.autoPanPaddingTopLeft||E),O=W(this.options.autoPanPaddingBottomRight||E),D=r.getSize(),H=0,se=0;x.x+h+O.x>D.x&&(H=x.x+h-D.x+O.x),x.x-H-A.x<0&&(H=x.x-A.x),x.y+c+O.y>D.y&&(se=x.y+c-D.y+O.y),x.y-se-A.y<0&&(se=x.y-A.y),(H||se)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([H,se]))}},_getAnchor:function(){return W(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Fp=function(r,o){return new zs(r,o)};Pe.mergeOptions({closePopupOnClick:!0}),Pe.include({openPopup:function(r,o,c){return this._initOverlay(zs,r,o,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Mt.include({bindPopup:function(r,o){return this._popup=this._initOverlay(zs,this._popup,r,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof yn||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){ur(r);var o=r.layer||r.target;if(this._popup._source===o&&!(o instanceof Mn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=o,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Fs=rn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){rn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){rn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=rn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",o=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=je("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var o,c,h=this._map,g=this._container,x=h.latLngToContainerPoint(h.getCenter()),E=h.layerPointToContainerPoint(r),A=this.options.direction,O=g.offsetWidth,D=g.offsetHeight,H=W(this.options.offset),se=this._getAnchor();A==="top"?(o=O/2,c=D):A==="bottom"?(o=O/2,c=0):A==="center"?(o=O/2,c=D/2):A==="right"?(o=0,c=D/2):A==="left"?(o=O,c=D/2):E.x<x.x?(A="right",o=0,c=D/2):(A="left",o=O+(H.x+se.x)*2,c=D/2),r=r.subtract(W(o,c,!0)).add(H).add(se),Ve(g,"leaflet-tooltip-right"),Ve(g,"leaflet-tooltip-left"),Ve(g,"leaflet-tooltip-top"),Ve(g,"leaflet-tooltip-bottom"),we(g,"leaflet-tooltip-"+A),Ge(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Ct(this._container,r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(o)},_getAnchor:function(){return W(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Up=function(r,o){return new Fs(r,o)};Pe.include({openTooltip:function(r,o,c){return this._initOverlay(Fs,r,o,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Mt.include({bindTooltip:function(r,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Fs,this._tooltip,r,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var o=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof yn||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&(ve(o,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ve(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var o=r.latlng,c,h;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),h=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(o)}});var Zc=Br.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var o=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Es(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var h=W(c.bgPos);o.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Zp(r){return new Zc(r)}Br.Default=Bi;var zi=Mt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ee.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){y(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),We(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Mr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Dr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof $?r:new $(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var o=this.getPane().children,c=-r(-1/0,1/0),h=0,g=o.length,x;h<g;h++)x=o[h].style.zIndex,o[h]!==this._container&&x&&(c=r(c,+x));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ee.ielt9){Ct(this._container,this.options.opacity);var r=+new Date,o=!1,c=!1;for(var h in this._tiles){var g=this._tiles[h];if(!(!g.current||!g.loaded)){var x=Math.min(1,(r-g.loaded)/200);Ct(g.el,x),x<1?o=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(Z(this._fadeFrame),this._fadeFrame=G(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=je("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,o=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=o-Math.abs(r-c),this._onUpdateLevel(c)):(We(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var h=this._levels[r],g=this._map;return h||(h=this._levels[r]={},h.el=je("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=o,h.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),h.zoom=r,this._setZoomTransform(h,g.getCenter(),g.getZoom()),v(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var r,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)o=this._tiles[r],o.retain=o.current;for(r in this._tiles)if(o=this._tiles[r],o.current&&!o.active){var h=o.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var o in this._tiles)this._tiles[o].coords.z===r&&this._removeTile(o)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)We(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,o,c,h){var g=Math.floor(r/2),x=Math.floor(o/2),E=c-1,A=new $(+g,+x);A.z=+E;var O=this._tileCoordsToKey(A),D=this._tiles[O];return D&&D.active?(D.retain=!0,!0):(D&&D.loaded&&(D.retain=!0),E>h?this._retainParent(g,x,E,h):!1)},_retainChildren:function(r,o,c,h){for(var g=2*r;g<2*r+2;g++)for(var x=2*o;x<2*o+2;x++){var E=new $(g,x);E.z=c+1;var A=this._tileCoordsToKey(E),O=this._tiles[A];if(O&&O.active){O.retain=!0;continue}else O&&O.loaded&&(O.retain=!0);c+1<h&&this._retainChildren(g,x,c+1,h)}},_resetView:function(r){var o=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var o=this.options;return o.minNativeZoom!==void 0&&r<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<r?o.maxNativeZoom:r},_setView:function(r,o,c,h){var g=Math.round(o);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var x=this.options.updateWhenZooming&&g!==this._tileZoom;(!h||x)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,o)},_setZoomTransforms:function(r,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,o)},_setZoomTransform:function(r,o,c){var h=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(o,c)).round();ee.any3d?ar(r.el,g,h):Ge(r.el,g)},_resetGrid:function(){var r=this._map,o=r.options.crs,c=this._tileSize=this.getTileSize(),h=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,o.wrapLng[0]],h).x/c.x),Math.ceil(r.project([0,o.wrapLng[1]],h).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([o.wrapLat[0],0],h).y/c.x),Math.ceil(r.project([o.wrapLat[1],0],h).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),h=o.getZoomScale(c,this._tileZoom),g=o.project(r,this._tileZoom).floor(),x=o.getSize().divideBy(h*2);return new de(g.subtract(x),g.add(x))},_update:function(r){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(r===void 0&&(r=o.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(h),x=g.getCenter(),E=[],A=this.options.keepBuffer,O=new de(g.getBottomLeft().subtract([A,-A]),g.getTopRight().add([A,-A]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var D in this._tiles){var H=this._tiles[D].coords;(H.z!==this._tileZoom||!O.contains(new $(H.x,H.y)))&&(this._tiles[D].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var se=g.min.y;se<=g.max.y;se++)for(var xe=g.min.x;xe<=g.max.x;xe++){var ct=new $(xe,se);if(ct.z=this._tileZoom,!!this._isValidTile(ct)){var Xe=this._tiles[this._tileCoordsToKey(ct)];Xe?Xe.current=!0:E.push(ct)}}if(E.sort(function(ft,Zr){return ft.distanceTo(x)-Zr.distanceTo(x)}),E.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var At=document.createDocumentFragment();for(xe=0;xe<E.length;xe++)this._addTile(E[xe],At);this._level.el.appendChild(At)}}}},_isValidTile:function(r){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!o.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(r);return ie(this.options.bounds).overlaps(h)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var o=this._map,c=this.getTileSize(),h=r.scaleBy(c),g=h.add(c),x=o.unproject(h,r.z),E=o.unproject(g,r.z);return[x,E]},_tileCoordsToBounds:function(r){var o=this._tileCoordsToNwSe(r),c=new ae(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var o=r.split(":"),c=new $(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(r){var o=this._tiles[r];o&&(We(o.el),delete this._tiles[r],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){we(r,"leaflet-tile");var o=this.getTileSize();r.style.width=o.x+"px",r.style.height=o.y+"px",r.onselectstart=v,r.onmousemove=v,ee.ielt9&&this.options.opacity<1&&Ct(r,this.options.opacity)},_addTile:function(r,o){var c=this._getTilePos(r),h=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&G(l(this._tileReady,this,r,null,g)),Ge(g,c),this._tiles[h]={el:g,coords:r,current:!0},o.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:r});var h=this._tileCoordsToKey(r);c=this._tiles[h],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Ct(c.el,0),Z(this._fadeFrame),this._fadeFrame=G(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(we(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ee.ielt9||!this._map._fadeAnimated?G(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var o=new $(this._wrapX?p(r.x,this._wrapX):r.x,this._wrapY?p(r.y,this._wrapY):r.y);return o.z=r.z,o},_pxBoundsToTileRange:function(r){var o=this.getTileSize();return new de(r.min.unscaleBy(o).floor(),r.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function Wp(r){return new zi(r)}var Ur=zi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,o){this._url=r,o=y(this,o),o.detectRetina&&ee.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,o){return this._url===r&&o===void 0&&(o=!0),this._url=r,o||this.redraw(),this},createTile:function(r,o){var c=document.createElement("img");return ve(c,"load",l(this._tileOnLoad,this,o,c)),ve(c,"error",l(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var o={r:ee.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(o.y=c),o["-y"]=c}return C(this._url,s(o,this.options))},_tileOnLoad:function(r,o){ee.ielt9?setTimeout(l(r,this,null,o),0):r(null,o)},_tileOnError:function(r,o,c){var h=this.options.errorTileUrl;h&&o.getAttribute("src")!==h&&(o.src=h),r(c,o)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,h=this.options.zoomOffset;return c&&(r=o-r),r+h},_getSubdomain:function(r){var o=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var r,o;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(o=this._tiles[r].el,o.onload=v,o.onerror=v,!o.complete)){o.src=N;var c=this._tiles[r].coords;We(o),delete this._tiles[r],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(r){var o=this._tiles[r];if(o)return o.el.setAttribute("src",N),zi.prototype._removeTile.call(this,r)},_tileReady:function(r,o,c){if(!(!this._map||c&&c.getAttribute("src")===N))return zi.prototype._tileReady.call(this,r,o,c)}});function Wc(r,o){return new Ur(r,o)}var qc=Ur.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,o){this._url=r;var c=s({},this.defaultWmsParams);for(var h in o)h in this.options||(c[h]=o[h]);o=y(this,o);var g=o.detectRetina&&ee.retina?2:1,x=this.getTileSize();c.width=x.x*g,c.height=x.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Ur.prototype.onAdd.call(this,r)},getTileUrl:function(r){var o=this._tileCoordsToNwSe(r),c=this._crs,h=oe(c.project(o[0]),c.project(o[1])),g=h.min,x=h.max,E=(this._wmsVersion>=1.3&&this._crs===Dc?[g.y,g.x,x.y,x.x]:[g.x,g.y,x.x,x.y]).join(","),A=Ur.prototype.getTileUrl.call(this,r);return A+w(this.wmsParams,A,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+E},setParams:function(r,o){return s(this.wmsParams,r),o||this.redraw(),this}});function qp(r,o){return new qc(r,o)}Ur.WMS=qc,Wc.wms=qp;var xn=Mt.extend({options:{padding:.1},initialize:function(r){y(this,r),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),we(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,o){var c=this._map.getZoomScale(o,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,o),x=h.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,o));ee.any3d?ar(this._container,x,c):Ge(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-r)).round();this._bounds=new de(c,c.add(o.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Hc=xn.extend({options:{tolerance:0},getEvents:function(){var r=xn.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){xn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ve(r,"mousemove",this._onMouseMove,this),ve(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ve(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){Z(this._redrawRequest),delete this._ctx,We(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var o in this._layers)r=this._layers[o],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xn.prototype._update.call(this);var r=this._bounds,o=this._container,c=r.getSize(),h=ee.retina?2:1;Ge(o,r.min),o.width=h*c.x,o.height=h*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",ee.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){xn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[f(r)]=r;var o=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var o=r._order,c=o.next,h=o.prev;c?c.prev=h:this._drawLast=h,h?h.next=c:this._drawFirst=c,delete r._order,delete this._layers[f(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var o=r.options.dashArray.split(/[, ]+/),c=[],h,g;for(g=0;g<o.length;g++){if(h=Number(o[g]),isNaN(h))return;c.push(h)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||G(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var o=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new de,this._redrawBounds.extend(r._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(r._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var o=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)r=h.layer,(!o||r._pxBounds&&r._pxBounds.intersects(o))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,o){if(this._drawing){var c,h,g,x,E=r._parts,A=E.length,O=this._ctx;if(A){for(O.beginPath(),c=0;c<A;c++){for(h=0,g=E[c].length;h<g;h++)x=E[c][h],O[h?"lineTo":"moveTo"](x.x,x.y);o&&O.closePath()}this._fillStroke(O,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var o=r._point,c=this._ctx,h=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||h)/h;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(o.x,o.y/g,h,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,o){var c=o.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(o.options&&o.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var o=this._map.mouseEventToLayerPoint(r),c,h,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(o)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(h=c);this._fireEvent(h?[h]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,o)}},_handleMouseOut:function(r){var o=this._hoveredLayer;o&&(Ve(this._container,"leaflet-interactive"),this._fireEvent([o],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,o){if(!this._mouseHoverThrottled){for(var c,h,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(o)&&(h=c);h!==this._hoveredLayer&&(this._handleMouseOut(r),h&&(we(this._container,"leaflet-interactive"),this._fireEvent([h],r,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,o,c){this._map._fireDOMEvent(o,c||o.type,r)},_bringToFront:function(r){var o=r._order;if(o){var c=o.next,h=o.prev;if(c)c.prev=h;else return;h?h.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(r)}},_bringToBack:function(r){var o=r._order;if(o){var c=o.next,h=o.prev;if(h)h.next=c;else return;c?c.prev=h:h&&(this._drawLast=h),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(r)}}});function Vc(r){return ee.canvas?new Hc(r):null}var Fi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Hp={_initContainer:function(){this._container=je("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(xn.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var o=r._container=Fi("shape");we(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",r._path=Fi("path"),o.appendChild(r._path),this._updateStyle(r),this._layers[f(r)]=r},_addPath:function(r){var o=r._container;this._container.appendChild(o),r.options.interactive&&r.addInteractiveTarget(o)},_removePath:function(r){var o=r._container;We(o),r.removeInteractiveTarget(o),delete this._layers[f(r)]},_updateStyle:function(r){var o=r._stroke,c=r._fill,h=r.options,g=r._container;g.stroked=!!h.stroke,g.filled=!!h.fill,h.stroke?(o||(o=r._stroke=Fi("stroke")),g.appendChild(o),o.weight=h.weight+"px",o.color=h.color,o.opacity=h.opacity,h.dashArray?o.dashStyle=P(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=h.lineCap.replace("butt","flat"),o.joinstyle=h.lineJoin):o&&(g.removeChild(o),r._stroke=null),h.fill?(c||(c=r._fill=Fi("fill")),g.appendChild(c),c.color=h.fillColor||h.color,c.opacity=h.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var o=r._point.round(),c=Math.round(r._radius),h=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+h+" 0,"+65535*360)},_setPath:function(r,o){r._path.v=o},_bringToFront:function(r){Mr(r._container)},_bringToBack:function(r){Dr(r._container)}},Us=ee.vml?Fi:Nr,Ui=xn.extend({_initContainer:function(){this._container=Us("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Us("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){We(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){xn.prototype._update.call(this);var r=this._bounds,o=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),Ge(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(r){var o=r._path=Us("path");r.options.className&&we(o,r.options.className),r.options.interactive&&we(o,"leaflet-interactive"),this._updateStyle(r),this._layers[f(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){We(r._path),r.removeInteractiveTarget(r._path),delete this._layers[f(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var o=r._path,c=r.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(r,o){this._setPath(r,rr(r._parts,o))},_updateCircle:function(r){var o=r._point,c=Math.max(Math.round(r._radius),1),h=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+h+" 0 1,0 ",x=r._empty()?"M0 0":"M"+(o.x-c)+","+o.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,x)},_setPath:function(r,o){r._path.setAttribute("d",o)},_bringToFront:function(r){Mr(r._path)},_bringToBack:function(r){Dr(r._path)}});ee.vml&&Ui.include(Hp);function Gc(r){return ee.svg||ee.vml?new Ui(r):null}Pe.include({getRenderer:function(r){var o=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var o=this._paneRenderers[r];return o===void 0&&(o=this._createRenderer({pane:r}),this._paneRenderers[r]=o),o},_createRenderer:function(r){return this.options.preferCanvas&&Vc(r)||Gc(r)}});var Kc=zr.extend({initialize:function(r,o){zr.prototype.initialize.call(this,this._boundsToLatLngs(r),o)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=ie(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function Vp(r,o){return new Kc(r,o)}Ui.create=Us,Ui.pointsToPath=rr,bn.geometryToLayer=Is,bn.coordsToLatLng=ka,bn.coordsToLatLngs=Ms,bn.latLngToCoords=Ta,bn.latLngsToCoords=Ds,bn.getFeature=Fr,bn.asFeature=$s,Pe.mergeOptions({boxZoom:!0});var Jc=nn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ve(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){We(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ri(),aa(),this._startPoint=this._map.mouseEventToContainerPoint(r),ve(document,{contextmenu:ur,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=je("div","leaflet-zoom-box",this._container),we(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var o=new de(this._point,this._startPoint),c=o.getSize();Ge(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(We(this._box),Ve(this._container,"leaflet-crosshair")),Li(),la(),Me(document,{contextmenu:ur,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var o=new ae(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Pe.addInitHook("addHandler","boxZoom",Jc),Pe.mergeOptions({doubleClickZoom:!0});var Yc=nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var o=this._map,c=o.getZoom(),h=o.options.zoomDelta,g=r.originalEvent.shiftKey?c-h:c+h;o.options.doubleClickZoom==="center"?o.setZoom(g):o.setZoomAround(r.containerPoint,g)}});Pe.addInitHook("addHandler","doubleClickZoom",Yc),Pe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Qc=nn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new In(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}we(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ve(this._map._container,"leaflet-grab"),Ve(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=ie(this._map.options.maxBounds);this._offsetLimit=oe(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,o){return r-(r-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;r.x<o.min.x&&(r.x=this._viscousLimit(r.x,o.min.x)),r.y<o.min.y&&(r.y=this._viscousLimit(r.y,o.min.y)),r.x>o.max.x&&(r.x=this._viscousLimit(r.x,o.max.x)),r.y>o.max.y&&(r.y=this._viscousLimit(r.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,o=Math.round(r/2),c=this._initialWorldOffset,h=this._draggable._newPos.x,g=(h-o+c)%r+o-c,x=(h+o+c)%r-o-c,E=Math.abs(g+c)<Math.abs(x+c)?g:x;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=E},_onDragEnd:function(r){var o=this._map,c=o.options,h=!c.inertia||r.noInertia||this._times.length<2;if(o.fire("dragend",r),h)o.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),x=(this._lastTime-this._times[0])/1e3,E=c.easeLinearity,A=g.multiplyBy(E/x),O=A.distanceTo([0,0]),D=Math.min(c.inertiaMaxSpeed,O),H=A.multiplyBy(D/O),se=D/(c.inertiaDeceleration*E),xe=H.multiplyBy(-se/2).round();!xe.x&&!xe.y?o.fire("moveend"):(xe=o._limitOffset(xe,o.options.maxBounds),G(function(){o.panBy(xe,{duration:se,easeLinearity:E,noMoveStart:!0,animate:!0})}))}}});Pe.addInitHook("addHandler","dragging",Qc),Pe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Xc=nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ve(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,o=document.documentElement,c=r.scrollTop||o.scrollTop,h=r.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(h,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var o=this._panKeys={},c=this.keyCodes,h,g;for(h=0,g=c.left.length;h<g;h++)o[c.left[h]]=[-1*r,0];for(h=0,g=c.right.length;h<g;h++)o[c.right[h]]=[r,0];for(h=0,g=c.down.length;h<g;h++)o[c.down[h]]=[0,r];for(h=0,g=c.up.length;h<g;h++)o[c.up[h]]=[0,-1*r]},_setZoomDelta:function(r){var o=this._zoomKeys={},c=this.keyCodes,h,g;for(h=0,g=c.zoomIn.length;h<g;h++)o[c.zoomIn[h]]=r;for(h=0,g=c.zoomOut.length;h<g;h++)o[c.zoomOut[h]]=-r},_addHooks:function(){ve(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var o=r.keyCode,c=this._map,h;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(h=this._panKeys[o],r.shiftKey&&(h=W(h).multiplyBy(3)),c.options.maxBounds&&(h=c._limitOffset(W(h),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(h)));c.panTo(g)}else c.panBy(h)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;ur(r)}}});Pe.addInitHook("addHandler","keyboard",Xc),Pe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var eu=nn.extend({addHooks:function(){ve(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var o=kc(r),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var h=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),h),ur(r)},_performZoom:function(){var r=this._map,o=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,x=c?Math.ceil(g/c)*c:g,E=r._limitZoom(o+(this._delta>0?x:-x))-o;this._delta=0,this._startTime=null,E&&(r.options.scrollWheelZoom==="center"?r.setZoom(o+E):r.setZoomAround(this._lastMousePos,o+E))}});Pe.addInitHook("addHandler","scrollWheelZoom",eu);var Gp=600;Pe.mergeOptions({tapHold:ee.touchNative&&ee.safari&&ee.mobile,tapTolerance:15});var tu=nn.extend({addHooks:function(){ve(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var o=r.touches[0];this._startPos=this._newPos=new $(o.clientX,o.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ve(document,"touchend",et),ve(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Gp),ve(document,"touchend touchcancel contextmenu",this._cancel,this),ve(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Me(document,"touchend",et),Me(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Me(document,"touchend touchcancel contextmenu",this._cancel,this),Me(document,"touchmove",this._onMove,this)},_onMove:function(r){var o=r.touches[0];this._newPos=new $(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,o){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});Pe.addInitHook("addHandler","tapHold",tu),Pe.mergeOptions({touchZoom:ee.touch,bounceAtZoomLimits:!0});var nu=nn.extend({addHooks:function(){we(this._map._container,"leaflet-touch-zoom"),ve(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ve(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var o=this._map;if(!(!r.touches||r.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(r.touches[0]),h=o.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(h)._divideBy(2))),this._startDist=c.distanceTo(h),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),ve(document,"touchmove",this._onTouchMove,this),ve(document,"touchend touchcancel",this._onTouchEnd,this),et(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(r.touches[0]),h=o.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(h)/this._startDist;if(this._zoom=o.getScaleZoom(g,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&g<1||this._zoom>o.getMaxZoom()&&g>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var x=c._add(h)._divideBy(2)._subtract(this._centerPoint);if(g===1&&x.x===0&&x.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(x),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Z(this._animRequest);var E=l(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=G(E,this,!0),et(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Z(this._animRequest),Me(document,"touchmove",this._onTouchMove,this),Me(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Pe.addInitHook("addHandler","touchZoom",nu),Pe.BoxZoom=Jc,Pe.DoubleClickZoom=Yc,Pe.Drag=Qc,Pe.Keyboard=Xc,Pe.ScrollWheelZoom=eu,Pe.TapHold=tu,Pe.TouchZoom=nu,t.Bounds=de,t.Browser=ee,t.CRS=Te,t.Canvas=Hc,t.Circle=Sa,t.CircleMarker=Ls,t.Class=F,t.Control=It,t.DivIcon=Zc,t.DivOverlay=rn,t.DomEvent=hp,t.DomUtil=up,t.Draggable=In,t.Evented=te,t.FeatureGroup=yn,t.GeoJSON=bn,t.GridLayer=zi,t.Handler=nn,t.Icon=Br,t.ImageOverlay=Bs,t.LatLng=le,t.LatLngBounds=ae,t.Layer=Mt,t.LayerGroup=$r,t.LineUtil=Tp,t.Map=Pe,t.Marker=Rs,t.Mixin=yp,t.Path=Mn,t.Point=$,t.PolyUtil=wp,t.Polygon=zr,t.Polyline=wn,t.Popup=zs,t.PosAnimation=Tc,t.Projection=Pp,t.Rectangle=Kc,t.Renderer=xn,t.SVG=Ui,t.SVGOverlay=Uc,t.TileLayer=Ur,t.Tooltip=Fs,t.Transformation=Tt,t.Util=be,t.VideoOverlay=Fc,t.bind=l,t.bounds=oe,t.canvas=Vc,t.circle=Lp,t.circleMarker=Rp,t.control=Di,t.divIcon=Zp,t.extend=s,t.featureGroup=Ap,t.geoJSON=zc,t.geoJson=Dp,t.gridLayer=Wp,t.icon=Op,t.imageOverlay=$p,t.latLng=pe,t.latLngBounds=ie,t.layerGroup=jp,t.map=fp,t.marker=Np,t.point=W,t.polygon=Mp,t.polyline=Ip,t.popup=Fp,t.rectangle=Vp,t.setOptions=y,t.stamp=f,t.svg=Gc,t.svgOverlay=zp,t.tileLayer=Wc,t.tooltip=Up,t.transformation=Pt,t.version=i,t.videoOverlay=Bp;var Kp=window.L;t.noConflict=function(){return window.L=Kp,this},window.L=t})})(Al,Al.exports);var ws=Al.exports;const sc=og(ws);function oc(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function ac(n,e){return e==null?function(i,s){const a=b.useRef();return a.current||(a.current=n(i,s)),a}:function(i,s){const a=b.useRef();a.current||(a.current=n(i,s));const l=b.useRef(i),{instance:u}=a.current;return b.useEffect(function(){l.current!==i&&(e(u,i,l.current),l.current=i)},[u,i,s]),a}}function ak(n,e){b.useEffect(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function ym(n){return function(t){const i=vm(),s=n(ic(t,i),i);return mm(i.map,t.attribution),_m(s.current,t.eventHandlers),ak(s.current,i),s}}function lk(n,e){const t=ac(n,e),i=ym(t);return rk(i)}function ck(n,e){const t=ac(n),i=ok(t,e);return ik(i)}function uk(n,e){const t=ac(n,e),i=ym(t);return sk(i)}function dk(n,e,t){const{opacity:i,zIndex:s}=e;i!=null&&i!==t.opacity&&n.setOpacity(i),s!=null&&s!==t.zIndex&&n.setZIndex(s)}function Ol(){return Ol=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ol.apply(this,arguments)}function hk({bounds:n,boundsOptions:e,center:t,children:i,className:s,id:a,placeholder:l,style:u,whenReady:f,zoom:m,...p},v){const[S]=b.useState({className:s,id:a,style:u}),[_,T]=b.useState(null);b.useImperativeHandle(v,()=>(_==null?void 0:_.map)??null,[_]);const y=b.useCallback(k=>{if(k!==null&&_===null){const C=new ws.Map(k,p);t!=null&&m!=null?C.setView(t,m):n!=null&&C.fitBounds(n,e),f!=null&&C.whenReady(f),T(tk(C))}},[]);b.useEffect(()=>()=>{_==null||_.map.remove()},[_]);const w=_?z.createElement(gm,{value:_},i):l??null;return z.createElement("div",Ol({},S,{ref:y}),w)}const fk=b.forwardRef(hk),mk=lk(function({position:e,...t},i){const s=new ws.Marker(e,t);return oc(s,nk(i,{overlayContainer:s}))},function(e,t,i){t.position!==i.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==i.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==i.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==i.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),pk=ck(function(e,t){const i=new ws.Popup(e,t.overlayContainer);return oc(i,t)},function(e,t,{position:i},s){b.useEffect(function(){const{instance:l}=e;function u(m){m.popup===l&&(l.update(),s(!0))}function f(m){m.popup===l&&s(!1)}return t.map.on({popupopen:u,popupclose:f}),t.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(t.map)):t.overlayContainer.bindPopup(l),function(){var p;t.map.off({popupopen:u,popupclose:f}),(p=t.overlayContainer)==null||p.unbindPopup(),t.map.removeLayer(l)}},[e,t,s,i])}),gk=uk(function({url:e,...t},i){const s=new ws.TileLayer(e,ic(t,i));return oc(s,i)},function(e,t,i){dk(e,t,i);const{url:s}=t;s!=null&&s!==i.url&&e.setUrl(s)});delete sc.Icon.Default.prototype._getIconUrl;sc.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});const vk=new sc.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),wm=({fullScreen:n=!1})=>{const[e,t]=b.useState([]),[i,s]=b.useState(!0);if(b.useEffect(()=>{(async()=>{try{const{data:u,error:f}=await ue.from("seller_stalls").select("id, stall_name, geolocation");if(f)throw f;const m=u.filter(p=>p.geolocation!==null&&p.geolocation!==void 0).map(p=>({id:p.id,stall_name:p.stall_name,location:"Pasar Malam Batu 2 1/2, Taiping, Perak",geolocation:p.geolocation}));if(m.length===0){const p={lat:4.8526,lng:100.7389},v=Array.from({length:5}).map((S,_)=>({id:`sample-${_}`,stall_name:`Sample Stall ${_+1}`,location:"Pasar Malam Batu 2 1/2, Taiping, Perak",geolocation:{lat:p.lat+(Math.random()-.5)*.002,lng:p.lng+(Math.random()-.5)*.002}}));t(v)}else t(m)}catch(u){console.error("Error fetching stalls:",u)}finally{s(!1)}})()},[]),i)return d.jsx("div",{className:"flex justify-center items-center h-full",children:"Loading map..."});const a=e.length>0?[e[0].geolocation.lat,e[0].geolocation.lng]:[4.8526,100.7389];return d.jsx("div",{className:"h-full w-full",children:d.jsxs(fk,{center:a,zoom:n?16:15,style:{height:"100%",width:"100%"},children:[d.jsx(gk,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.map(l=>{const u=[l.geolocation.lat,l.geolocation.lng];return d.jsx(mk,{position:u,icon:vk,children:d.jsx(pk,{children:d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold",children:l.stall_name}),d.jsx("p",{children:l.location}),l.id.startsWith("sample")&&d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Sample data for demonstration"})]})})},l.id)})]})})},Ha=()=>{const n=Ht(),[e,t]=b.useState([]),[i,s]=b.useState([]),[a,l]=b.useState(""),[u,f]=b.useState(!0),[m,p]=b.useState(0),[v,S]=b.useState(null);b.useEffect(()=>{_(),y(),T()},[]),b.useEffect(()=>(window.addEventListener("storage",T),()=>window.removeEventListener("storage",T)),[]),b.useEffect(()=>{if(a.trim()==="")s(e);else{const k=a.toLowerCase(),C=e.filter(P=>P.name.toLowerCase().includes(k)||P.category.toLowerCase().includes(k)||P.stall.stall_name.toLowerCase().includes(k));s(C)}},[a,e]);const _=async()=>{const{data:{user:k}}=await ue.auth.getUser();k?S(k):n("/auth")},T=()=>{const k=localStorage.getItem("cart");if(k){const C=JSON.parse(k);p(C.length)}else p(0)},y=async()=>{try{const{data:k,error:C}=await ue.from("products").select(`
          *,
          stall:seller_stalls (
            id,
            stall_name,
            location,
            geolocation
          )
        `).eq("is_available",!0).gt("stock_quantity",0).eq("stall.location","Taiping, Perak - Pasar Malam Batu 2 1/2");if(C)throw C;t(k||[]),s(k||[])}catch(k){console.error("Error fetching products:",k),ze.error("Failed to load products")}finally{f(!1)}},w=async k=>{if(!v){ze.error("Please log in to add items to your cart"),n("/auth");return}if(!await BS(v.id)){ze.error("Only customers can add items to cart");return}try{const{data:P,error:j}=await ue.from("products").select("stock_quantity").eq("id",k.id).single();if(j)throw j;if(!P||P.stock_quantity<1){ze.error("This product is no longer in stock"),y();return}const N=localStorage.getItem("cart"),R=N?JSON.parse(N):[],M=R.find(U=>U.productId===k.id);M?M.quantity+=1:R.push({productId:k.id,productName:k.name,price:k.price,quantity:1,stallName:k.stall.stall_name,stallId:k.stall.id}),localStorage.setItem("cart",JSON.stringify(R)),T(),ze.success(`${k.name} added to cart!`)}catch(P){console.error("Error verifying product stock:",P),ze.error("Could not add to cart. Please try again.")}};return u?d.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex items-center justify-center",children:d.jsx("p",{className:"text-lg",children:"Loading products..."})}):d.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 p-6",children:d.jsxs("div",{className:"max-w-6xl mx-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs(re,{variant:"ghost",onClick:()=>n("/dashboard"),children:[d.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),d.jsxs(re,{onClick:()=>n("/customer/cart"),className:"relative",children:[d.jsx(uo,{className:"w-4 h-4 mr-2"}),"Cart",m>0&&d.jsx(bi,{className:"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center p-0",children:m})]})]}),d.jsx("div",{className:"flex items-center gap-4 mb-6",children:d.jsxs("div",{className:"relative flex-1",children:[d.jsx(xv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),d.jsx(st,{type:"text",placeholder:"Search products, categories, or stalls...",value:a,onChange:k=>l(k.target.value),className:"pl-10"})]})}),d.jsxs(Go,{defaultValue:"grid",className:"mb-6",children:[d.jsxs(ys,{className:"grid w-full max-w-md grid-cols-2",children:[d.jsxs(On,{value:"grid",children:[d.jsx(uo,{className:"w-4 h-4 mr-2"}),"Products"]}),d.jsxs(On,{value:"map",children:[d.jsx(Lo,{className:"w-4 h-4 mr-2"}),"Market Map"]})]}),d.jsx(Nn,{value:"grid",children:i.length===0?d.jsx(Se,{className:"p-12 text-center",children:d.jsx("p",{className:"text-muted-foreground",children:"No products found matching your search."})}):d.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(k=>d.jsxs(Se,{className:"overflow-hidden",children:[k.image_url&&d.jsx("img",{src:k.image_url,alt:k.name,className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"p-4",children:[d.jsx("h3",{className:"font-bold text-lg mb-1",children:k.name}),d.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:k.stall.stall_name}),d.jsx("p",{className:"text-sm mb-3 line-clamp-2",children:k.description}),d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsx(bi,{variant:"secondary",children:k.category}),d.jsxs("span",{className:"text-sm text-muted-foreground",children:["Stock: ",k.stock_quantity]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("p",{className:"text-2xl font-bold",children:["RM ",k.price.toFixed(2)]}),d.jsxs(re,{onClick:()=>w(k),size:"sm",children:[d.jsx(bv,{className:"w-4 h-4 mr-1"}),"Add to Cart"]})]})]})]},k.id))})}),d.jsx(Nn,{value:"map",className:"h-[500px]",children:d.jsxs(Se,{className:"p-4 h-full",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Pasar Malam Stall Locations"}),d.jsx(re,{variant:"outline",size:"sm",onClick:()=>n("/customer/market-map"),children:"View Full Screen"})]}),d.jsx("div",{className:"h-[400px] w-full rounded-md overflow-hidden",children:d.jsx(wm,{})})]})})]})]})})},_k=()=>{const n="PM",e=Date.now().toString().slice(-6),t=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`${n}${e}${t}`},yk=()=>{const n=Ht(),{toast:e}=Rl(),[t,i]=b.useState([]),[s,a]=b.useState(""),[l,u]=b.useState(""),[f,m]=b.useState(""),[p,v]=b.useState(!1);b.useEffect(()=>{S(),_()},[]);const S=async()=>{const{data:{user:j}}=await ue.auth.getUser();j||n("/auth")},_=()=>{const j=localStorage.getItem("cart");j&&i(JSON.parse(j))},T=j=>{i(j),localStorage.setItem("cart",JSON.stringify(j))},y=j=>{const N=t.filter(R=>R.productId!==j);T(N),e({title:"Item removed",description:"Item has been removed from cart"})},w=(j,N)=>{if(N<1)return;const R=t.map(M=>M.productId===j?{...M,quantity:N}:M);T(R)},k=()=>t.reduce((j,N)=>j+N.price*N.quantity,0),C=async()=>{if(!s||!l){e({title:"Missing information",description:"Please select pickup date and time",variant:"destructive"});return}if(t.length===0){e({title:"Empty cart",description:"Please add items to cart",variant:"destructive"});return}v(!0);try{const{data:{user:j}}=await ue.auth.getUser();if(!j){e({title:"Authentication Required",description:"Please log in to complete your order",variant:"destructive"}),n("/auth");return}const N=t.map(Y=>Y.productId),{data:R}=await ue.from("products").select("id, price, is_available, stock_quantity").in("id",N),M=[],U=[];if(t.forEach(Y=>{const G=R==null?void 0:R.find(Z=>Z.id===Y.productId);!G||!G.is_available?M.push(Y.productName):G.price!==Y.price&&U.push({name:Y.productName,oldPrice:Y.price,newPrice:G.price})}),M.length>0){e({title:"Products Unavailable",description:`These items are no longer available: ${M.join(", ")}`}),v(!1);return}if(U.length>0){e({title:"Price Changes Detected",description:"Some prices have changed. Please refresh your cart."}),v(!1);return}const q=t.reduce((Y,G)=>(Y[G.stallId]||(Y[G.stallId]=[]),Y[G.stallId].push(G),Y),{});for(const[Y,G]of Object.entries(q)){const Z=G.reduce((te,$)=>te+$.price*$.quantity,0),{data:be,error:F}=await ue.from("pre_orders").insert({customer_id:j.id,stall_id:Y,total_amount:Z,pickup_date:s,pickup_time:l,customer_notes:f,payment_status:"pending",order_status:"pending",tracking_code:_k(),market_location:"Taiping, Perak - Pasar Malam Batu 2 1/2",created_at:new Date().toISOString()}).select().single();if(F)throw F;const ye=G.map(te=>({order_id:be.id,product_id:te.productId,quantity:te.quantity,unit_price:te.price,subtotal:te.price*te.quantity,created_at:new Date().toISOString()})),{error:K}=await ue.from("order_items").insert(ye);if(K)throw K;for(const te of G){const{error:$}=await ue.rpc("decrement_stock",{product_id_in:te.productId,quantity_in:te.quantity});$&&console.error("Error decrementing stock:",$)}}localStorage.removeItem("cart"),e({title:"Order placed!",description:"Your pre-order has been submitted successfully"}),n("/customer/orders")}catch(j){console.error("Checkout error:",j),e({title:"Error",description:"Failed to place order. Please try again.",variant:"destructive"})}finally{v(!1)}},P=()=>{const j=new Date;return j.setDate(j.getDate()+1),j.toISOString().split("T")[0]};return t.length===0?d.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 p-6",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs(re,{variant:"ghost",onClick:()=>n("/products"),className:"mb-6",children:[d.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Back to Products"]}),d.jsxs(Se,{className:"p-12 text-center",children:[d.jsx(uo,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),d.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Your cart is empty"}),d.jsx("p",{className:"text-muted-foreground mb-6",children:"Add some delicious items from our sellers!"}),d.jsx(re,{onClick:()=>n("/products"),children:"Browse Products"})]})]})}):d.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 p-6",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs(re,{variant:"ghost",onClick:()=>n("/products"),className:"mb-6",children:[d.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Back to Products"]}),d.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Shopping Cart"}),d.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[d.jsx("div",{className:"md:col-span-2 space-y-4",children:t.map(j=>d.jsxs(Se,{className:"p-4",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold",children:j.productName}),d.jsx("p",{className:"text-sm text-muted-foreground",children:j.stallName})]}),d.jsx(re,{variant:"ghost",size:"sm",onClick:()=>y(j.productId),children:d.jsx(kv,{className:"w-4 h-4 text-destructive"})})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(re,{variant:"outline",size:"sm",onClick:()=>w(j.productId,j.quantity-1),children:"-"}),d.jsx("span",{className:"w-12 text-center",children:j.quantity}),d.jsx(re,{variant:"outline",size:"sm",onClick:()=>w(j.productId,j.quantity+1),children:"+"})]}),d.jsxs("p",{className:"font-bold",children:["RM ",(j.price*j.quantity).toFixed(2)]})]})]},j.productId))}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs(Se,{className:"p-4",children:[d.jsx("h3",{className:"font-semibold mb-4",children:"Pickup Details"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"text-sm font-medium flex items-center gap-2 mb-2",children:[d.jsx(vh,{className:"w-4 h-4"}),"Pickup Date"]}),d.jsx(st,{type:"date",value:s,onChange:j=>a(j.target.value),min:P()})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"text-sm font-medium flex items-center gap-2 mb-2",children:[d.jsx($l,{className:"w-4 h-4"}),"Pickup Time"]}),d.jsx(st,{type:"time",value:l,onChange:j=>u(j.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Notes (Optional)"}),d.jsx(Po,{value:f,onChange:j=>m(j.target.value),placeholder:"Any special requests?",rows:3})]})]})]}),d.jsxs(Se,{className:"p-4",children:[d.jsx("h3",{className:"font-semibold mb-4",children:"Order Summary"}),d.jsxs("div",{className:"space-y-2 mb-4",children:[d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsx("span",{children:"Subtotal"}),d.jsxs("span",{children:["RM ",k().toFixed(2)]})]}),d.jsxs("div",{className:"flex justify-between font-bold text-lg pt-2 border-t",children:[d.jsx("span",{children:"Total"}),d.jsxs("span",{children:["RM ",k().toFixed(2)]})]})]}),d.jsx(re,{className:"w-full",onClick:C,disabled:p,children:p?"Processing...":"Place Order"}),d.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Payment details will be provided after order confirmation"})]})]})]})]})})},wk=({orderId:n,amount:e,onPaymentComplete:t,onCancel:i})=>{const[s,a]=b.useState("grabpay"),[l,u]=b.useState(null),[f,m]=b.useState(!1),p=()=>s==="grabpay"?"/assets/payment-qr-grabpay.png":"/assets/payment-qr-tng.png",v=_=>{_.target.files&&_.target.files[0]&&u(_.target.files[0])},S=async()=>{if(!l){ze.error("Please upload your payment receipt");return}m(!0);try{await new Promise(_=>setTimeout(_,1500)),ze.success("Payment receipt uploaded successfully"),t()}catch(_){console.error("Payment upload error:",_),ze.error("Failed to upload payment receipt")}finally{m(!1)}};return d.jsxs(Se,{className:"w-full max-w-md mx-auto",children:[d.jsxs(Ue,{children:[d.jsx(Ze,{children:"Complete Your Payment"}),d.jsxs(gt,{children:["Total Amount: RM ",e.toFixed(2)]})]}),d.jsxs(Be,{children:[d.jsxs(Go,{defaultValue:"grabpay",onValueChange:_=>a(_),children:[d.jsxs(ys,{className:"grid w-full grid-cols-2",children:[d.jsx(On,{value:"grabpay",children:"GrabPay"}),d.jsx(On,{value:"tng",children:"Touch 'n Go"})]}),d.jsxs(Nn,{value:"grabpay",className:"space-y-4",children:[d.jsx("div",{className:"bg-white p-4 rounded-lg flex justify-center",children:d.jsx("img",{src:p(),alt:"GrabPay QR Code",className:"max-w-[200px] max-h-[200px]"})}),d.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.jsx("p",{children:"1. Open your GrabPay app"}),d.jsx("p",{children:"2. Scan this QR code"}),d.jsxs("p",{children:["3. Enter amount: RM ",e.toFixed(2)]}),d.jsx("p",{children:"4. Complete payment and upload receipt below"})]})]}),d.jsxs(Nn,{value:"tng",className:"space-y-4",children:[d.jsx("div",{className:"bg-white p-4 rounded-lg flex justify-center",children:d.jsx("img",{src:p(),alt:"Touch 'n Go QR Code",className:"max-w-[200px] max-h-[200px]"})}),d.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.jsx("p",{children:"1. Open your Touch 'n Go eWallet app"}),d.jsx("p",{children:"2. Scan this QR code"}),d.jsxs("p",{children:["3. Enter amount: RM ",e.toFixed(2)]}),d.jsx("p",{children:"4. Complete payment and upload receipt below"})]})]})]}),d.jsx("div",{className:"mt-6 space-y-4",children:d.jsxs("div",{className:"border-t pt-4",children:[d.jsx("p",{className:"text-sm font-medium mb-2",children:"Upload Payment Receipt"}),d.jsx("input",{type:"file",accept:"image/*",onChange:v,className:`w-full text-sm text-slate-500
                file:mr-4 file:py-2 file:px-4
                file:rounded-full file:border-0
                file:text-sm file:font-semibold
                file:bg-primary file:text-white
                hover:file:bg-primary/90`}),l&&d.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" ",l.name," selected"]})]})})]}),d.jsxs(pf,{className:"flex flex-col space-y-2",children:[d.jsx(re,{onClick:S,className:"w-full",disabled:!l||f,children:f?"Processing...":"Confirm Payment"}),d.jsx(re,{variant:"outline",onClick:i,className:"w-full",children:"Cancel"}),d.jsx("div",{className:"w-full mt-2",children:d.jsx(cs,{message:`Hi, I need help with my payment for order #${n}`,className:"w-full text-xs"})})]})]})};var Va="focusScope.autoFocusOnMount",Ga="focusScope.autoFocusOnUnmount",yd={bubbles:!1,cancelable:!0},bk="FocusScope",bm=b.forwardRef((n,e)=>{const{loop:t=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...l}=n,[u,f]=b.useState(null),m=Zt(s),p=Zt(a),v=b.useRef(null),S=ot(e,y=>f(y)),_=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(i){let y=function(P){if(_.paused||!u)return;const j=P.target;u.contains(j)?v.current=j:Un(v.current,{select:!0})},w=function(P){if(_.paused||!u)return;const j=P.relatedTarget;j!==null&&(u.contains(j)||Un(v.current,{select:!0}))},k=function(P){if(document.activeElement===document.body)for(const N of P)N.removedNodes.length>0&&Un(u)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const C=new MutationObserver(k);return u&&C.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),C.disconnect()}}},[i,u,_.paused]),b.useEffect(()=>{if(u){bd.add(_);const y=document.activeElement;if(!u.contains(y)){const k=new CustomEvent(Va,yd);u.addEventListener(Va,m),u.dispatchEvent(k),k.defaultPrevented||(xk(Ek(xm(u)),{select:!0}),document.activeElement===y&&Un(u))}return()=>{u.removeEventListener(Va,m),setTimeout(()=>{const k=new CustomEvent(Ga,yd);u.addEventListener(Ga,p),u.dispatchEvent(k),k.defaultPrevented||Un(y??document.body,{select:!0}),u.removeEventListener(Ga,p),bd.remove(_)},0)}}},[u,m,p,_]);const T=b.useCallback(y=>{if(!t&&!i||_.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,k=document.activeElement;if(w&&k){const C=y.currentTarget,[P,j]=Sk(C);P&&j?!y.shiftKey&&k===j?(y.preventDefault(),t&&Un(P,{select:!0})):y.shiftKey&&k===P&&(y.preventDefault(),t&&Un(j,{select:!0})):k===C&&y.preventDefault()}},[t,i,_.paused]);return d.jsx(Re.div,{tabIndex:-1,...l,ref:S,onKeyDown:T})});bm.displayName=bk;function xk(n,{select:e=!1}={}){const t=document.activeElement;for(const i of n)if(Un(i,{select:e}),document.activeElement!==t)return}function Sk(n){const e=xm(n),t=wd(e,n),i=wd(e.reverse(),n);return[t,i]}function xm(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function wd(n,e){for(const t of n)if(!kk(t,{upTo:e}))return t}function kk(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Tk(n){return n instanceof HTMLInputElement&&"select"in n}function Un(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Tk(n)&&e&&n.select()}}var bd=Pk();function Pk(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=xd(n,e),n.unshift(e)},remove(e){var t;n=xd(n,e),(t=n[0])==null||t.resume()}}}function xd(n,e){const t=[...n],i=t.indexOf(e);return i!==-1&&t.splice(i,1),t}function Ek(n){return n.filter(e=>e.tagName!=="A")}var Ka=0;function Ck(){b.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Sd()),document.body.insertAdjacentElement("beforeend",n[1]??Sd()),Ka++,()=>{Ka===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ka--}},[])}function Sd(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var cn=function(){return cn=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},cn.apply(this,arguments)};function Sm(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function jk(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return n.concat(a||Array.prototype.slice.call(e))}var ao="right-scroll-bar-position",lo="width-before-scroll-bar",Ak="with-scroll-bars-hidden",Ok="--removed-body-scroll-bar-size";function Ja(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function Nk(n,e){var t=b.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(i){var s=t.value;s!==i&&(t.value=i,t.callback(i,s))}}}})[0];return t.callback=e,t.facade}var Rk=typeof window<"u"?b.useLayoutEffect:b.useEffect,kd=new WeakMap;function Lk(n,e){var t=Nk(null,function(i){return n.forEach(function(s){return Ja(s,i)})});return Rk(function(){var i=kd.get(t);if(i){var s=new Set(i),a=new Set(n),l=t.current;s.forEach(function(u){a.has(u)||Ja(u,null)}),a.forEach(function(u){s.has(u)||Ja(u,l)})}kd.set(t,n)},[n]),t}function Ik(n){return n}function Mk(n,e){e===void 0&&(e=Ik);var t=[],i=!1,s={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var l=e(a,i);return t.push(l),function(){t=t.filter(function(u){return u!==l})}},assignSyncMedium:function(a){for(i=!0;t.length;){var l=t;t=[],l.forEach(a)}t={push:function(u){return a(u)},filter:function(){return t}}},assignMedium:function(a){i=!0;var l=[];if(t.length){var u=t;t=[],u.forEach(a),l=t}var f=function(){var p=l;l=[],p.forEach(a)},m=function(){return Promise.resolve().then(f)};m(),t={push:function(p){l.push(p),m()},filter:function(p){return l=l.filter(p),t}}}};return s}function Dk(n){n===void 0&&(n={});var e=Mk(null);return e.options=cn({async:!0,ssr:!1},n),e}var km=function(n){var e=n.sideCar,t=Sm(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return b.createElement(i,cn({},t))};km.isSideCarExport=!0;function $k(n,e){return n.useMedium(e),km}var Tm=Dk(),Ya=function(){},Ko=b.forwardRef(function(n,e){var t=b.useRef(null),i=b.useState({onScrollCapture:Ya,onWheelCapture:Ya,onTouchMoveCapture:Ya}),s=i[0],a=i[1],l=n.forwardProps,u=n.children,f=n.className,m=n.removeScrollBar,p=n.enabled,v=n.shards,S=n.sideCar,_=n.noRelative,T=n.noIsolation,y=n.inert,w=n.allowPinchZoom,k=n.as,C=k===void 0?"div":k,P=n.gapMode,j=Sm(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=S,R=Lk([t,e]),M=cn(cn({},j),s);return b.createElement(b.Fragment,null,p&&b.createElement(N,{sideCar:Tm,removeScrollBar:m,shards:v,noRelative:_,noIsolation:T,inert:y,setCallbacks:a,allowPinchZoom:!!w,lockRef:t,gapMode:P}),l?b.cloneElement(b.Children.only(u),cn(cn({},M),{ref:R})):b.createElement(C,cn({},M,{className:f,ref:R}),u))});Ko.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ko.classNames={fullWidth:lo,zeroRight:ao};var Bk=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zk(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=Bk();return e&&n.setAttribute("nonce",e),n}function Fk(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function Uk(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var Zk=function(){var n=0,e=null;return{add:function(t){n==0&&(e=zk())&&(Fk(e,t),Uk(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Wk=function(){var n=Zk();return function(e,t){b.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},Pm=function(){var n=Wk(),e=function(t){var i=t.styles,s=t.dynamic;return n(i,s),null};return e},qk={left:0,top:0,right:0,gap:0},Qa=function(n){return parseInt(n||"",10)||0},Hk=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],i=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Qa(t),Qa(i),Qa(s)]},Vk=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return qk;var e=Hk(n),t=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-t+e[2]-e[0])}},Gk=Pm(),si="data-scroll-locked",Kk=function(n,e,t,i){var s=n.left,a=n.top,l=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(Ak,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(u,"px ").concat(i,`;
  }
  body[`).concat(si,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(i,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ao,` {
    right: `).concat(u,"px ").concat(i,`;
  }
  
  .`).concat(lo,` {
    margin-right: `).concat(u,"px ").concat(i,`;
  }
  
  .`).concat(ao," .").concat(ao,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(lo," .").concat(lo,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(si,`] {
    `).concat(Ok,": ").concat(u,`px;
  }
`)},Td=function(){var n=parseInt(document.body.getAttribute(si)||"0",10);return isFinite(n)?n:0},Jk=function(){b.useEffect(function(){return document.body.setAttribute(si,(Td()+1).toString()),function(){var n=Td()-1;n<=0?document.body.removeAttribute(si):document.body.setAttribute(si,n.toString())}},[])},Yk=function(n){var e=n.noRelative,t=n.noImportant,i=n.gapMode,s=i===void 0?"margin":i;Jk();var a=b.useMemo(function(){return Vk(s)},[s]);return b.createElement(Gk,{styles:Kk(a,!e,s,t?"":"!important")})},Nl=!1;if(typeof window<"u")try{var Xs=Object.defineProperty({},"passive",{get:function(){return Nl=!0,!0}});window.addEventListener("test",Xs,Xs),window.removeEventListener("test",Xs,Xs)}catch{Nl=!1}var Jr=Nl?{passive:!1}:!1,Qk=function(n){return n.tagName==="TEXTAREA"},Em=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Qk(n)&&t[e]==="visible")},Xk=function(n){return Em(n,"overflowY")},eT=function(n){return Em(n,"overflowX")},Pd=function(n,e){var t=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var s=Cm(n,i);if(s){var a=jm(n,i),l=a[1],u=a[2];if(l>u)return!0}i=i.parentNode}while(i&&i!==t.body);return!1},tT=function(n){var e=n.scrollTop,t=n.scrollHeight,i=n.clientHeight;return[e,t,i]},nT=function(n){var e=n.scrollLeft,t=n.scrollWidth,i=n.clientWidth;return[e,t,i]},Cm=function(n,e){return n==="v"?Xk(e):eT(e)},jm=function(n,e){return n==="v"?tT(e):nT(e)},rT=function(n,e){return n==="h"&&e==="rtl"?-1:1},iT=function(n,e,t,i,s){var a=rT(n,window.getComputedStyle(e).direction),l=a*i,u=t.target,f=e.contains(u),m=!1,p=l>0,v=0,S=0;do{if(!u)break;var _=jm(n,u),T=_[0],y=_[1],w=_[2],k=y-w-a*T;(T||k)&&Cm(n,u)&&(v+=k,S+=T);var C=u.parentNode;u=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!f&&u!==document.body||f&&(e.contains(u)||e===u));return(p&&(Math.abs(v)<1||!s)||!p&&(Math.abs(S)<1||!s))&&(m=!0),m},eo=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Ed=function(n){return[n.deltaX,n.deltaY]},Cd=function(n){return n&&"current"in n?n.current:n},sT=function(n,e){return n[0]===e[0]&&n[1]===e[1]},oT=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},aT=0,Yr=[];function lT(n){var e=b.useRef([]),t=b.useRef([0,0]),i=b.useRef(),s=b.useState(aT++)[0],a=b.useState(Pm)[0],l=b.useRef(n);b.useEffect(function(){l.current=n},[n]),b.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var y=jk([n.lockRef.current],(n.shards||[]).map(Cd),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=b.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!l.current.allowPinchZoom;var k=eo(y),C=t.current,P="deltaX"in y?y.deltaX:C[0]-k[0],j="deltaY"in y?y.deltaY:C[1]-k[1],N,R=y.target,M=Math.abs(P)>Math.abs(j)?"h":"v";if("touches"in y&&M==="h"&&R.type==="range")return!1;var U=Pd(M,R);if(!U)return!0;if(U?N=M:(N=M==="v"?"h":"v",U=Pd(M,R)),!U)return!1;if(!i.current&&"changedTouches"in y&&(P||j)&&(i.current=N),!N)return!0;var q=i.current||N;return iT(q,w,y,q==="h"?P:j,!0)},[]),f=b.useCallback(function(y){var w=y;if(!(!Yr.length||Yr[Yr.length-1]!==a)){var k="deltaY"in w?Ed(w):eo(w),C=e.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&sT(N.delta,k)})[0];if(C&&C.should){w.cancelable&&w.preventDefault();return}if(!C){var P=(l.current.shards||[]).map(Cd).filter(Boolean).filter(function(N){return N.contains(w.target)}),j=P.length>0?u(w,P[0]):!l.current.noIsolation;j&&w.cancelable&&w.preventDefault()}}},[]),m=b.useCallback(function(y,w,k,C){var P={name:y,delta:w,target:k,should:C,shadowParent:cT(k)};e.current.push(P),setTimeout(function(){e.current=e.current.filter(function(j){return j!==P})},1)},[]),p=b.useCallback(function(y){t.current=eo(y),i.current=void 0},[]),v=b.useCallback(function(y){m(y.type,Ed(y),y.target,u(y,n.lockRef.current))},[]),S=b.useCallback(function(y){m(y.type,eo(y),y.target,u(y,n.lockRef.current))},[]);b.useEffect(function(){return Yr.push(a),n.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:S}),document.addEventListener("wheel",f,Jr),document.addEventListener("touchmove",f,Jr),document.addEventListener("touchstart",p,Jr),function(){Yr=Yr.filter(function(y){return y!==a}),document.removeEventListener("wheel",f,Jr),document.removeEventListener("touchmove",f,Jr),document.removeEventListener("touchstart",p,Jr)}},[]);var _=n.removeScrollBar,T=n.inert;return b.createElement(b.Fragment,null,T?b.createElement(a,{styles:oT(s)}):null,_?b.createElement(Yk,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function cT(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const uT=$k(Tm,lT);var Am=b.forwardRef(function(n,e){return b.createElement(Ko,cn({},n,{ref:e,sideCar:uT}))});Am.classNames=Ko.classNames;var dT=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Qr=new WeakMap,to=new WeakMap,no={},Xa=0,Om=function(n){return n&&(n.host||Om(n.parentNode))},hT=function(n,e){return e.map(function(t){if(n.contains(t))return t;var i=Om(t);return i&&n.contains(i)?i:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},fT=function(n,e,t,i){var s=hT(e,Array.isArray(n)?n:[n]);no[t]||(no[t]=new WeakMap);var a=no[t],l=[],u=new Set,f=new Set(s),m=function(v){!v||u.has(v)||(u.add(v),m(v.parentNode))};s.forEach(m);var p=function(v){!v||f.has(v)||Array.prototype.forEach.call(v.children,function(S){if(u.has(S))p(S);else try{var _=S.getAttribute(i),T=_!==null&&_!=="false",y=(Qr.get(S)||0)+1,w=(a.get(S)||0)+1;Qr.set(S,y),a.set(S,w),l.push(S),y===1&&T&&to.set(S,!0),w===1&&S.setAttribute(t,"true"),T||S.setAttribute(i,"true")}catch(k){console.error("aria-hidden: cannot operate on ",S,k)}})};return p(e),u.clear(),Xa++,function(){l.forEach(function(v){var S=Qr.get(v)-1,_=a.get(v)-1;Qr.set(v,S),a.set(v,_),S||(to.has(v)||v.removeAttribute(i),to.delete(v)),_||v.removeAttribute(t)}),Xa--,Xa||(Qr=new WeakMap,Qr=new WeakMap,to=new WeakMap,no={})}},mT=function(n,e,t){t===void 0&&(t="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),s=dT(n);return s?(i.push.apply(i,Array.from(s.querySelectorAll("[aria-live]"))),fT(i,s,t,"aria-hidden")):function(){return null}},Jo="Dialog",[Nm,tP]=Cr(Jo),[pT,Vt]=Nm(Jo),Rm=n=>{const{__scopeDialog:e,children:t,open:i,defaultOpen:s,onOpenChange:a,modal:l=!0}=n,u=b.useRef(null),f=b.useRef(null),[m,p]=Ao({prop:i,defaultProp:s??!1,onChange:a,caller:Jo});return d.jsx(pT,{scope:e,triggerRef:u,contentRef:f,contentId:Ki(),titleId:Ki(),descriptionId:Ki(),open:m,onOpenChange:p,onOpenToggle:b.useCallback(()=>p(v=>!v),[p]),modal:l,children:t})};Rm.displayName=Jo;var Lm="DialogTrigger",gT=b.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Vt(Lm,t),a=ot(e,s.triggerRef);return d.jsx(Re.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":uc(s.open),...i,ref:a,onClick:Ee(n.onClick,s.onOpenToggle)})});gT.displayName=Lm;var lc="DialogPortal",[vT,Im]=Nm(lc,{forceMount:void 0}),Mm=n=>{const{__scopeDialog:e,forceMount:t,children:i,container:s}=n,a=Vt(lc,e);return d.jsx(vT,{scope:e,forceMount:t,children:b.Children.map(i,l=>d.jsx(jr,{present:t||a.open,children:d.jsx(Ll,{asChild:!0,container:s,children:l})}))})};Mm.displayName=lc;var Eo="DialogOverlay",Dm=b.forwardRef((n,e)=>{const t=Im(Eo,n.__scopeDialog),{forceMount:i=t.forceMount,...s}=n,a=Vt(Eo,n.__scopeDialog);return a.modal?d.jsx(jr,{present:i||a.open,children:d.jsx(yT,{...s,ref:e})}):null});Dm.displayName=Eo;var _T=Xi("DialogOverlay.RemoveScroll"),yT=b.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Vt(Eo,t);return d.jsx(Am,{as:_T,allowPinchZoom:!0,shards:[s.contentRef],children:d.jsx(Re.div,{"data-state":uc(s.open),...i,ref:e,style:{pointerEvents:"auto",...i.style}})})}),Er="DialogContent",$m=b.forwardRef((n,e)=>{const t=Im(Er,n.__scopeDialog),{forceMount:i=t.forceMount,...s}=n,a=Vt(Er,n.__scopeDialog);return d.jsx(jr,{present:i||a.open,children:a.modal?d.jsx(wT,{...s,ref:e}):d.jsx(bT,{...s,ref:e})})});$m.displayName=Er;var wT=b.forwardRef((n,e)=>{const t=Vt(Er,n.__scopeDialog),i=b.useRef(null),s=ot(e,t.contentRef,i);return b.useEffect(()=>{const a=i.current;if(a)return mT(a)},[]),d.jsx(Bm,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ee(n.onCloseAutoFocus,a=>{var l;a.preventDefault(),(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ee(n.onPointerDownOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0;(l.button===2||u)&&a.preventDefault()}),onFocusOutside:Ee(n.onFocusOutside,a=>a.preventDefault())})}),bT=b.forwardRef((n,e)=>{const t=Vt(Er,n.__scopeDialog),i=b.useRef(!1),s=b.useRef(!1);return d.jsx(Bm,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l,u;(l=n.onCloseAutoFocus)==null||l.call(n,a),a.defaultPrevented||(i.current||(u=t.triggerRef.current)==null||u.focus(),a.preventDefault()),i.current=!1,s.current=!1},onInteractOutside:a=>{var f,m;(f=n.onInteractOutside)==null||f.call(n,a),a.defaultPrevented||(i.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const l=a.target;((m=t.triggerRef.current)==null?void 0:m.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),Bm=b.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,...l}=n,u=Vt(Er,t),f=b.useRef(null),m=ot(e,f);return Ck(),d.jsxs(d.Fragment,{children:[d.jsx(bm,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:a,children:d.jsx(jo,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":uc(u.open),...l,ref:m,onDismiss:()=>u.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(xT,{titleId:u.titleId}),d.jsx(kT,{contentRef:f,descriptionId:u.descriptionId})]})]})}),cc="DialogTitle",zm=b.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Vt(cc,t);return d.jsx(Re.h2,{id:s.titleId,...i,ref:e})});zm.displayName=cc;var Fm="DialogDescription",Um=b.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Vt(Fm,t);return d.jsx(Re.p,{id:s.descriptionId,...i,ref:e})});Um.displayName=Fm;var Zm="DialogClose",Wm=b.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Vt(Zm,t);return d.jsx(Re.button,{type:"button",...i,ref:e,onClick:Ee(n.onClick,()=>s.onOpenChange(!1))})});Wm.displayName=Zm;function uc(n){return n?"open":"closed"}var qm="DialogTitleWarning",[nP,Hm]=wg(qm,{contentName:Er,titleName:cc,docsSlug:"dialog"}),xT=({titleId:n})=>{const e=Hm(qm),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},ST="DialogDescriptionWarning",kT=({contentRef:n,descriptionId:e})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Hm(ST).contentName}}.`;return b.useEffect(()=>{var a;const s=(a=n.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(i))},[i,n,e]),null},TT=Rm,PT=Mm,Vm=Dm,Gm=$m,Km=zm,Jm=Um,ET=Wm;const CT=TT,jT=PT,Ym=b.forwardRef(({className:n,...e},t)=>d.jsx(Vm,{ref:t,className:Fe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));Ym.displayName=Vm.displayName;const Qm=b.forwardRef(({className:n,children:e,...t},i)=>d.jsxs(jT,{children:[d.jsx(Ym,{}),d.jsxs(Gm,{ref:i,className:Fe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,d.jsxs(ET,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[d.jsx(wh,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Qm.displayName=Gm.displayName;const AT=b.forwardRef(({className:n,...e},t)=>d.jsx(Km,{ref:t,className:Fe("text-lg font-semibold leading-none tracking-tight",n),...e}));AT.displayName=Km.displayName;const OT=b.forwardRef(({className:n,...e},t)=>d.jsx(Jm,{ref:t,className:Fe("text-sm text-muted-foreground",n),...e}));OT.displayName=Jm.displayName;const NT=()=>{const n=Ht(),{toast:e}=Rl(),[t,i]=b.useState([]),[s,a]=b.useState(!0),[l,u]=b.useState(!1),[f,m]=b.useState(null);b.useEffect(()=>{p(),v()},[]);const p=async()=>{const{data:{user:y}}=await ue.auth.getUser();y||n("/auth")},v=async()=>{try{const{data:{user:y}}=await ue.auth.getUser();if(!y){e({title:"Authentication Error",description:"Please log in to view your orders",variant:"destructive"}),n("/auth");return}const{data:w}=await ue.from("user_roles").select("role").eq("user_id",y.id).eq("role","customer");if(!w||w.length===0){e({title:"Access Denied",description:"You don't have permission to view customer orders",variant:"destructive"}),n("/dashboard");return}const{data:k,error:C}=await ue.from("pre_orders").select(`
          *,
          stall:seller_stalls (
            stall_name,
            id
          ),
          items:order_items (
            quantity,
            unit_price,
            product:products (
              name
            )
          )
        `).eq("customer_id",y.id).order("created_at",{ascending:!1});if(C)throw C;const P=(k==null?void 0:k.filter(j=>j.customer_id===y.id))||[];i(P)}catch(y){console.error("Error fetching orders:",y),e({title:"Error",description:"Failed to load orders",variant:"destructive"})}finally{a(!1)}},S=y=>({pending:"bg-yellow-500",confirmed:"bg-blue-500",preparing:"bg-purple-500",ready:"bg-green-500",completed:"bg-gray-500",cancelled:"bg-red-500"})[y]||"bg-gray-500",_=y=>{m(y),u(!0)},T=async()=>{if(f)try{const{data:{user:y}}=await ue.auth.getUser();if(!y){e({title:"Authentication Error",description:"Please log in to complete payment",variant:"destructive"});return}const{data:w}=await ue.from("pre_orders").select("customer_id").eq("id",f.id).single();if(!w||w.customer_id!==y.id){e({title:"Authorization Error",description:"You don't have permission to update this order",variant:"destructive"});return}const{error:k}=await ue.from("pre_orders").update({payment_status:"paid",updated_at:new Date().toISOString()}).eq("id",f.id).eq("customer_id",y.id);if(k)throw k;i(t.map(C=>C.id===f.id?{...C,payment_status:"paid"}:C)),e({title:"Payment Successful",description:"Your payment has been confirmed"})}catch(y){console.error("Error updating payment status:",y),e({title:"Error",description:"Failed to update payment status",variant:"destructive"})}finally{u(!1),m(null)}};return s?d.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 flex items-center justify-center",children:d.jsx("p",{className:"text-lg",children:"Loading orders..."})}):d.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 p-6",children:[d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs(re,{variant:"ghost",onClick:()=>n("/dashboard"),children:[d.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),d.jsx(cs,{message:"Hi, I have a question about my order"})]}),d.jsx("h1",{className:"text-3xl font-bold mb-6",children:"My Orders"}),t.length===0?d.jsxs(Se,{className:"p-12 text-center",children:[d.jsx(so,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),d.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No orders yet"}),d.jsx("p",{className:"text-muted-foreground mb-6",children:"Start pre-ordering from your favorite sellers!"}),d.jsx(re,{onClick:()=>n("/products"),children:"Browse Products"})]}):d.jsx("div",{className:"space-y-4",children:t.map(y=>d.jsxs(Se,{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-bold text-lg",children:y.stall.stall_name}),d.jsx("p",{className:"text-sm text-muted-foreground",children:y.tracking_code||`Order #${y.id.slice(0,8)}`})]}),d.jsxs("div",{className:"text-right",children:[d.jsx(bi,{className:S(y.status),children:y.status.toUpperCase()}),d.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:new Date(y.created_at).toLocaleDateString()})]})]}),d.jsx("div",{className:"space-y-2 mb-4 bg-secondary/20 p-4 rounded-lg",children:y.items.map((w,k)=>d.jsxs("div",{className:"flex justify-between text-sm",children:[d.jsxs("span",{children:[w.quantity,"x ",w.product.name]}),d.jsxs("span",{children:["RM ",(w.quantity*w.unit_price).toFixed(2)]})]},k))}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(vh,{className:"w-4 h-4 text-muted-foreground"}),d.jsx("span",{children:new Date(y.pickup_date).toLocaleDateString()})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx($l,{className:"w-4 h-4 text-muted-foreground"}),d.jsx("span",{children:y.pickup_time})]})]}),y.customer_notes&&d.jsxs("div",{className:"mb-4 text-sm",children:[d.jsx("p",{className:"font-medium",children:"Your notes:"}),d.jsx("p",{className:"text-muted-foreground",children:y.customer_notes})]}),y.seller_notes&&d.jsxs("div",{className:"mb-4 text-sm bg-blue-500/10 p-3 rounded",children:[d.jsx("p",{className:"font-medium",children:"Seller's message:"}),d.jsx("p",{className:"text-muted-foreground",children:y.seller_notes})]}),d.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),d.jsxs("p",{className:"text-2xl font-bold",children:["RM ",y.total_amount.toFixed(2)]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs(bi,{variant:y.payment_status==="paid"?"default":"secondary",children:["Payment: ",y.payment_status]}),y.payment_status!=="paid"&&d.jsxs(re,{size:"sm",onClick:()=>_(y),children:[d.jsx(gv,{className:"w-4 h-4 mr-2"})," Pay Now"]})]})]})]},y.id))})]}),d.jsx(CT,{open:l,onOpenChange:u,children:d.jsx(Qm,{className:"sm:max-w-md",children:f&&d.jsx(wk,{orderId:f.id,amount:f.total_amount,onPaymentComplete:T,onCancel:()=>u(!1)})})})]})},RT=()=>{const n=Ht();return d.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary/20 p-4",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsx("div",{className:"flex justify-between items-center mb-4",children:d.jsxs(re,{variant:"ghost",onClick:()=>n("/customer/browse-products"),children:[d.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Back to Products"]})}),d.jsxs(Se,{className:"p-4 h-[calc(100vh-120px)]",children:[d.jsx("div",{className:"flex justify-between items-center mb-4",children:d.jsx("h1",{className:"text-2xl font-bold",children:"Pasar Malam Taiping - Stall Map"})}),d.jsx("p",{className:"text-muted-foreground mb-4",children:"Find your favorite stalls at Pasar Malam Batu 2 1/2, Taiping, Perak. Click on a marker to see stall details."}),d.jsx("div",{className:"h-[calc(100vh-240px)] w-full rounded-md overflow-hidden",children:d.jsx(wm,{fullScreen:!0})})]})]})})},LT=()=>{const n=Ht(),e=()=>{window.open("https://wa.me/60193438388?text=Hi,%20I%20need%20help%20with%20PasarMalamAI","_blank")};return d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-primary/5",children:[d.jsx("header",{className:"border-b bg-background/95 backdrop-blur",children:d.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center gap-4",children:[d.jsx(re,{variant:"ghost",onClick:()=>n("/dashboard"),children:d.jsx(Cn,{className:"w-4 h-4"})}),d.jsx("h1",{className:"text-2xl font-bold",children:"Help & Tutorials"})]})}),d.jsxs("main",{className:"container mx-auto px-4 py-8",children:[d.jsxs(Se,{className:"mb-6",children:[d.jsxs(Ue,{children:[d.jsxs(Ze,{className:"flex items-center gap-2",children:[d.jsx(co,{className:"w-5 h-5"}),"Need Help?"]}),d.jsx(gt,{children:"Contact our support team on WhatsApp"})]}),d.jsx(Be,{children:d.jsxs(re,{onClick:e,variant:"default",size:"lg",children:[d.jsx(co,{className:"w-5 h-5 mr-2"}),"Chat with Support (+60193438388)"]})})]}),d.jsxs(Go,{defaultValue:"customer",className:"w-full",children:[d.jsxs(ys,{className:"grid w-full grid-cols-2",children:[d.jsx(On,{value:"customer",children:"For Customers"}),d.jsx(On,{value:"seller",children:"For Sellers"})]}),d.jsxs(Nn,{value:"customer",className:"space-y-4",children:[d.jsxs(Se,{children:[d.jsx(Ue,{children:d.jsxs(Ze,{className:"flex items-center gap-2",children:[d.jsx(il,{className:"w-5 h-5"}),"Getting Started as a Customer"]})}),d.jsxs(Be,{className:"space-y-4",children:[d.jsx("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:d.jsx("p",{className:"text-muted-foreground",children:"Tutorial video coming soon"})}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"font-semibold",children:"Quick Start Guide:"}),d.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-muted-foreground",children:[d.jsx("li",{children:"Create your free account using email and password"}),d.jsx("li",{children:"Browse available products from local pasar malam sellers"}),d.jsx("li",{children:"Select products and add them to your pre-order"}),d.jsx("li",{children:"Choose pickup date and time"}),d.jsx("li",{children:"Complete payment and receive order confirmation"}),d.jsx("li",{children:"Pick up your order at the specified time and location"})]})]})]})]}),d.jsxs(Se,{children:[d.jsx(Ue,{children:d.jsx(Ze,{children:"How to Place a Pre-Order"})}),d.jsx(Be,{children:d.jsx("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center mb-4",children:d.jsx("p",{className:"text-muted-foreground",children:"Tutorial video coming soon"})})})]})]}),d.jsxs(Nn,{value:"seller",className:"space-y-4",children:[d.jsxs(Se,{children:[d.jsx(Ue,{children:d.jsxs(Ze,{className:"flex items-center gap-2",children:[d.jsx(il,{className:"w-5 h-5"}),"Getting Started as a Seller"]})}),d.jsxs(Be,{className:"space-y-4",children:[d.jsx("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:d.jsx("p",{className:"text-muted-foreground",children:"Tutorial video coming soon"})}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"font-semibold",children:"Quick Start Guide:"}),d.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-muted-foreground",children:[d.jsx("li",{children:"Register your account with email and password"}),d.jsx("li",{children:"Subscribe to the seller plan (RM50 for 2 months)"}),d.jsx("li",{children:"Make payment via QR code scan"}),d.jsx("li",{children:"Contact support on WhatsApp with payment proof"}),d.jsx("li",{children:"Wait for account activation (within 24 hours)"}),d.jsx("li",{children:"Your products will be managed by the admin initially"}),d.jsx("li",{children:"View your orders and manage pre-orders from customers"})]})]})]})]}),d.jsxs(Se,{children:[d.jsx(Ue,{children:d.jsx(Ze,{children:"Managing Your Orders"})}),d.jsx(Be,{children:d.jsx("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center mb-4",children:d.jsx("p",{className:"text-muted-foreground",children:"Tutorial video coming soon"})})})]}),d.jsxs(Se,{children:[d.jsx(Ue,{children:d.jsx(Ze,{children:"Understanding Payouts"})}),d.jsxs(Be,{className:"space-y-2",children:[d.jsx("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center mb-4",children:d.jsx("p",{className:"text-muted-foreground",children:"Tutorial video coming soon"})}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Payouts are processed via direct bank transfer to your registered bank account. Payments are currently processed manually and will be automated in future updates."})]})]})]})]})]})]})},IT=new eb,MT=()=>d.jsx(nb,{client:IT,children:d.jsxs(Aw,{children:[d.jsx(d_,{}),d.jsx(Z_,{}),d.jsx(ag,{children:d.jsxs(lg,{children:[d.jsx(ut,{path:"/",element:d.jsx(db,{})}),d.jsx(ut,{path:"/auth",element:d.jsx(qS,{})}),d.jsx(ut,{path:"/dashboard",element:d.jsx(HS,{})}),d.jsx(ut,{path:"/admin/products",element:d.jsx(GS,{})}),d.jsx(ut,{path:"/admin/subscriptions",element:d.jsx(JS,{})}),d.jsx(ut,{path:"/admin/payouts",element:d.jsx(YS,{})}),d.jsx(ut,{path:"/seller/subscription",element:d.jsx(XS,{})}),d.jsx(ut,{path:"/products",element:d.jsx(Ha,{})}),d.jsx(ut,{path:"/customer/browse",element:d.jsx(Ha,{})}),d.jsx(ut,{path:"/customer/browse-products",element:d.jsx(Ha,{})}),d.jsx(ut,{path:"/customer/market-map",element:d.jsx(RT,{})}),d.jsx(ut,{path:"/customer/cart",element:d.jsx(yk,{})}),d.jsx(ut,{path:"/customer/orders",element:d.jsx(NT,{})}),d.jsx(ut,{path:"/tutorials",element:d.jsx(LT,{})}),d.jsx(ut,{path:"*",element:d.jsx(VS,{})})]})})]})});Fd(document.getElementById("root")).render(d.jsx(MT,{}));
//# sourceMappingURL=index-Ct9wQH9p.js.map
